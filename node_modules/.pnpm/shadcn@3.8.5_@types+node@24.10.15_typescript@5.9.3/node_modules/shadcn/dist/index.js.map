{"version":3,"sources":["../src/preflights/preflight-init.ts","../src/utils/is-safe-target.ts","../src/utils/updaters/update-css.ts","../src/utils/updaters/update-css-vars.ts","../src/utils/updaters/update-dependencies.ts","../src/utils/updaters/update-env-vars.ts","../src/utils/updaters/update-fonts.ts","../src/utils/add-components.ts","../src/utils/create-project.ts","../src/utils/env-loader.ts","../src/utils/file-helper.ts","../src/registry/namespaces.ts","../src/utils/registries.ts","../src/utils/updaters/update-tailwind-content.ts","../src/commands/init.ts","../src/preflights/preflight-add.ts","../src/utils/update-app-index.ts","../src/commands/add.ts","../src/preflights/preflight-build.ts","../src/commands/build.ts","../src/commands/create.ts","../src/commands/diff.ts","../src/commands/info.ts","../src/commands/mcp.ts","../src/utils/legacy-icon-libraries.ts","../src/migrations/migrate-icons.ts","../src/migrations/migrate-radix.ts","../src/migrations/migrate-rtl.ts","../src/preflights/preflight-migrate.ts","../src/commands/migrate.ts","../src/commands/registry/add.ts","../src/commands/registry/index.ts","../src/preflights/preflight-registry.ts","../src/commands/registry/build.ts","../src/commands/registry/mcp.ts","../src/commands/search.ts","../src/commands/view.ts","../package.json","../src/index.ts"],"names":["preFlightInit","options","errors","fs","path","projectSpinner","spinner","logger","highlighter","frameworkSpinner","projectInfo","getProjectInfo","tailwindSpinnerMessage","tailwindSpinner","tsConfigSpinner","isSafeTarget","targetPath","cwd","decodedPath","prevPath","normalizedTarget","normalizedRoot","hasPathTraversal","cleanPath","cleanTarget","cleanDecoded","pattern","resolvedPath","updateCss","css","config","cssFilepath","cssFilepathRelative","cssSpinner","raw","output","transformCss","input","plugins","updateCssPlugin","result","postcss","root","lastNode","selector","properties","atRuleMatch","name","params","node","importRule","importNodes","lastImport","quotedParams","normalizeParams","p","pluginRule","pluginNodes","lastPlugin","newAtRule","themeInline","existingKeyframesRule","keyframesRule","step","stepProps","processRule","utilityAtRule","prop","value","existingDecl","decl","atRule","processAtRule","childSelector","childProps","nestedMatch","nestedName","nestedParams","tempRule","rule","clone","error","parent","atRuleName","atRuleParams","nestedSelector","updateCssVars","cssVars","cssVarsSpinner","transformCssVars","updateCssVarsPlugin","cleanupDefaultNextStylesPlugin","addCustomVariant","updateCssVarsPluginV4","updateThemePlugin","updateTailwindConfigPlugin","updateTailwindConfigAnimationPlugin","updateTailwindConfigKeyframesPlugin","baseLayer","AtRule","key","vars","addOrUpdateVars","removeConflictVars","rootRule","propsToRemove","bodyRule","darkRootRule","ruleNode","newDecl","themeNode","upsertThemeNode","isLocalHSLValue","variables","themeVarNodes","variable","radiusVariables","cssVarNode","isColorValue","propValue","variantNode","tailwindConfig","quote","getQuoteType","lastPluginNode","plugin","pluginName","pluginNode","existingKeyFrameNodes","keyframeValueSchema","z","keyframeName","keyframeValue","parsedKeyframeValue","keyframeNode","values","existingAnimationNodes","parsedAnimationValue","animationNode","chunks","chunk","updateDependencies","dependencies","devDependencies","dependenciesSpinner","packageManager","getUpdateDependenciesPackageManager","flag","shouldPromptForNpmFlag","confirmation","prompts","installWithPackageManager","packageInfo","getPackageInfo","hasReact19","hasReactDayPicker8","getPackageManager","installWithNpm","installWithDeno","installWithExpo","execa","dep","updateEnvVars","envVars","envSpinner","projectRoot","envFilePath","existingEnvFile","findExistingEnvFile","envFileExists","existsSync","envFileName","newEnvContent","envVarsAdded","envFileUpdated","envFileCreated","existingContent","mergedContent","mergeEnvContent","getNewEnvKeys","massageTreeForFonts","tree","fontSans","fontSourceDependency","updateFonts","fonts","fontsSpinner","updateNextFonts","layoutPath","findLayoutFile","layoutContent","updatedContent","transformLayoutFonts","isSrcDir","ext","possiblePaths","relativePath","fullPath","_config","sourceFile","Project","ScriptKind","googleFonts","f","fontVariableNames","font","importName","existingImport","imp","varName","toCamelCase","fontOptions","buildFontOptions","existingVarDecl","findFontVariableDeclaration","insertPosition","findInsertPosition","VariableDeclarationKind","updateHtmlClassName","str","part","index","variableStatements","statement","declaration","initializer","SyntaxKind","args","argText","imports","jsxElements","element","classNameAttr","variableExpressions","ensureCnImport","jsxAttr","newVarExpressions","currentValue","jsxExpr","expr","exprText","v","cleanedExpr","removeFontVariablesFromCn","newExpr","insertFontVariablesIntoCn","cnArgs","parseTemplateLiteralToCnArgs","utilsImport","templateLiteral","staticArgs","variableArgs","parts","staticParts","staticPart","cnExpr","fontVars","varsStr","addComponents","components","workspaceConfig","getWorkspaceConfig","addWorkspaceComponents","addProjectComponents","registrySpinner","resolveRegistryTree","configWithDefaults","handleError","validateFilesTarget","tailwindVersion","getProjectTailwindVersionFromConfig","updateTailwindConfig","overwriteCssVars","shouldOverwriteCssVars","updateFiles","filesCreated","filesUpdated","filesSkipped","rootSpinner","mainTargetConfig","workspaceRoot","findCommonRoot","filesByType","file","type","typeFiles","targetConfig","typeWorkspaceRoot","packageRoot","findPackageRoot","files","getRegistryItems","registryItemSchema","component","GITHUB_TEMPLATE_URL","TEMPLATES","createProject","template","projectName","nextVersion","isRemoteComponent","fetchRegistry","meta","projectPath","createNextProject","createMonorepoProject","createViteProject","createStartProject","createSpinner","templatePath","os","response","tarPath","extractedPath","packageJsonPath","packageJsonContent","packageJson","lockFilePath","loadEnvFiles","envFiles","envFile","envPath","join","FILE_BACKUP_SUFFIX","createFileBackup","filePath","fsExtra","backupPath","restoreFileBackup","deleteFileBackup","resolveRegistryNamespaces","discoveredNamespaces","visitedItems","itemsToProcess","currentItem","registry","parseRegistryAndItemFromString","BUILTIN_REGISTRIES","item","fetchRegistryItems","depRegistry","RegistryNotConfiguredError","ensureRegistriesInConfig","missingRegistries","registryIndex","getRegistriesIndex","foundRegistries","existingRegistries","newConfigWithRegistries","resolvedPaths","configWithoutResolvedPaths","configSpinner","updatedConfig","rawConfigSchema","updateTailwindContent","content","tailwindFileRelativePath","transformTailwindContent","_createSourceFile","configObject","property","addTailwindConfigContent","quoteChar","_getQuoteChar","existingProperty","newProperty","contentItem","newValue","code","initOptionsSchema","val","BASE_COLORS","color","init","Command","opts","shadowConfig","createConfig","componentsJsonPath","existingConfig","baseConfig","buildUrlAndHeadersForRegistryItem","deepmerge","runInit","clearRegistryContext","newProjectTemplate","preflight","getConfig","projectConfig","getProjectConfig","promptForMinimalConfig","promptForConfig","proceed","fullConfigForRegistry","resolveConfigPaths","configWithRegistries","componentSpinner","mergeConfig","base","override","registries","merged","fullConfig","defaultConfig","styles","baseColors","getRegistryStyles","getRegistryBaseColors","style","DEFAULT_TAILWIND_CSS","DEFAULT_TAILWIND_CONFIG","DEFAULT_COMPONENTS","DEFAULT_UTILS","baseColor","cssVariables","iconLibrary","preFlightAdd","updateAppIndex","indexPath","registryItem","addOptionsSchema","add","initialConfig","hasNewRegistries","newRegistries","itemType","shouldInstallStyleIndex","isUniversalRegistryItem","confirm","promptForRegistryComponents","deprecatedComponents","DEPRECATED_COMPONENTS","initHasRun","shouldUpdateAppIndex","getShadcnRegistryIndex","entry","c","preFlightBuild","resolvePaths","buildOptionsSchema","build","ye","ie","registrySchema","buildSpinner","SHADCN_URL","REGISTRY_URL","CREATE_TEMPLATES","create","searchParams","createUrl","getShadcnCreateUrl","open","enteredName","validateProjectName","selectedTemplate","presetResult","handlePresetOption","initUrl","url","buildInitUrl","registryBaseConfig","templateFiles","getTemplateFiles","preset","rtl","getShadcnInitUrl","presetArg","presets","getPresets","selectedPreset","isUrl","getPreset","presetNames","dedent","updateOptionsSchema","diff","targetDir","projectComponents","componentsWithUpdates","changes","diffComponent","change","printDiff","payload","fetchTree","getRegistryBaseColor","getItemTargetPath","fileContent","registryContent","transform","patch","diffLines","info","SHADCN_MCP_VERSION","CLIENTS","DEPENDENCIES","mcp","transport","StdioServerTransport","server","mcpInitOptionsSchema","command","client","installCommand","devFlag","installSpinner","configPath","runMcpInit","overwriteMerge","_","sourceArray","clientInfo","dir","mergedConfig","LEGACY_ICON_LIBRARIES","migrateIcons","uiPath","registryIcons","fg","getRegistryIcons","libraryChoices","migrateOptions","sourceLibrary","targetLibrary","migrationSpinner","migrateIconsFile","iconsMapping","sourceLibraryImport","targetLibraryImport","tmpdir","project","tempFile","randomBytes","targetedIcons","importDeclaration","specifier","iconName","targetedIcon","icon","toPascalCase","processNamedImports","namedImports","isTypeOnly","packageName","namedImportList","importItem","inlineTypeMatch","aliasMatch","importAlias","migrateRadix","basePath","stat","foundPackages","replacedPackages","migrateRadixFile","pkg","packageSpinner","foundPackagesArray","radixImportPattern","linesToRemove","quoteStyle","hasSemicolon","match","fullMatch","typeKeyword","namespaceAlias","semicolon","componentName","uniqueImports","self","i","unifiedImport","typePrefix","acc","line","transformedLine","offset","string","beforeMatch","openQuotes","openSingleQuotes","uniqueReplacedPackages","FILES_NEEDING_MANUAL_REVIEW","RTL_DOCS_URL","migrateRtl","transformedCount","filesNeedingReview","transformed","transformDirection","fileName","preFlightMigrate","migrations","migrateOptionsSchema","migration","migrate","migratePath","registryArgs","promptForRegistries","addRegistriesToConfig","parseRegistryArg","arg","namespace","rest","pluralize","count","singular","plural","parsed","needsLookup","registriesIndex","fetchSpinner","getRegistries","registriesToAdd","r","skipped","ns","writeSpinner","newRegistryNames","sorted","a","b","selected","preFlightRegistryBuild","buildRegistry","pe","resolvedRegistry","resolveRegistryItems","t","d","absPath","err","results","recursivelyResolveFileImports","searchOptionsSchema","search","partialConfig","validateRegistryConfigForItems","searchRegistries","viewOptionsSchema","view","items","package_default","main","program"],"mappings":"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","file":"index.js","sourcesContent":["import path from \"path\"\nimport { initOptionsSchema } from \"@/src/commands/init\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { getProjectInfo } from \"@/src/utils/get-project-info\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport fs from \"fs-extra\"\nimport { z } from \"zod\"\n\nexport async function preFlightInit(\n  options: z.infer<typeof initOptionsSchema>\n) {\n  const errors: Record<string, boolean> = {}\n\n  // Ensure target directory exists.\n  // Check for empty project. We assume if no package.json exists, the project is empty.\n  if (\n    !fs.existsSync(options.cwd) ||\n    !fs.existsSync(path.resolve(options.cwd, \"package.json\"))\n  ) {\n    errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] = true\n    return {\n      errors,\n      projectInfo: null,\n    }\n  }\n\n  const projectSpinner = spinner(`Preflight checks.`, {\n    silent: options.silent,\n  }).start()\n\n  if (\n    fs.existsSync(path.resolve(options.cwd, \"components.json\")) &&\n    !options.force\n  ) {\n    projectSpinner?.fail()\n    logger.break()\n    logger.error(\n      `A ${highlighter.info(\n        \"components.json\"\n      )} file already exists at ${highlighter.info(\n        options.cwd\n      )}.\\nTo start over, remove the ${highlighter.info(\n        \"components.json\"\n      )} file and run ${highlighter.info(\"init\")} again.`\n    )\n    logger.break()\n    process.exit(1)\n  }\n\n  projectSpinner?.succeed()\n\n  const frameworkSpinner = spinner(`Verifying framework.`, {\n    silent: options.silent,\n  }).start()\n  const projectInfo = await getProjectInfo(options.cwd)\n  if (!projectInfo || projectInfo?.framework.name === \"manual\") {\n    errors[ERRORS.UNSUPPORTED_FRAMEWORK] = true\n    frameworkSpinner?.fail()\n    logger.break()\n    if (projectInfo?.framework.links.installation) {\n      logger.error(\n        `We could not detect a supported framework at ${highlighter.info(\n          options.cwd\n        )}.\\n` +\n          `Visit ${highlighter.info(\n            projectInfo?.framework.links.installation\n          )} to manually configure your project.\\nOnce configured, you can use the cli to add components.`\n      )\n    }\n    logger.break()\n    process.exit(1)\n  }\n  frameworkSpinner?.succeed(\n    `Verifying framework. Found ${highlighter.info(\n      projectInfo.framework.label\n    )}.`\n  )\n\n  let tailwindSpinnerMessage = \"Validating Tailwind CSS.\"\n\n  if (projectInfo.tailwindVersion === \"v4\") {\n    tailwindSpinnerMessage = `Validating Tailwind CSS config. Found ${highlighter.info(\n      \"v4\"\n    )}.`\n  }\n\n  const tailwindSpinner = spinner(tailwindSpinnerMessage, {\n    silent: options.silent,\n  }).start()\n  if (\n    projectInfo.tailwindVersion === \"v3\" &&\n    (!projectInfo?.tailwindConfigFile || !projectInfo?.tailwindCssFile)\n  ) {\n    errors[ERRORS.TAILWIND_NOT_CONFIGURED] = true\n    tailwindSpinner?.fail()\n  } else if (\n    projectInfo.tailwindVersion === \"v4\" &&\n    !projectInfo?.tailwindCssFile\n  ) {\n    errors[ERRORS.TAILWIND_NOT_CONFIGURED] = true\n    tailwindSpinner?.fail()\n  } else if (!projectInfo.tailwindVersion) {\n    errors[ERRORS.TAILWIND_NOT_CONFIGURED] = true\n    tailwindSpinner?.fail()\n  } else {\n    tailwindSpinner?.succeed()\n  }\n\n  const tsConfigSpinner = spinner(`Validating import alias.`, {\n    silent: options.silent,\n  }).start()\n  if (!projectInfo?.aliasPrefix) {\n    errors[ERRORS.IMPORT_ALIAS_MISSING] = true\n    tsConfigSpinner?.fail()\n  } else {\n    tsConfigSpinner?.succeed()\n  }\n\n  if (Object.keys(errors).length > 0) {\n    if (errors[ERRORS.TAILWIND_NOT_CONFIGURED]) {\n      logger.break()\n      logger.error(\n        `No Tailwind CSS configuration found at ${highlighter.info(\n          options.cwd\n        )}.`\n      )\n      logger.error(\n        `It is likely you do not have Tailwind CSS installed or have an invalid configuration.`\n      )\n      logger.error(`Install Tailwind CSS then try again.`)\n      if (projectInfo?.framework.links.tailwind) {\n        logger.error(\n          `Visit ${highlighter.info(\n            projectInfo?.framework.links.tailwind\n          )} to get started.`\n        )\n      }\n    }\n\n    if (errors[ERRORS.IMPORT_ALIAS_MISSING]) {\n      logger.break()\n      logger.error(`No import alias found in your tsconfig.json file.`)\n      if (projectInfo?.framework.links.installation) {\n        logger.error(\n          `Visit ${highlighter.info(\n            projectInfo?.framework.links.installation\n          )} to learn how to set an import alias.`\n        )\n      }\n    }\n\n    logger.break()\n    process.exit(1)\n  }\n\n  return {\n    errors,\n    projectInfo,\n  }\n}\n","import path from \"path\"\n\nexport function isSafeTarget(targetPath: string, cwd: string): boolean {\n  // Check for null bytes which can be used to bypass validations.\n  if (targetPath.includes(\"\\0\")) {\n    return false\n  }\n\n  // Decode URL-encoded sequences to catch encoded traversal attempts.\n  let decodedPath: string\n  try {\n    // Decode multiple times to catch double-encoded sequences.\n    decodedPath = targetPath\n    let prevPath = \"\"\n    while (decodedPath !== prevPath && decodedPath.includes(\"%\")) {\n      prevPath = decodedPath\n      decodedPath = decodeURIComponent(decodedPath)\n    }\n  } catch {\n    // If decoding fails, treat as unsafe.\n    return false\n  }\n\n  // Normalize both paths to handle different path separators.\n  // Convert Windows backslashes to forward slashes for consistent handling.\n  const normalizedTarget = path.normalize(decodedPath.replace(/\\\\/g, \"/\"))\n  const normalizedRoot = path.normalize(cwd)\n\n  // Check for explicit path traversal sequences in both encoded and decoded forms.\n  // Allow [...] pattern which is common in framework routing (e.g., [...slug])\n  const hasPathTraversal = (path: string) => {\n    // Remove [...] patterns before checking for ..\n    const withoutBrackets = path.replace(/\\[\\.\\.\\..*?\\]/g, \"\")\n    return withoutBrackets.includes(\"..\")\n  }\n\n  if (\n    hasPathTraversal(normalizedTarget) ||\n    hasPathTraversal(decodedPath) ||\n    hasPathTraversal(targetPath)\n  ) {\n    return false\n  }\n\n  // Check for current directory references that might be used in traversal.\n  // First, remove [...] patterns to avoid false positives\n  const cleanPath = (path: string) => path.replace(/\\[\\.\\.\\..*?\\]/g, \"\")\n  const cleanTarget = cleanPath(targetPath)\n  const cleanDecoded = cleanPath(decodedPath)\n\n  const suspiciousPatterns = [\n    /\\.\\.[\\/\\\\]/, // ../ or ..\\\n    /[\\/\\\\]\\.\\./, // /.. or \\..\n    /\\.\\./, // .. anywhere\n    /\\.\\.%/, // URL encoded traversal\n    /\\x00/, // null byte\n    /[\\x01-\\x1f]/, // control characters\n  ]\n\n  if (\n    suspiciousPatterns.some(\n      (pattern) => pattern.test(cleanTarget) || pattern.test(cleanDecoded)\n    )\n  ) {\n    return false\n  }\n\n  // Allow ~/ at the start (home directory expansion within project) but reject ~/../ patterns.\n  if (\n    (targetPath.includes(\"~\") || decodedPath.includes(\"~\")) &&\n    (targetPath.includes(\"../\") || decodedPath.includes(\"../\"))\n  ) {\n    return false\n  }\n\n  // Check for Windows drive letters (even on non-Windows systems for safety).\n  const driveLetterRegex = /^[a-zA-Z]:[\\/\\\\]/\n  if (driveLetterRegex.test(decodedPath)) {\n    // On Windows, check if it starts with the project root.\n    if (process.platform === \"win32\") {\n      return decodedPath.toLowerCase().startsWith(cwd.toLowerCase())\n    }\n    // On non-Windows systems, reject all Windows absolute paths.\n    return false\n  }\n\n  // If it's an absolute path, ensure it's within the project root.\n  if (path.isAbsolute(normalizedTarget)) {\n    return normalizedTarget.startsWith(normalizedRoot + path.sep)\n  }\n\n  // For relative paths, resolve and check if within project bounds.\n  const resolvedPath = path.resolve(normalizedRoot, normalizedTarget)\n  return (\n    resolvedPath.startsWith(normalizedRoot + path.sep) ||\n    resolvedPath === normalizedRoot\n  )\n}\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport { registryItemCssSchema } from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport postcss from \"postcss\"\nimport AtRule from \"postcss/lib/at-rule\"\nimport Declaration from \"postcss/lib/declaration\"\nimport Root from \"postcss/lib/root\"\nimport Rule from \"postcss/lib/rule\"\nimport { z } from \"zod\"\n\nexport async function updateCss(\n  css: z.infer<typeof registryItemCssSchema> | undefined,\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  if (\n    !config.resolvedPaths.tailwindCss ||\n    !css ||\n    Object.keys(css).length === 0\n  ) {\n    return\n  }\n\n  options = {\n    silent: false,\n    ...options,\n  }\n\n  const cssFilepath = config.resolvedPaths.tailwindCss\n  const cssFilepathRelative = path.relative(\n    config.resolvedPaths.cwd,\n    cssFilepath\n  )\n  const cssSpinner = spinner(\n    `Updating ${highlighter.info(cssFilepathRelative)}`,\n    {\n      silent: options.silent,\n    }\n  ).start()\n\n  const raw = await fs.readFile(cssFilepath, \"utf8\")\n  let output = await transformCss(raw, css)\n  await fs.writeFile(cssFilepath, output, \"utf8\")\n  cssSpinner.succeed()\n}\n\nexport async function transformCss(\n  input: string,\n  css: z.infer<typeof registryItemCssSchema>\n) {\n  const plugins = [updateCssPlugin(css)]\n\n  const result = await postcss(plugins).process(input, {\n    from: undefined,\n  })\n\n  let output = result.css\n\n  // PostCSS doesn't add semicolons to at-rules without bodies when they're the last node.\n  // We need to manually ensure they have semicolons.\n  const root = result.root\n  if (root.nodes && root.nodes.length > 0) {\n    const lastNode = root.nodes[root.nodes.length - 1]\n    if (\n      lastNode.type === \"atrule\" &&\n      !lastNode.nodes &&\n      !output.trimEnd().endsWith(\";\")\n    ) {\n      output = output.trimEnd() + \";\"\n    }\n  }\n\n  output = output.replace(/\\/\\* ---break--- \\*\\//g, \"\")\n  output = output.replace(/(\\n\\s*\\n)+/g, \"\\n\\n\")\n  output = output.trimEnd()\n\n  return output\n}\n\nfunction updateCssPlugin(css: z.infer<typeof registryItemCssSchema>) {\n  return {\n    postcssPlugin: \"update-css\",\n    Once(root: Root) {\n      for (const [selector, properties] of Object.entries(css)) {\n        if (selector.startsWith(\"@\")) {\n          // Handle at-rules (@layer, @utility, etc.)\n          const atRuleMatch = selector.match(/@([a-zA-Z-]+)\\s*(.*)/)\n          if (!atRuleMatch) continue\n\n          const [, name, params] = atRuleMatch\n\n          // Special handling for imports - place them at the top.\n          if (name === \"import\") {\n            // Check if this import already exists.\n            const existingImport = root.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === \"import\" &&\n                node.params === params\n            )\n\n            if (!existingImport) {\n              const importRule = postcss.atRule({\n                name: \"import\",\n                params,\n                raws: { semicolon: true },\n              })\n\n              // Find the last import to insert after, or insert at beginning.\n              const importNodes = root.nodes?.filter(\n                (node): node is AtRule =>\n                  node.type === \"atrule\" && node.name === \"import\"\n              )\n\n              if (importNodes && importNodes.length > 0) {\n                // Insert after the last existing import.\n                const lastImport = importNodes[importNodes.length - 1]\n                importRule.raws.before = \"\\n\"\n                root.insertAfter(lastImport, importRule)\n              } else {\n                // No imports exist, insert at the very beginning.\n                // Check if the file is empty.\n                if (!root.nodes || root.nodes.length === 0) {\n                  importRule.raws.before = \"\"\n                } else {\n                  importRule.raws.before = \"\"\n                }\n                root.prepend(importRule)\n              }\n            }\n          }\n          // Special handling for plugins - place them after imports.\n          else if (name === \"plugin\") {\n            // Ensure plugin name is quoted if not already.\n            let quotedParams = params\n            if (params && !params.startsWith('\"') && !params.startsWith(\"'\")) {\n              quotedParams = `\"${params}\"`\n            }\n\n            // Normalize params for comparison (remove quotes).\n            const normalizeParams = (p: string) => {\n              if (p.startsWith('\"') && p.endsWith('\"')) {\n                return p.slice(1, -1)\n              }\n              if (p.startsWith(\"'\") && p.endsWith(\"'\")) {\n                return p.slice(1, -1)\n              }\n              return p\n            }\n\n            // Find existing plugin with same normalized params.\n            const existingPlugin = root.nodes?.find((node): node is AtRule => {\n              if (node.type !== \"atrule\" || node.name !== \"plugin\") {\n                return false\n              }\n              return normalizeParams(node.params) === normalizeParams(params)\n            })\n\n            if (!existingPlugin) {\n              const pluginRule = postcss.atRule({\n                name: \"plugin\",\n                params: quotedParams,\n                raws: { semicolon: true, before: \"\\n\" },\n              })\n\n              // Find the last import or plugin node to insert after\n              const importNodes = root.nodes?.filter(\n                (node): node is AtRule =>\n                  node.type === \"atrule\" && node.name === \"import\"\n              )\n\n              const pluginNodes = root.nodes?.filter(\n                (node): node is AtRule =>\n                  node.type === \"atrule\" && node.name === \"plugin\"\n              )\n\n              if (pluginNodes && pluginNodes.length > 0) {\n                // Insert after the last existing plugin\n                const lastPlugin = pluginNodes[pluginNodes.length - 1]\n                root.insertAfter(lastPlugin, pluginRule)\n              } else if (importNodes && importNodes.length > 0) {\n                // Insert after the last import if no plugins exist\n                const lastImport = importNodes[importNodes.length - 1]\n                root.insertAfter(lastImport, pluginRule)\n                // Add a break comment before the first plugin to create spacing\n                root.insertBefore(\n                  pluginRule,\n                  postcss.comment({ text: \"---break---\" })\n                )\n                // Add a break comment after the plugin for spacing from other content\n                root.insertAfter(\n                  pluginRule,\n                  postcss.comment({ text: \"---break---\" })\n                )\n              } else {\n                // If no imports or plugins, insert at the beginning\n                root.prepend(pluginRule)\n                // Add a break comment before the first plugin for spacing\n                root.insertBefore(\n                  pluginRule,\n                  postcss.comment({ text: \"---break---\" })\n                )\n                // Add a break comment after the plugin for spacing from other content\n                root.insertAfter(\n                  pluginRule,\n                  postcss.comment({ text: \"---break---\" })\n                )\n              }\n            }\n          }\n          // Check if this is any at-rule with no body (empty object).\n          else if (\n            typeof properties === \"object\" &&\n            Object.keys(properties).length === 0\n          ) {\n            // Handle any at-rule with no body (e.g., @apply, @tailwind, etc.).\n            const atRule = root.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === name &&\n                node.params === params\n            ) as AtRule | undefined\n\n            if (!atRule) {\n              const newAtRule = postcss.atRule({\n                name,\n                params,\n                raws: { semicolon: true },\n              })\n\n              root.append(newAtRule)\n              root.insertBefore(\n                newAtRule,\n                postcss.comment({ text: \"---break---\" })\n              )\n            }\n          }\n          // Special handling for keyframes - place them under @theme inline.\n          else if (name === \"keyframes\") {\n            let themeInline = root.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === \"theme\" &&\n                node.params === \"inline\"\n            ) as AtRule | undefined\n\n            if (!themeInline) {\n              themeInline = postcss.atRule({\n                name: \"theme\",\n                params: \"inline\",\n                raws: { semicolon: true, between: \" \", before: \"\\n\" },\n              })\n              root.append(themeInline)\n              root.insertBefore(\n                themeInline,\n                postcss.comment({ text: \"---break---\" })\n              )\n            }\n\n            // Check if a keyframe with the same name already exists\n            const existingKeyframesRule = themeInline.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === \"keyframes\" &&\n                node.params === params\n            )\n\n            let keyframesRule: AtRule\n            if (existingKeyframesRule) {\n              // Replace existing keyframe\n              keyframesRule = postcss.atRule({\n                name: \"keyframes\",\n                params,\n                raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n              })\n              existingKeyframesRule.replaceWith(keyframesRule)\n            } else {\n              // Create new keyframe\n              keyframesRule = postcss.atRule({\n                name: \"keyframes\",\n                params,\n                raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n              })\n              themeInline.append(keyframesRule)\n            }\n\n            if (typeof properties === \"object\") {\n              for (const [step, stepProps] of Object.entries(properties)) {\n                processRule(keyframesRule, step, stepProps)\n              }\n            }\n          }\n          // Special handling for utility classes to preserve property values\n          else if (name === \"utility\") {\n            const utilityAtRule = root.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === name &&\n                node.params === params\n            ) as AtRule | undefined\n\n            if (!utilityAtRule) {\n              const atRule = postcss.atRule({\n                name,\n                params,\n                raws: { semicolon: true, between: \" \", before: \"\\n\" },\n              })\n\n              root.append(atRule)\n              root.insertBefore(\n                atRule,\n                postcss.comment({ text: \"---break---\" })\n              )\n\n              // Add declarations with their values preserved\n              if (typeof properties === \"object\") {\n                for (const [prop, value] of Object.entries(properties)) {\n                  if (typeof value === \"string\") {\n                    const decl = postcss.decl({\n                      prop,\n                      value: value,\n                      raws: { semicolon: true, before: \"\\n    \" },\n                    })\n                    atRule.append(decl)\n                  } else if (typeof value === \"object\") {\n                    processRule(atRule, prop, value)\n                  }\n                }\n              }\n            } else {\n              // Update existing utility class\n              if (typeof properties === \"object\") {\n                for (const [prop, value] of Object.entries(properties)) {\n                  if (typeof value === \"string\") {\n                    const existingDecl = utilityAtRule.nodes?.find(\n                      (node): node is Declaration =>\n                        node.type === \"decl\" && node.prop === prop\n                    )\n\n                    const decl = postcss.decl({\n                      prop,\n                      value: value,\n                      raws: { semicolon: true, before: \"\\n    \" },\n                    })\n\n                    existingDecl\n                      ? existingDecl.replaceWith(decl)\n                      : utilityAtRule.append(decl)\n                  } else if (typeof value === \"object\") {\n                    processRule(utilityAtRule, prop, value)\n                  }\n                }\n              }\n            }\n          }\n          // Handle at-property as regular CSS rules\n          else if (name === \"property\") {\n            processRule(root, selector, properties)\n          } else {\n            // Handle other at-rules normally\n            processAtRule(root, name, params, properties)\n          }\n        } else {\n          // Handle regular CSS rules\n          processRule(root, selector, properties)\n        }\n      }\n    },\n  }\n}\n\nfunction processAtRule(\n  root: Root | AtRule,\n  name: string,\n  params: string,\n  properties: any\n) {\n  // Find or create the at-rule\n  let atRule = root.nodes?.find(\n    (node): node is AtRule =>\n      node.type === \"atrule\" && node.name === name && node.params === params\n  ) as AtRule | undefined\n\n  if (!atRule) {\n    atRule = postcss.atRule({\n      name,\n      params,\n      raws: { semicolon: true, between: \" \", before: \"\\n\" },\n    })\n    root.append(atRule)\n    root.insertBefore(atRule, postcss.comment({ text: \"---break---\" }))\n  }\n\n  // Process children of this at-rule\n  if (typeof properties === \"object\") {\n    for (const [childSelector, childProps] of Object.entries(properties)) {\n      if (childSelector.startsWith(\"@\")) {\n        // Nested at-rule\n        const nestedMatch = childSelector.match(/@([a-zA-Z-]+)\\s*(.*)/)\n        if (nestedMatch) {\n          const [, nestedName, nestedParams] = nestedMatch\n          processAtRule(atRule, nestedName, nestedParams, childProps)\n        }\n      } else {\n        // CSS rule within at-rule\n        processRule(atRule, childSelector, childProps)\n      }\n    }\n  } else if (typeof properties === \"string\") {\n    // Direct string content for the at-rule\n    try {\n      // Parse the CSS string with PostCSS\n      const parsed = postcss.parse(`.temp{${properties}}`)\n      const tempRule = parsed.first as Rule\n\n      if (tempRule && tempRule.nodes) {\n        // Create a rule for the at-rule if needed\n        const rule = postcss.rule({\n          selector: \"temp\",\n          raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n        })\n\n        // Copy all declarations from the temp rule to our actual rule\n        tempRule.nodes.forEach((node) => {\n          if (node.type === \"decl\") {\n            const clone = node.clone()\n            clone.raws.before = \"\\n    \"\n            rule.append(clone)\n          }\n        })\n\n        // Only add the rule if it has declarations\n        if (rule.nodes?.length) {\n          atRule.append(rule)\n        }\n      }\n    } catch (error) {\n      console.error(\"Error parsing at-rule content:\", properties, error)\n      throw error\n    }\n  }\n}\n\nfunction processRule(parent: Root | AtRule, selector: string, properties: any) {\n  let rule = parent.nodes?.find(\n    (node): node is Rule => node.type === \"rule\" && node.selector === selector\n  ) as Rule | undefined\n\n  if (!rule) {\n    rule = postcss.rule({\n      selector,\n      raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n    })\n    parent.append(rule)\n  }\n\n  if (typeof properties === \"object\") {\n    for (const [prop, value] of Object.entries(properties)) {\n      // Check if this is any at-rule with empty object (no body).\n      if (\n        prop.startsWith(\"@\") &&\n        typeof value === \"object\" &&\n        value !== null &&\n        Object.keys(value).length === 0\n      ) {\n        // Parse the at-rule.\n        const atRuleMatch = prop.match(/@([a-zA-Z-]+)\\s*(.*)/)\n        if (atRuleMatch) {\n          const [, atRuleName, atRuleParams] = atRuleMatch\n\n          // Check if this at-rule already exists in the rule.\n          const existingAtRule = rule.nodes?.find(\n            (node): node is AtRule =>\n              node.type === \"atrule\" &&\n              node.name === atRuleName &&\n              node.params === atRuleParams\n          )\n\n          if (!existingAtRule) {\n            const atRule = postcss.atRule({\n              name: atRuleName,\n              params: atRuleParams,\n              raws: { semicolon: true, before: \"\\n    \" },\n            })\n            rule.append(atRule)\n          }\n        }\n      } else if (typeof value === \"string\") {\n        const decl = postcss.decl({\n          prop,\n          value: value,\n          raws: { semicolon: true, before: \"\\n    \" },\n        })\n\n        // Replace existing property or add new one.\n        const existingDecl = rule.nodes?.find(\n          (node): node is Declaration =>\n            node.type === \"decl\" && node.prop === prop\n        )\n\n        existingDecl ? existingDecl.replaceWith(decl) : rule.append(decl)\n      } else if (typeof value === \"object\") {\n        // Nested selector (including & selectors).\n        const nestedSelector = prop.startsWith(\"&\")\n          ? selector.replace(/^([^:]+)/, `$1${prop.substring(1)}`)\n          : prop // Use the original selector for other nested elements.\n        processRule(parent, nestedSelector, value)\n      }\n    }\n  } else if (typeof properties === \"string\") {\n    // Direct string content for the rule\n    try {\n      // Parse the CSS string with PostCSS\n      const parsed = postcss.parse(`.temp{${properties}}`)\n      const tempRule = parsed.first as Rule\n\n      if (tempRule && tempRule.nodes) {\n        // Copy all declarations from the temp rule to our actual rule\n        tempRule.nodes.forEach((node) => {\n          if (node.type === \"decl\") {\n            const clone = node.clone()\n            clone.raws.before = \"\\n    \"\n            rule?.append(clone)\n          }\n        })\n      }\n    } catch (error) {\n      console.error(\"Error parsing rule content:\", selector, properties, error)\n      throw error\n    }\n  }\n}\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport {\n  registryItemCssVarsSchema,\n  registryItemTailwindSchema,\n} from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { TailwindVersion } from \"@/src/utils/get-project-info\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport postcss from \"postcss\"\nimport AtRule from \"postcss/lib/at-rule\"\nimport Root from \"postcss/lib/root\"\nimport Rule from \"postcss/lib/rule\"\nimport { z } from \"zod\"\n\nexport async function updateCssVars(\n  cssVars: z.infer<typeof registryItemCssVarsSchema> | undefined,\n  config: Config,\n  options: {\n    cleanupDefaultNextStyles?: boolean\n    overwriteCssVars?: boolean\n    silent?: boolean\n    tailwindVersion?: TailwindVersion\n    tailwindConfig?: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n  }\n) {\n  if (!config.resolvedPaths.tailwindCss || !Object.keys(cssVars ?? {}).length) {\n    return\n  }\n\n  options = {\n    cleanupDefaultNextStyles: false,\n    silent: false,\n    tailwindVersion: \"v3\",\n    overwriteCssVars: false,\n    ...options,\n  }\n  const cssFilepath = config.resolvedPaths.tailwindCss\n  const cssFilepathRelative = path.relative(\n    config.resolvedPaths.cwd,\n    cssFilepath\n  )\n  const cssVarsSpinner = spinner(\n    `Updating CSS variables in ${highlighter.info(cssFilepathRelative)}`,\n    {\n      silent: options.silent,\n    }\n  ).start()\n  const raw = await fs.readFile(cssFilepath, \"utf8\")\n  let output = await transformCssVars(raw, cssVars ?? {}, config, {\n    cleanupDefaultNextStyles: options.cleanupDefaultNextStyles,\n    tailwindVersion: options.tailwindVersion,\n    tailwindConfig: options.tailwindConfig,\n    overwriteCssVars: options.overwriteCssVars,\n  })\n  await fs.writeFile(cssFilepath, output, \"utf8\")\n  cssVarsSpinner.succeed()\n}\n\nexport async function transformCssVars(\n  input: string,\n  cssVars: z.infer<typeof registryItemCssVarsSchema>,\n  config: Config,\n  options: {\n    cleanupDefaultNextStyles?: boolean\n    tailwindVersion?: TailwindVersion\n    tailwindConfig?: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n    overwriteCssVars?: boolean\n  } = {\n    cleanupDefaultNextStyles: false,\n    tailwindVersion: \"v3\",\n    tailwindConfig: undefined,\n    overwriteCssVars: false,\n  }\n) {\n  options = {\n    cleanupDefaultNextStyles: false,\n    tailwindVersion: \"v3\",\n    tailwindConfig: undefined,\n    overwriteCssVars: false,\n    ...options,\n  }\n\n  let plugins = [updateCssVarsPlugin(cssVars)]\n\n  if (options.cleanupDefaultNextStyles) {\n    plugins.push(cleanupDefaultNextStylesPlugin())\n  }\n\n  if (options.tailwindVersion === \"v4\") {\n    plugins = []\n\n    plugins.push(addCustomVariant({ params: \"dark (&:is(.dark *))\" }))\n\n    if (options.cleanupDefaultNextStyles) {\n      plugins.push(cleanupDefaultNextStylesPlugin())\n    }\n\n    plugins.push(\n      updateCssVarsPluginV4(cssVars, {\n        overwriteCssVars: options.overwriteCssVars,\n      })\n    )\n    plugins.push(updateThemePlugin(cssVars))\n\n    if (options.tailwindConfig) {\n      plugins.push(updateTailwindConfigPlugin(options.tailwindConfig))\n      plugins.push(updateTailwindConfigAnimationPlugin(options.tailwindConfig))\n      plugins.push(updateTailwindConfigKeyframesPlugin(options.tailwindConfig))\n    }\n  }\n\n  const result = await postcss(plugins).process(input, {\n    from: undefined,\n  })\n\n  let output = result.css\n\n  output = output.replace(/\\/\\* ---break--- \\*\\//g, \"\")\n\n  if (options.tailwindVersion === \"v4\") {\n    output = output.replace(/(\\n\\s*\\n)+/g, \"\\n\\n\")\n  }\n\n  return output\n}\n\nfunction updateCssVarsPlugin(\n  cssVars: z.infer<typeof registryItemCssVarsSchema>\n) {\n  return {\n    postcssPlugin: \"update-css-vars\",\n    Once(root: Root) {\n      let baseLayer = root.nodes.find(\n        (node) =>\n          node.type === \"atrule\" &&\n          node.name === \"layer\" &&\n          node.params === \"base\"\n      ) as AtRule | undefined\n\n      if (!(baseLayer instanceof AtRule)) {\n        baseLayer = postcss.atRule({\n          name: \"layer\",\n          params: \"base\",\n          nodes: [],\n          raws: {\n            semicolon: true,\n            before: \"\\n\",\n            between: \" \",\n          },\n        })\n        root.append(baseLayer)\n        root.insertBefore(baseLayer, postcss.comment({ text: \"---break---\" }))\n      }\n\n      if (baseLayer !== undefined) {\n        // Add variables for each key in cssVars\n        Object.entries(cssVars).forEach(([key, vars]) => {\n          const selector = key === \"light\" ? \":root\" : `.${key}`\n          // TODO: Fix typecheck.\n          addOrUpdateVars(baseLayer as AtRule, selector, vars)\n        })\n      }\n    },\n  }\n}\n\nfunction removeConflictVars(root: Rule | Root) {\n  const rootRule = root.nodes.find(\n    (node): node is Rule => node.type === \"rule\" && node.selector === \":root\"\n  )\n\n  if (rootRule) {\n    const propsToRemove = [\"--background\", \"--foreground\"]\n\n    rootRule.nodes\n      .filter(\n        (node): node is postcss.Declaration =>\n          node.type === \"decl\" && propsToRemove.includes(node.prop)\n      )\n      .forEach((node) => node.remove())\n\n    if (rootRule.nodes.length === 0) {\n      rootRule.remove()\n    }\n  }\n}\n\nfunction cleanupDefaultNextStylesPlugin() {\n  return {\n    postcssPlugin: \"cleanup-default-next-styles\",\n    Once(root: Root) {\n      const bodyRule = root.nodes.find(\n        (node): node is Rule => node.type === \"rule\" && node.selector === \"body\"\n      )\n      if (bodyRule) {\n        // Remove color from the body node.\n        bodyRule.nodes\n          .find(\n            (node): node is postcss.Declaration =>\n              node.type === \"decl\" &&\n              node.prop === \"color\" &&\n              [\"rgb(var(--foreground-rgb))\", \"var(--foreground)\"].includes(\n                node.value\n              )\n          )\n          ?.remove()\n\n        // Remove background: linear-gradient.\n        bodyRule.nodes\n          .find((node): node is postcss.Declaration => {\n            return (\n              node.type === \"decl\" &&\n              node.prop === \"background\" &&\n              // This is only going to run on create project, so all good.\n              (node.value.startsWith(\"linear-gradient\") ||\n                node.value === \"var(--background)\")\n            )\n          })\n          ?.remove()\n\n        // Remove font-family: Arial, Helvetica, sans-serif;\n        bodyRule.nodes\n          .find(\n            (node): node is postcss.Declaration =>\n              node.type === \"decl\" &&\n              node.prop === \"font-family\" &&\n              node.value === \"Arial, Helvetica, sans-serif\"\n          )\n          ?.remove()\n\n        // If the body rule is empty, remove it.\n        if (bodyRule.nodes.length === 0) {\n          bodyRule.remove()\n        }\n      }\n\n      removeConflictVars(root)\n\n      const darkRootRule = root.nodes.find(\n        (node): node is Rule =>\n          node.type === \"atrule\" &&\n          node.params === \"(prefers-color-scheme: dark)\"\n      )\n\n      if (darkRootRule) {\n        removeConflictVars(darkRootRule)\n        if (darkRootRule.nodes.length === 0) {\n          darkRootRule.remove()\n        }\n      }\n    },\n  }\n}\n\nfunction addOrUpdateVars(\n  baseLayer: AtRule,\n  selector: string,\n  vars: Record<string, string>\n) {\n  let ruleNode = baseLayer.nodes?.find(\n    (node): node is Rule => node.type === \"rule\" && node.selector === selector\n  )\n\n  if (!ruleNode) {\n    if (Object.keys(vars).length > 0) {\n      ruleNode = postcss.rule({\n        selector,\n        raws: { between: \" \", before: \"\\n  \" },\n      })\n      baseLayer.append(ruleNode)\n    }\n  }\n\n  Object.entries(vars).forEach(([key, value]) => {\n    const prop = `--${key.replace(/^--/, \"\")}`\n    const newDecl = postcss.decl({\n      prop,\n      value,\n      raws: { semicolon: true },\n    })\n\n    const existingDecl = ruleNode?.nodes.find(\n      (node): node is postcss.Declaration =>\n        node.type === \"decl\" && node.prop === prop\n    )\n\n    existingDecl ? existingDecl.replaceWith(newDecl) : ruleNode?.append(newDecl)\n  })\n}\n\nfunction updateCssVarsPluginV4(\n  cssVars: z.infer<typeof registryItemCssVarsSchema>,\n  options: {\n    overwriteCssVars?: boolean\n  }\n) {\n  return {\n    postcssPlugin: \"update-css-vars-v4\",\n    Once(root: Root) {\n      Object.entries(cssVars).forEach(([key, vars]) => {\n        let selector = key === \"light\" ? \":root\" : `.${key}`\n\n        if (key === \"theme\") {\n          selector = \"@theme\"\n          const themeNode = upsertThemeNode(root)\n          Object.entries(vars).forEach(([key, value]) => {\n            const prop = `--${key.replace(/^--/, \"\")}`\n            const newDecl = postcss.decl({\n              prop,\n              value,\n              raws: { semicolon: true },\n            })\n\n            const existingDecl = themeNode?.nodes?.find(\n              (node): node is postcss.Declaration =>\n                node.type === \"decl\" && node.prop === prop\n            )\n\n            // Only overwrite if overwriteCssVars is true\n            // i.e for registry:theme and registry:style\n            // We do not want new components to overwrite existing vars.\n            // Keep user defined vars.\n            if (options.overwriteCssVars) {\n              if (existingDecl) {\n                existingDecl.replaceWith(newDecl)\n              } else {\n                themeNode?.append(newDecl)\n              }\n            } else {\n              if (!existingDecl) {\n                themeNode?.append(newDecl)\n              }\n            }\n          })\n          return\n        }\n\n        let ruleNode = root.nodes?.find(\n          (node): node is Rule =>\n            node.type === \"rule\" && node.selector === selector\n        )\n\n        if (!ruleNode && Object.keys(vars).length > 0) {\n          ruleNode = postcss.rule({\n            selector,\n            nodes: [],\n            raws: { semicolon: true, between: \" \", before: \"\\n\" },\n          })\n          root.append(ruleNode)\n          root.insertBefore(ruleNode, postcss.comment({ text: \"---break---\" }))\n        }\n\n        Object.entries(vars).forEach(([key, value]) => {\n          let prop = `--${key.replace(/^--/, \"\")}`\n\n          // Special case for sidebar-background.\n          if (prop === \"--sidebar-background\") {\n            prop = \"--sidebar\"\n          }\n\n          if (isLocalHSLValue(value)) {\n            value = `hsl(${value})`\n          }\n\n          const newDecl = postcss.decl({\n            prop,\n            value,\n            raws: { semicolon: true },\n          })\n          const existingDecl = ruleNode?.nodes.find(\n            (node): node is postcss.Declaration =>\n              node.type === \"decl\" && node.prop === prop\n          )\n\n          // Only overwrite if overwriteCssVars is true\n          // i.e for registry:theme and registry:style\n          // We do not want new components to overwrite existing vars.\n          // Keep user defined vars.\n          if (options.overwriteCssVars) {\n            if (existingDecl) {\n              existingDecl.replaceWith(newDecl)\n            } else {\n              ruleNode?.append(newDecl)\n            }\n          } else {\n            if (!existingDecl) {\n              ruleNode?.append(newDecl)\n            }\n          }\n        })\n      })\n    },\n  }\n}\n\nfunction updateThemePlugin(cssVars: z.infer<typeof registryItemCssVarsSchema>) {\n  return {\n    postcssPlugin: \"update-theme\",\n    Once(root: Root) {\n      // Find unique color names from light and dark.\n      const variables = Array.from(\n        new Set(\n          Object.keys(cssVars).flatMap((key) =>\n            Object.keys(cssVars[key as keyof typeof cssVars] || {})\n          )\n        )\n      )\n\n      if (!variables.length) {\n        return\n      }\n\n      const themeNode = upsertThemeNode(root)\n\n      const themeVarNodes = themeNode.nodes?.filter(\n        (node): node is postcss.Declaration =>\n          node.type === \"decl\" && node.prop.startsWith(\"--\")\n      )\n\n      for (const variable of variables) {\n        const value = Object.values(cssVars).find((vars) => vars[variable])?.[\n          variable\n        ]\n\n        if (!value) {\n          continue\n        }\n\n        if (variable === \"radius\") {\n          const radiusVariables = {\n            sm: \"calc(var(--radius) - 4px)\",\n            md: \"calc(var(--radius) - 2px)\",\n            lg: \"var(--radius)\",\n            xl: \"calc(var(--radius) + 4px)\",\n            \"2xl\": \"calc(var(--radius) + 8px)\",\n            \"3xl\": \"calc(var(--radius) + 12px)\",\n            \"4xl\": \"calc(var(--radius) + 16px)\",\n          }\n          for (const [key, value] of Object.entries(radiusVariables)) {\n            const cssVarNode = postcss.decl({\n              prop: `--radius-${key}`,\n              value,\n              raws: { semicolon: true },\n            })\n            if (\n              themeNode?.nodes?.find(\n                (node): node is postcss.Declaration =>\n                  node.type === \"decl\" && node.prop === cssVarNode.prop\n              )\n            ) {\n              continue\n            }\n            themeNode?.append(cssVarNode)\n          }\n          continue\n        }\n\n        let prop =\n          isLocalHSLValue(value) || isColorValue(value)\n            ? `--color-${variable.replace(/^--/, \"\")}`\n            : `--${variable.replace(/^--/, \"\")}`\n        if (prop === \"--color-sidebar-background\") {\n          prop = \"--color-sidebar\"\n        }\n\n        let propValue = `var(--${variable})`\n        if (prop === \"--color-sidebar\") {\n          propValue = \"var(--sidebar)\"\n        }\n\n        const cssVarNode = postcss.decl({\n          prop,\n          value: propValue,\n          raws: { semicolon: true },\n        })\n        const existingDecl = themeNode?.nodes?.find(\n          (node): node is postcss.Declaration =>\n            node.type === \"decl\" && node.prop === cssVarNode.prop\n        )\n        if (!existingDecl) {\n          if (themeVarNodes?.length) {\n            themeNode?.insertAfter(\n              themeVarNodes[themeVarNodes.length - 1],\n              cssVarNode\n            )\n          } else {\n            themeNode?.append(cssVarNode)\n          }\n        }\n      }\n    },\n  }\n}\n\nfunction upsertThemeNode(root: Root): AtRule {\n  let themeNode = root.nodes.find(\n    (node): node is AtRule =>\n      node.type === \"atrule\" &&\n      node.name === \"theme\" &&\n      node.params === \"inline\"\n  )\n\n  if (!themeNode) {\n    themeNode = postcss.atRule({\n      name: \"theme\",\n      params: \"inline\",\n      nodes: [],\n      raws: { semicolon: true, between: \" \", before: \"\\n\" },\n    })\n    root.append(themeNode)\n    root.insertBefore(themeNode, postcss.comment({ text: \"---break---\" }))\n  }\n\n  return themeNode\n}\n\nfunction addCustomVariant({ params }: { params: string }) {\n  return {\n    postcssPlugin: \"add-custom-variant\",\n    Once(root: Root) {\n      const customVariant = root.nodes.find(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"custom-variant\"\n      )\n\n      if (!customVariant) {\n        // Find all import nodes\n        const importNodes = root.nodes.filter(\n          (node): node is AtRule =>\n            node.type === \"atrule\" && node.name === \"import\"\n        )\n\n        const variantNode = postcss.atRule({\n          name: \"custom-variant\",\n          params,\n          raws: { semicolon: true, before: \"\\n\" },\n        })\n\n        if (importNodes.length > 0) {\n          // Insert after the last import\n          const lastImport = importNodes[importNodes.length - 1]\n          root.insertAfter(lastImport, variantNode)\n        } else {\n          // If no imports, insert after the first node\n          root.insertAfter(root.nodes[0], variantNode)\n        }\n\n        root.insertBefore(variantNode, postcss.comment({ text: \"---break---\" }))\n      }\n    },\n  }\n}\n\nfunction addCustomImport({ params }: { params: string }) {\n  return {\n    postcssPlugin: \"add-custom-import\",\n    Once(root: Root) {\n      const importNodes = root.nodes.filter(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"import\"\n      )\n\n      // Find custom variant node (to ensure we insert before it).\n      const customVariantNode = root.nodes.find(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"custom-variant\"\n      )\n\n      // Check if our specific import already exists.\n      const hasImport = importNodes.some(\n        (node) => node.params.replace(/[\"']/g, \"\") === params\n      )\n\n      if (!hasImport) {\n        const importNode = postcss.atRule({\n          name: \"import\",\n          params: `\"${params}\"`,\n          raws: { semicolon: true, before: \"\\n\" },\n        })\n\n        if (importNodes.length > 0) {\n          // If there are existing imports, add after the last import.\n          const lastImport = importNodes[importNodes.length - 1]\n          root.insertAfter(lastImport, importNode)\n        } else if (customVariantNode) {\n          // If no imports but has custom-variant, insert before it.\n          root.insertBefore(customVariantNode, importNode)\n          root.insertBefore(\n            customVariantNode,\n            postcss.comment({ text: \"---break---\" })\n          )\n        } else {\n          // If no imports and no custom-variant, insert at the start.\n          root.prepend(importNode)\n          root.insertAfter(importNode, postcss.comment({ text: \"---break---\" }))\n        }\n      }\n    },\n  }\n}\n\nfunction updateTailwindConfigPlugin(\n  tailwindConfig: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n) {\n  return {\n    postcssPlugin: \"update-tailwind-config\",\n    Once(root: Root) {\n      if (!tailwindConfig?.plugins) {\n        return\n      }\n\n      const quoteType = getQuoteType(root)\n      const quote = quoteType === \"single\" ? \"'\" : '\"'\n\n      const pluginNodes = root.nodes.filter(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"plugin\"\n      )\n\n      const lastPluginNode =\n        pluginNodes[pluginNodes.length - 1] || root.nodes[0]\n\n      for (const plugin of tailwindConfig.plugins) {\n        const pluginName = plugin.replace(/^require\\([\"']|[\"']\\)$/g, \"\")\n\n        // Check if the plugin is already present.\n        if (\n          pluginNodes.some((node) => {\n            return node.params.replace(/[\"']/g, \"\") === pluginName\n          })\n        ) {\n          continue\n        }\n\n        const pluginNode = postcss.atRule({\n          name: \"plugin\",\n          params: `${quote}${pluginName}${quote}`,\n          raws: { semicolon: true, before: \"\\n\" },\n        })\n        root.insertAfter(lastPluginNode, pluginNode)\n        root.insertBefore(pluginNode, postcss.comment({ text: \"---break---\" }))\n      }\n    },\n  }\n}\n\nfunction updateTailwindConfigKeyframesPlugin(\n  tailwindConfig: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n) {\n  return {\n    postcssPlugin: \"update-tailwind-config-keyframes\",\n    Once(root: Root) {\n      if (!tailwindConfig?.theme?.extend?.keyframes) {\n        return\n      }\n\n      const themeNode = upsertThemeNode(root)\n      const existingKeyFrameNodes = themeNode.nodes?.filter(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"keyframes\"\n      )\n\n      const keyframeValueSchema = z.record(\n        z.string(),\n        z.record(z.string(), z.string())\n      )\n\n      for (const [keyframeName, keyframeValue] of Object.entries(\n        tailwindConfig.theme.extend.keyframes\n      )) {\n        if (typeof keyframeName !== \"string\") {\n          continue\n        }\n\n        const parsedKeyframeValue = keyframeValueSchema.safeParse(keyframeValue)\n\n        if (!parsedKeyframeValue.success) {\n          continue\n        }\n\n        if (\n          existingKeyFrameNodes?.find(\n            (node): node is postcss.AtRule =>\n              node.type === \"atrule\" &&\n              node.name === \"keyframes\" &&\n              node.params === keyframeName\n          )\n        ) {\n          continue\n        }\n\n        const keyframeNode = postcss.atRule({\n          name: \"keyframes\",\n          params: keyframeName,\n          nodes: [],\n          raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n        })\n\n        for (const [key, values] of Object.entries(parsedKeyframeValue.data)) {\n          const rule = postcss.rule({\n            selector: key,\n            nodes: Object.entries(values).map(([key, value]) =>\n              postcss.decl({\n                prop: key,\n                value,\n                raws: { semicolon: true, before: \"\\n      \", between: \": \" },\n              })\n            ),\n            raws: { semicolon: true, between: \" \", before: \"\\n    \" },\n          })\n          keyframeNode.append(rule)\n        }\n\n        themeNode.append(keyframeNode)\n        themeNode.insertBefore(\n          keyframeNode,\n          postcss.comment({ text: \"---break---\" })\n        )\n      }\n    },\n  }\n}\n\nfunction updateTailwindConfigAnimationPlugin(\n  tailwindConfig: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n) {\n  return {\n    postcssPlugin: \"update-tailwind-config-animation\",\n    Once(root: Root) {\n      if (!tailwindConfig?.theme?.extend?.animation) {\n        return\n      }\n\n      const themeNode = upsertThemeNode(root)\n      const existingAnimationNodes = themeNode.nodes?.filter(\n        (node): node is postcss.Declaration =>\n          node.type === \"decl\" && node.prop.startsWith(\"--animate-\")\n      )\n\n      const parsedAnimationValue = z\n        .record(z.string(), z.string())\n        .safeParse(tailwindConfig.theme.extend.animation)\n      if (!parsedAnimationValue.success) {\n        return\n      }\n\n      for (const [key, value] of Object.entries(parsedAnimationValue.data)) {\n        const prop = `--animate-${key}`\n        if (\n          existingAnimationNodes?.find(\n            (node): node is postcss.Declaration => node.prop === prop\n          )\n        ) {\n          continue\n        }\n\n        const animationNode = postcss.decl({\n          prop,\n          value,\n          raws: { semicolon: true, between: \": \", before: \"\\n  \" },\n        })\n        themeNode.append(animationNode)\n      }\n    },\n  }\n}\n\nfunction getQuoteType(root: Root): \"single\" | \"double\" {\n  const firstNode = root.nodes[0]\n  const raw = firstNode.toString()\n\n  if (raw.includes(\"'\")) {\n    return \"single\"\n  }\n  return \"double\"\n}\n\nexport function isLocalHSLValue(value: string) {\n  if (\n    value.startsWith(\"hsl\") ||\n    value.startsWith(\"rgb\") ||\n    value.startsWith(\"#\") ||\n    value.startsWith(\"oklch\")\n  ) {\n    return false\n  }\n\n  const chunks = value.split(\" \")\n\n  return (\n    chunks.length === 3 &&\n    chunks.slice(1, 3).every((chunk) => chunk.includes(\"%\"))\n  )\n}\n\nexport function isColorValue(value: string) {\n  return (\n    value.startsWith(\"hsl\") ||\n    value.startsWith(\"rgb\") ||\n    value.startsWith(\"#\") ||\n    value.startsWith(\"oklch\") ||\n    value.includes(\"--color-\")\n  )\n}\n","import { RegistryItem } from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { getPackageInfo } from \"@/src/utils/get-package-info\"\nimport { getPackageManager } from \"@/src/utils/get-package-manager\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { execa } from \"execa\"\nimport prompts from \"prompts\"\n\nexport async function updateDependencies(\n  dependencies: RegistryItem[\"dependencies\"],\n  devDependencies: RegistryItem[\"devDependencies\"],\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  dependencies = Array.from(new Set(dependencies))\n  devDependencies = Array.from(new Set(devDependencies))\n\n  if (!dependencies?.length && !devDependencies?.length) {\n    return\n  }\n\n  options = {\n    silent: false,\n    ...options,\n  }\n\n  const dependenciesSpinner = spinner(`Installing dependencies.`, {\n    silent: options.silent,\n  })?.start()\n  const packageManager = await getUpdateDependenciesPackageManager(config)\n\n  // Offer to use --force or --legacy-peer-deps if using React 19 with npm.\n  let flag = \"\"\n  if (shouldPromptForNpmFlag(config) && packageManager === \"npm\") {\n    if (options.silent) {\n      flag = \"force\"\n    } else {\n      dependenciesSpinner.stopAndPersist()\n      logger.warn(\n        \"\\nIt looks like you are using React 19. \\nSome packages may fail to install due to peer dependency issues in npm (see https://ui.shadcn.com/react-19).\\n\"\n      )\n      const confirmation = await prompts([\n        {\n          type: \"select\",\n          name: \"flag\",\n          message: \"How would you like to proceed?\",\n          choices: [\n            { title: \"Use --force\", value: \"force\" },\n            { title: \"Use --legacy-peer-deps\", value: \"legacy-peer-deps\" },\n          ],\n        },\n      ])\n\n      if (confirmation) {\n        flag = confirmation.flag\n      }\n    }\n  }\n\n  dependenciesSpinner?.start()\n\n  await installWithPackageManager(\n    packageManager,\n    dependencies,\n    devDependencies,\n    config.resolvedPaths.cwd,\n    flag\n  )\n\n  dependenciesSpinner?.succeed()\n}\n\nfunction shouldPromptForNpmFlag(config: Config) {\n  const packageInfo = getPackageInfo(config.resolvedPaths.cwd, false)\n\n  if (!packageInfo?.dependencies?.react) {\n    return false\n  }\n\n  const hasReact19 = /^(?:\\^|~)?19(?:\\.\\d+)*(?:-.*)?$/.test(\n    packageInfo.dependencies.react\n  )\n  const hasReactDayPicker8 =\n    packageInfo.dependencies[\"react-day-picker\"]?.startsWith(\"8\")\n\n  return hasReact19 && hasReactDayPicker8\n}\n\nasync function getUpdateDependenciesPackageManager(config: Config) {\n  const expoVersion = getPackageInfo(config.resolvedPaths.cwd, false)\n    ?.dependencies?.expo\n\n  if (expoVersion) {\n    // Ensures package versions match the React Native version.\n    // https://docs.expo.dev/more/expo-cli/#install\n    return \"expo\"\n  }\n\n  return getPackageManager(config.resolvedPaths.cwd)\n}\n\nasync function installWithPackageManager(\n  packageManager: Awaited<\n    ReturnType<typeof getUpdateDependenciesPackageManager>\n  >,\n  dependencies: string[],\n  devDependencies: string[],\n  cwd: string,\n  flag?: string\n) {\n  if (packageManager === \"npm\") {\n    return installWithNpm(dependencies, devDependencies, cwd, flag)\n  }\n\n  if (packageManager === \"deno\") {\n    return installWithDeno(dependencies, devDependencies, cwd)\n  }\n\n  if (packageManager === \"expo\") {\n    return installWithExpo(dependencies, devDependencies, cwd)\n  }\n\n  if (dependencies?.length) {\n    await execa(packageManager, [\"add\", ...dependencies], {\n      cwd,\n    })\n  }\n\n  if (devDependencies?.length) {\n    await execa(packageManager, [\"add\", \"-D\", ...devDependencies], { cwd })\n  }\n}\n\nasync function installWithNpm(\n  dependencies: string[],\n  devDependencies: string[],\n  cwd: string,\n  flag?: string\n) {\n  if (dependencies.length) {\n    await execa(\n      \"npm\",\n      [\"install\", ...(flag ? [`--${flag}`] : []), ...dependencies],\n      { cwd }\n    )\n  }\n\n  if (devDependencies.length) {\n    await execa(\n      \"npm\",\n      [\"install\", ...(flag ? [`--${flag}`] : []), \"-D\", ...devDependencies],\n      { cwd }\n    )\n  }\n}\n\nasync function installWithDeno(\n  dependencies: string[],\n  devDependencies: string[],\n  cwd: string\n) {\n  if (dependencies?.length) {\n    await execa(\"deno\", [\"add\", ...dependencies.map((dep) => `npm:${dep}`)], {\n      cwd,\n    })\n  }\n\n  if (devDependencies?.length) {\n    await execa(\n      \"deno\",\n      [\"add\", \"-D\", ...devDependencies.map((dep) => `npm:${dep}`)],\n      { cwd }\n    )\n  }\n}\n\nasync function installWithExpo(\n  dependencies: string[],\n  devDependencies: string[],\n  cwd: string\n) {\n  if (dependencies.length) {\n    await execa(\"npx\", [\"expo\", \"install\", ...dependencies], { cwd })\n  }\n\n  if (devDependencies.length) {\n    await execa(\"npx\", [\"expo\", \"install\", \"-- -D\", ...devDependencies], {\n      cwd,\n    })\n  }\n}\n","import { existsSync, promises as fs } from \"fs\"\nimport path from \"path\"\nimport { registryItemEnvVarsSchema } from \"@/src/schema\"\nimport {\n  findExistingEnvFile,\n  getNewEnvKeys,\n  mergeEnvContent,\n} from \"@/src/utils/env-helpers\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { z } from \"zod\"\n\nexport async function updateEnvVars(\n  envVars: z.infer<typeof registryItemEnvVarsSchema> | undefined,\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  if (!envVars || Object.keys(envVars).length === 0) {\n    return {\n      envVarsAdded: [],\n      envFileUpdated: null,\n      envFileCreated: null,\n    }\n  }\n\n  options = {\n    silent: false,\n    ...options,\n  }\n\n  const envSpinner = spinner(`Adding environment variables.`, {\n    silent: options.silent,\n  })?.start()\n\n  const projectRoot = config.resolvedPaths.cwd\n\n  // Find existing env file or use .env.local as default.\n  let envFilePath = path.join(projectRoot, \".env.local\")\n  const existingEnvFile = findExistingEnvFile(projectRoot)\n\n  if (existingEnvFile) {\n    envFilePath = existingEnvFile\n  }\n\n  const envFileExists = existsSync(envFilePath)\n  const envFileName = path.basename(envFilePath)\n\n  // Convert envVars object to env file format\n  const newEnvContent = Object.entries(envVars)\n    .map(([key, value]) => `${key}=${value}`)\n    .join(\"\\n\")\n\n  let envVarsAdded: string[] = []\n  let envFileUpdated: string | null = null\n  let envFileCreated: string | null = null\n\n  if (envFileExists) {\n    const existingContent = await fs.readFile(envFilePath, \"utf-8\")\n    const mergedContent = mergeEnvContent(existingContent, newEnvContent)\n    envVarsAdded = getNewEnvKeys(existingContent, newEnvContent)\n\n    if (envVarsAdded.length > 0) {\n      await fs.writeFile(envFilePath, mergedContent, \"utf-8\")\n      envFileUpdated = path.relative(projectRoot, envFilePath)\n\n      envSpinner?.succeed(\n        `Added the following variables to ${highlighter.info(envFileName)}:`\n      )\n\n      if (!options.silent) {\n        for (const key of envVarsAdded) {\n          logger.log(`  ${highlighter.success(\"+\")} ${key}`)\n        }\n      }\n    } else {\n      envSpinner?.stop()\n    }\n  } else {\n    // Create new env file\n    await fs.writeFile(envFilePath, newEnvContent + \"\\n\", \"utf-8\")\n    envFileCreated = path.relative(projectRoot, envFilePath)\n    envVarsAdded = Object.keys(envVars)\n\n    envSpinner?.succeed(\n      `Added the following variables to ${highlighter.info(envFileName)}:`\n    )\n\n    if (!options.silent) {\n      for (const key of envVarsAdded) {\n        logger.log(`  ${highlighter.success(\"+\")} ${key}`)\n      }\n    }\n  }\n\n  if (!options.silent && envVarsAdded.length > 0) {\n    logger.break()\n  }\n\n  return {\n    envVarsAdded,\n    envFileUpdated,\n    envFileCreated,\n  }\n}\n","import { existsSync, promises as fs } from \"fs\"\nimport path from \"path\"\nimport { RegistryFontItem, registryResolvedItemsTreeSchema } from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { ProjectInfo, getProjectInfo } from \"@/src/utils/get-project-info\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport {\n  CallExpression,\n  Project,\n  ScriptKind,\n  SyntaxKind,\n  VariableDeclarationKind,\n} from \"ts-morph\"\nimport z from \"zod\"\n\nexport async function massageTreeForFonts(\n  tree: z.infer<typeof registryResolvedItemsTreeSchema>,\n  config: Config\n) {\n  if (!tree.fonts?.length) {\n    return tree\n  }\n\n  const projectInfo = await getProjectInfo(config.resolvedPaths.cwd)\n\n  if (!projectInfo) {\n    return tree\n  }\n\n  const [fontSans] = tree.fonts\n  tree.cssVars ??= {}\n  tree.cssVars.theme ??= {}\n\n  if (\n    projectInfo.framework.name === \"next-app\" ||\n    projectInfo.framework.name === \"next-pages\"\n  ) {\n    tree.cssVars.theme[\n      fontSans.font.variable\n    ] = `var(${fontSans.font.variable})`\n    return tree\n  }\n\n  // Other frameworks will use fontsource for now.\n  const fontName = fontSans.name.replace(\"font-\", \"\")\n  const fontSourceDependency = `@fontsource-variable/${fontName}`\n  tree.dependencies ??= []\n  tree.dependencies.push(fontSourceDependency)\n  tree.css ??= {}\n  tree.css[`@import \"${fontSourceDependency}\"`] = {}\n  tree.css[\"@layer base\"] ??= {}\n  tree.css[\"@layer base\"].html = {\n    \"@apply font-sans\": {},\n  }\n  tree.css[\"@layer base\"].body = {\n    \"@apply font-sans bg-background text-foreground\": {},\n  }\n  tree.cssVars.theme[fontSans.font.variable] = fontSans.font.family\n\n  //   tree.docs += `## Fonts\n  // The ${highlighter.info(\n  //     fontSans.title ?? \"\"\n  //   )} font has been added to your project.\n\n  // If you have existing font-family declarations, you may need to update them to use the new ${highlighter.info(\n  //     fontSans.font.variable\n  //   )} variable.\n\n  // @theme inline {\n  //   ${fontSans.font.variable}: ${fontSans.font.family};\n  // }\n  //   `\n\n  return tree\n}\n\nexport async function updateFonts(\n  fonts: RegistryFontItem[] | undefined,\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  if (!fonts?.length) {\n    return\n  }\n\n  const projectInfo = await getProjectInfo(config.resolvedPaths.cwd)\n\n  if (!projectInfo) {\n    return\n  }\n\n  if (\n    projectInfo.framework.name !== \"next-app\" &&\n    projectInfo.framework.name !== \"next-pages\"\n  ) {\n    return\n  }\n\n  const fontsSpinner = spinner(\"Updating fonts.\", {\n    silent: options.silent,\n  })?.start()\n\n  try {\n    await updateNextFonts(fonts, config, projectInfo)\n    fontsSpinner?.succeed(\"Updating fonts.\")\n  } catch (error) {\n    fontsSpinner?.fail(`Failed to update fonts.`)\n    throw error\n  }\n}\n\nasync function updateNextFonts(\n  fonts: RegistryFontItem[],\n  config: Config,\n  projectInfo: ProjectInfo\n) {\n  // Find layout file.\n  const layoutPath = await findLayoutFile(config, projectInfo)\n\n  if (!layoutPath) {\n    return\n  }\n\n  const layoutContent = await fs.readFile(layoutPath, \"utf-8\")\n  const updatedContent = await transformLayoutFonts(\n    layoutContent,\n    fonts,\n    config\n  )\n\n  if (updatedContent !== layoutContent) {\n    await fs.writeFile(layoutPath, updatedContent, \"utf-8\")\n  }\n}\n\nasync function findLayoutFile(\n  config: Config,\n  projectInfo: ProjectInfo\n): Promise<string | null> {\n  const cwd = config.resolvedPaths.cwd\n  const isSrcDir = projectInfo.isSrcDir\n  const isTsx = projectInfo.isTsx\n  const ext = isTsx ? \"tsx\" : \"jsx\"\n\n  const possiblePaths = isSrcDir\n    ? [`src/app/layout.${ext}`, `app/layout.${ext}`]\n    : [`app/layout.${ext}`]\n\n  for (const relativePath of possiblePaths) {\n    const fullPath = path.join(cwd, relativePath)\n    if (existsSync(fullPath)) {\n      return fullPath\n    }\n  }\n\n  return null\n}\n\nexport async function transformLayoutFonts(\n  input: string,\n  fonts: RegistryFontItem[],\n  _config: Config\n) {\n  const project = new Project({\n    compilerOptions: {},\n  })\n\n  const sourceFile = project.createSourceFile(\"layout.tsx\", input, {\n    scriptKind: ScriptKind.TSX,\n  })\n\n  // Only process Google fonts for now.\n  const googleFonts = fonts.filter((f) => f.font.provider === \"google\")\n\n  // Track which font variables we're adding.\n  const fontVariableNames: string[] = []\n\n  // Process Google fonts.\n  for (const font of googleFonts) {\n    const importName = font.font.import\n    if (!importName) {\n      continue\n    }\n\n    // Check if import already exists.\n    const existingImport = sourceFile.getImportDeclaration((decl) => {\n      const moduleSpecifier = decl.getModuleSpecifierValue()\n      return moduleSpecifier === \"next/font/google\"\n    })\n\n    if (existingImport) {\n      // Check if this specific font is already imported.\n      const namedImports = existingImport.getNamedImports()\n      const hasImport = namedImports.some((imp) => imp.getName() === importName)\n\n      if (hasImport) {\n        // Font is already imported - skip this font entirely.\n        // Assume the user already has it set up correctly.\n        continue\n      }\n\n      existingImport.addNamedImport(importName)\n    } else {\n      // Add new import.\n      sourceFile.addImportDeclaration({\n        moduleSpecifier: \"next/font/google\",\n        namedImports: [importName],\n      })\n    }\n\n    // Generate a variable name from the import (e.g., \"Inter\" -> \"inter\", \"Geist_Mono\" -> \"geistMono\").\n    const varName = toCamelCase(importName)\n\n    // Build font options.\n    const fontOptions = buildFontOptions(font)\n\n    // Check if variable declaration already exists with same variable CSS property.\n    const existingVarDecl = findFontVariableDeclaration(\n      sourceFile,\n      font.font.variable\n    )\n\n    if (existingVarDecl) {\n      // Replace the initializer of the existing declaration.\n      existingVarDecl.setInitializer(`${importName}(${fontOptions})`)\n      // Update the variable name if different.\n      if (existingVarDecl.getName() !== varName) {\n        existingVarDecl.rename(varName)\n      }\n    } else {\n      // Find the last import or existing font declaration to insert after.\n      const insertPosition = findInsertPosition(sourceFile)\n\n      // Add variable declaration.\n      const statement = sourceFile.insertVariableStatement(insertPosition, {\n        declarationKind: VariableDeclarationKind.Const,\n        declarations: [\n          {\n            name: varName,\n            initializer: `${importName}(${fontOptions})`,\n          },\n        ],\n      })\n\n      // Add a blank line after the declaration.\n      statement.appendWhitespace(\"\\n\")\n    }\n\n    fontVariableNames.push(varName)\n  }\n\n  // Update html className to include font variables.\n  if (fontVariableNames.length > 0) {\n    updateHtmlClassName(sourceFile, fontVariableNames)\n  }\n\n  return sourceFile.getFullText()\n}\n\nfunction buildFontOptions(font: RegistryFontItem) {\n  const options: Record<string, unknown> = {}\n\n  if (font.font.subsets?.length) {\n    options.subsets = font.font.subsets\n  }\n\n  if (font.font.weight?.length) {\n    options.weight = font.font.weight\n  }\n\n  options.variable = font.font.variable\n\n  return JSON.stringify(options)\n    .replace(/\"([^\"]+)\":/g, \"$1:\") // Remove quotes from keys.\n    .replace(/\"/g, \"'\") // Use single quotes for strings.\n}\n\nfunction toCamelCase(str: string) {\n  // Convert \"Geist_Mono\" -> \"geistMono\", \"Inter\" -> \"inter\".\n  return str\n    .split(\"_\")\n    .map((part, index) =>\n      index === 0\n        ? part.toLowerCase()\n        : part.charAt(0).toUpperCase() + part.slice(1).toLowerCase()\n    )\n    .join(\"\")\n}\n\nfunction findFontVariableDeclaration(\n  sourceFile: ReturnType<Project[\"createSourceFile\"]>,\n  variable: string\n) {\n  // Find variable declarations that call a font function with matching variable.\n  const variableStatements = sourceFile.getVariableStatements()\n\n  for (const statement of variableStatements) {\n    for (const declaration of statement.getDeclarations()) {\n      const initializer = declaration.getInitializer()\n      if (!initializer) continue\n\n      // Check if it's a call expression.\n      if (initializer.getKind() !== SyntaxKind.CallExpression) continue\n\n      const callExpr = initializer as CallExpression\n\n      // Get the arguments.\n      const args = callExpr.getArguments()\n      if (args.length === 0) continue\n\n      // Check if any argument contains our variable.\n      const argText = args[0].getText()\n      if (argText.includes(`variable:`) && argText.includes(variable)) {\n        return declaration\n      }\n    }\n  }\n\n  return null\n}\n\nfunction findInsertPosition(\n  sourceFile: ReturnType<Project[\"createSourceFile\"]>\n) {\n  const imports = sourceFile.getImportDeclarations()\n  if (imports.length > 0) {\n    const lastImport = imports[imports.length - 1]\n    return lastImport.getChildIndex() + 1\n  }\n  return 0\n}\n\nfunction updateHtmlClassName(\n  sourceFile: ReturnType<Project[\"createSourceFile\"]>,\n  fontVariableNames: string[]\n) {\n  // Find the <html> JSX element.\n  const jsxElements = sourceFile.getDescendantsOfKind(\n    SyntaxKind.JsxOpeningElement\n  )\n\n  for (const element of jsxElements) {\n    const tagName = element.getTagNameNode().getText()\n    if (tagName !== \"html\") continue\n\n    const classNameAttr = element.getAttribute(\"className\")\n    if (!classNameAttr) {\n      // Add className attribute with font variables.\n      const variableExpressions = fontVariableNames\n        .map((name) => `${name}.variable`)\n        .join(\", \")\n\n      if (fontVariableNames.length === 1) {\n        element.addAttribute({\n          name: \"className\",\n          initializer: `{${variableExpressions}}`,\n        })\n      } else {\n        // Need to use cn() for multiple fonts.\n        ensureCnImport(sourceFile)\n        element.addAttribute({\n          name: \"className\",\n          initializer: `{cn(${variableExpressions})}`,\n        })\n      }\n      return\n    }\n\n    // Handle existing className.\n    if (classNameAttr.getKind() !== SyntaxKind.JsxAttribute) {\n      return\n    }\n\n    const jsxAttr = classNameAttr.asKindOrThrow(SyntaxKind.JsxAttribute)\n    const initializer = jsxAttr.getInitializer()\n\n    if (!initializer) return\n\n    // Build the new variable expressions.\n    const newVarExpressions = fontVariableNames.map(\n      (name) => `${name}.variable`\n    )\n\n    if (initializer.getKind() === SyntaxKind.StringLiteral) {\n      // className=\"some-class\" -> className={cn(\"some-class\", font.variable)}\n      const currentValue = initializer.getText().slice(1, -1) // Remove quotes.\n      ensureCnImport(sourceFile)\n      jsxAttr.setInitializer(\n        `{cn(\"${currentValue}\", ${newVarExpressions.join(\", \")})}`\n      )\n    } else if (initializer.getKind() === SyntaxKind.JsxExpression) {\n      // className={...} - need to analyze the expression.\n      const jsxExpr = initializer.asKindOrThrow(SyntaxKind.JsxExpression)\n      const expr = jsxExpr.getExpression()\n      if (!expr) return\n\n      const exprText = expr.getText()\n\n      // Check if it's already using cn().\n      if (exprText.startsWith(\"cn(\")) {\n        // Check if cn() already has exactly our font variables.\n        const hasAllFontVars = newVarExpressions.every((v) =>\n          exprText.includes(v)\n        )\n        if (hasAllFontVars) {\n          // Already has our font variables, skip.\n          continue\n        }\n\n        // Remove existing font variables and add new ones.\n        const cleanedExpr = removeFontVariablesFromCn(exprText)\n        const newExpr = insertFontVariablesIntoCn(\n          cleanedExpr,\n          newVarExpressions\n        )\n        jsxExpr.replaceWithText(`{${newExpr}}`)\n      } else if (/^\\w+\\.variable$/.test(exprText)) {\n        // Single font variable like {inter.variable}.\n        // Check if it's already one of our font variables.\n        if (newVarExpressions.includes(exprText)) {\n          // Already using our font variable, skip.\n          continue\n        }\n        // Replace with our font variables.\n        if (newVarExpressions.length === 1) {\n          jsxExpr.replaceWithText(`{${newVarExpressions[0]}}`)\n        } else {\n          ensureCnImport(sourceFile)\n          jsxExpr.replaceWithText(`{cn(${newVarExpressions.join(\", \")})}`)\n        }\n      } else if (exprText.startsWith(\"`\") && exprText.endsWith(\"`\")) {\n        // Template literal - parse and convert to cn() arguments.\n        const cnArgs = parseTemplateLiteralToCnArgs(exprText)\n        ensureCnImport(sourceFile)\n        jsxExpr.replaceWithText(\n          `{cn(${[...cnArgs, ...newVarExpressions].join(\", \")})}`\n        )\n      } else {\n        // Some other expression (variable, etc.), wrap with cn().\n        ensureCnImport(sourceFile)\n        jsxExpr.replaceWithText(\n          `{cn(${exprText}, ${newVarExpressions.join(\", \")})}`\n        )\n      }\n    }\n  }\n}\n\nfunction ensureCnImport(sourceFile: ReturnType<Project[\"createSourceFile\"]>) {\n  const existingImport = sourceFile.getImportDeclaration((decl) => {\n    const namedImports = decl.getNamedImports()\n    return namedImports.some((imp) => imp.getName() === \"cn\")\n  })\n\n  if (!existingImport) {\n    // Try to find the lib/utils import pattern.\n    const utilsImport = sourceFile.getImportDeclaration((decl) => {\n      const moduleSpecifier = decl.getModuleSpecifierValue()\n      return moduleSpecifier.includes(\"/lib/utils\")\n    })\n\n    if (utilsImport) {\n      const namedImports = utilsImport.getNamedImports()\n      if (!namedImports.some((imp) => imp.getName() === \"cn\")) {\n        utilsImport.addNamedImport(\"cn\")\n      }\n    } else {\n      // Add a new import for cn.\n      sourceFile.addImportDeclaration({\n        moduleSpecifier: \"@/lib/utils\",\n        namedImports: [\"cn\"],\n      })\n    }\n  }\n}\n\nfunction parseTemplateLiteralToCnArgs(templateLiteral: string) {\n  // Parse template literal like `${geistSans.variable} ${geistMono.variable} antialiased`\n  // into cn() arguments with static strings first, then variables:\n  // [\"antialiased\", geistSans.variable, geistMono.variable]\n  const staticArgs: string[] = []\n  const variableArgs: string[] = []\n\n  // Remove the backticks.\n  const content = templateLiteral.slice(1, -1)\n\n  // Split by ${...} expressions and static parts.\n  const parts = content.split(/(\\$\\{[^}]+\\})/)\n\n  for (const part of parts) {\n    if (!part) continue\n\n    if (part.startsWith(\"${\") && part.endsWith(\"}\")) {\n      // Expression like ${geistSans.variable}.\n      const expr = part.slice(2, -1).trim()\n      if (expr) {\n        variableArgs.push(expr)\n      }\n    } else {\n      // Static string - split by whitespace and add non-empty parts as quoted strings.\n      const staticParts = part.trim().split(/\\s+/).filter(Boolean)\n      for (const staticPart of staticParts) {\n        staticArgs.push(`\"${staticPart}\"`)\n      }\n    }\n  }\n\n  // Return static strings first, then variables.\n  return [...staticArgs, ...variableArgs]\n}\n\nfunction removeFontVariablesFromCn(cnExpr: string) {\n  // Remove patterns like \"fontName.variable\" from cn() call.\n  // This is a simple regex-based approach.\n  return cnExpr.replace(/,?\\s*\\w+\\.variable/g, \"\").replace(/cn\\(\\s*,/, \"cn(\")\n}\n\nfunction insertFontVariablesIntoCn(cnExpr: string, fontVars: string[]) {\n  // Insert font variables at the end of cn() arguments.\n  const varsStr = fontVars.join(\", \")\n  return cnExpr.replace(/\\)$/, `, ${varsStr})`)\n}\n","import path from \"path\"\nimport { getRegistryItems } from \"@/src/registry/api\"\nimport { configWithDefaults } from \"@/src/registry/config\"\nimport { resolveRegistryTree } from \"@/src/registry/resolver\"\nimport {\n  configSchema,\n  registryItemFileSchema,\n  registryItemSchema,\n  workspaceConfigSchema,\n} from \"@/src/schema\"\nimport {\n  findCommonRoot,\n  findPackageRoot,\n  getWorkspaceConfig,\n  type Config,\n} from \"@/src/utils/get-config\"\nimport { getProjectTailwindVersionFromConfig } from \"@/src/utils/get-project-info\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { isSafeTarget } from \"@/src/utils/is-safe-target\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { updateCss } from \"@/src/utils/updaters/update-css\"\nimport { updateCssVars } from \"@/src/utils/updaters/update-css-vars\"\nimport { updateDependencies } from \"@/src/utils/updaters/update-dependencies\"\nimport { updateEnvVars } from \"@/src/utils/updaters/update-env-vars\"\nimport { updateFiles } from \"@/src/utils/updaters/update-files\"\nimport {\n  massageTreeForFonts,\n  updateFonts,\n} from \"@/src/utils/updaters/update-fonts\"\nimport { updateTailwindConfig } from \"@/src/utils/updaters/update-tailwind-config\"\nimport { z } from \"zod\"\n\nexport async function addComponents(\n  components: string[],\n  config: Config,\n  options: {\n    overwrite?: boolean\n    silent?: boolean\n    isNewProject?: boolean\n    registryHeaders?: Record<string, Record<string, string>>\n    path?: string\n  }\n) {\n  options = {\n    overwrite: false,\n    silent: false,\n    isNewProject: false,\n    ...options,\n  }\n\n  const workspaceConfig = await getWorkspaceConfig(config)\n  if (\n    workspaceConfig &&\n    workspaceConfig.ui &&\n    workspaceConfig.ui.resolvedPaths.cwd !== config.resolvedPaths.cwd\n  ) {\n    return await addWorkspaceComponents(components, config, workspaceConfig, {\n      ...options,\n      isRemote:\n        components?.length === 1 && !!components[0].match(/\\/chat\\/b\\//),\n    })\n  }\n\n  return await addProjectComponents(components, config, options)\n}\n\nasync function addProjectComponents(\n  components: string[],\n  config: z.infer<typeof configSchema>,\n  options: {\n    overwrite?: boolean\n    silent?: boolean\n    isNewProject?: boolean\n    path?: string\n  }\n) {\n  if (!components.length) {\n    return\n  }\n\n  const registrySpinner = spinner(`Checking registry.`, {\n    silent: options.silent,\n  })?.start()\n  let tree = await resolveRegistryTree(components, configWithDefaults(config))\n\n  if (!tree) {\n    registrySpinner?.fail()\n    return handleError(new Error(\"Failed to fetch components from registry.\"))\n  }\n\n  try {\n    validateFilesTarget(tree.files ?? [], config.resolvedPaths.cwd)\n  } catch (error) {\n    registrySpinner?.fail()\n    return handleError(error)\n  }\n\n  registrySpinner?.succeed()\n\n  const tailwindVersion = await getProjectTailwindVersionFromConfig(config)\n\n  tree = await massageTreeForFonts(tree, config)\n\n  await updateTailwindConfig(tree.tailwind?.config, config, {\n    silent: options.silent,\n    tailwindVersion,\n  })\n\n  const overwriteCssVars = await shouldOverwriteCssVars(components, config)\n  await updateCssVars(tree.cssVars, config, {\n    cleanupDefaultNextStyles: options.isNewProject,\n    silent: options.silent,\n    tailwindVersion,\n    tailwindConfig: tree.tailwind?.config,\n    overwriteCssVars,\n  })\n\n  // Add CSS updater\n  await updateCss(tree.css, config, {\n    silent: options.silent,\n  })\n\n  await updateEnvVars(tree.envVars, config, {\n    silent: options.silent,\n  })\n\n  await updateDependencies(tree.dependencies, tree.devDependencies, config, {\n    silent: options.silent,\n  })\n\n  await updateFonts(tree.fonts, config, {\n    silent: options.silent,\n  })\n\n  await updateFiles(tree.files, config, {\n    overwrite: options.overwrite,\n    silent: options.silent,\n    path: options.path,\n  })\n\n  if (tree.docs) {\n    logger.info(tree.docs)\n  }\n}\n\nasync function addWorkspaceComponents(\n  components: string[],\n  config: z.infer<typeof configSchema>,\n  workspaceConfig: z.infer<typeof workspaceConfigSchema>,\n  options: {\n    overwrite?: boolean\n    silent?: boolean\n    isNewProject?: boolean\n    isRemote?: boolean\n    path?: string\n  }\n) {\n  if (!components.length) {\n    return\n  }\n\n  const registrySpinner = spinner(`Checking registry.`, {\n    silent: options.silent,\n  })?.start()\n  const tree = await resolveRegistryTree(components, configWithDefaults(config))\n\n  if (!tree) {\n    registrySpinner?.fail()\n    return handleError(new Error(\"Failed to fetch components from registry.\"))\n  }\n\n  try {\n    validateFilesTarget(tree.files ?? [], config.resolvedPaths.cwd)\n  } catch (error) {\n    registrySpinner?.fail()\n    return handleError(error)\n  }\n\n  registrySpinner?.succeed()\n\n  const filesCreated: string[] = []\n  const filesUpdated: string[] = []\n  const filesSkipped: string[] = []\n\n  const rootSpinner = spinner(`Installing components.`)?.start()\n\n  // Process global updates (tailwind, css vars, dependencies) first for the main target.\n  // These should typically go to the UI package in a workspace.\n  const mainTargetConfig = workspaceConfig.ui\n  const tailwindVersion = await getProjectTailwindVersionFromConfig(\n    mainTargetConfig\n  )\n  const workspaceRoot = findCommonRoot(\n    config.resolvedPaths.cwd,\n    mainTargetConfig.resolvedPaths.ui\n  )\n\n  // 1. Update tailwind config.\n  if (tree.tailwind?.config) {\n    await updateTailwindConfig(tree.tailwind?.config, mainTargetConfig, {\n      silent: true,\n      tailwindVersion,\n    })\n    filesUpdated.push(\n      path.relative(\n        workspaceRoot,\n        mainTargetConfig.resolvedPaths.tailwindConfig\n      )\n    )\n  }\n\n  // 2. Update css vars.\n  if (tree.cssVars) {\n    const overwriteCssVars = await shouldOverwriteCssVars(components, config)\n    await updateCssVars(tree.cssVars, mainTargetConfig, {\n      silent: true,\n      tailwindVersion,\n      tailwindConfig: tree.tailwind?.config,\n      overwriteCssVars,\n    })\n    filesUpdated.push(\n      path.relative(workspaceRoot, mainTargetConfig.resolvedPaths.tailwindCss)\n    )\n  }\n\n  // 3. Update CSS\n  if (tree.css) {\n    await updateCss(tree.css, mainTargetConfig, {\n      silent: true,\n    })\n    filesUpdated.push(\n      path.relative(workspaceRoot, mainTargetConfig.resolvedPaths.tailwindCss)\n    )\n  }\n\n  // 4. Update environment variables\n  if (tree.envVars) {\n    await updateEnvVars(tree.envVars, mainTargetConfig, {\n      silent: true,\n    })\n  }\n\n  // 5. Update dependencies.\n  await updateDependencies(\n    tree.dependencies,\n    tree.devDependencies,\n    mainTargetConfig,\n    {\n      silent: true,\n    }\n  )\n\n  // 6. Update fonts.\n  await updateFonts(tree.fonts, mainTargetConfig, {\n    silent: true,\n  })\n\n  // 7. Group files by their type to determine target config and update files.\n  const filesByType = new Map<string, typeof tree.files>()\n\n  for (const file of tree.files ?? []) {\n    const type = file.type || \"registry:ui\"\n    if (!filesByType.has(type)) {\n      filesByType.set(type, [])\n    }\n    filesByType.get(type)!.push(file)\n  }\n\n  // Process each type of component with its appropriate target config.\n  for (const type of Array.from(filesByType.keys())) {\n    const typeFiles = filesByType.get(type)!\n\n    let targetConfig = type === \"registry:ui\" ? workspaceConfig.ui : config\n\n    const typeWorkspaceRoot = findCommonRoot(\n      config.resolvedPaths.cwd,\n      targetConfig.resolvedPaths.ui || targetConfig.resolvedPaths.cwd\n    )\n    const packageRoot =\n      (await findPackageRoot(\n        typeWorkspaceRoot,\n        targetConfig.resolvedPaths.cwd\n      )) ?? targetConfig.resolvedPaths.cwd\n\n    // Update files for this type.\n    const files = await updateFiles(typeFiles, targetConfig, {\n      overwrite: options.overwrite,\n      silent: true,\n      rootSpinner,\n      isRemote: options.isRemote,\n      isWorkspace: true,\n      path: options.path,\n    })\n\n    filesCreated.push(\n      ...files.filesCreated.map((file) =>\n        path.relative(typeWorkspaceRoot, path.join(packageRoot, file))\n      )\n    )\n    filesUpdated.push(\n      ...files.filesUpdated.map((file) =>\n        path.relative(typeWorkspaceRoot, path.join(packageRoot, file))\n      )\n    )\n    filesSkipped.push(\n      ...files.filesSkipped.map((file) =>\n        path.relative(typeWorkspaceRoot, path.join(packageRoot, file))\n      )\n    )\n  }\n\n  rootSpinner?.succeed()\n\n  // Sort files.\n  filesCreated.sort()\n  filesUpdated.sort()\n  filesSkipped.sort()\n\n  const hasUpdatedFiles = filesCreated.length || filesUpdated.length\n  if (!hasUpdatedFiles && !filesSkipped.length) {\n    spinner(`No files updated.`, {\n      silent: options.silent,\n    })?.info()\n  }\n\n  if (filesCreated.length) {\n    spinner(\n      `Created ${filesCreated.length} ${\n        filesCreated.length === 1 ? \"file\" : \"files\"\n      }:`,\n      {\n        silent: options.silent,\n      }\n    )?.succeed()\n    for (const file of filesCreated) {\n      logger.log(`  - ${file}`)\n    }\n  }\n\n  if (filesUpdated.length) {\n    spinner(\n      `Updated ${filesUpdated.length} ${\n        filesUpdated.length === 1 ? \"file\" : \"files\"\n      }:`,\n      {\n        silent: options.silent,\n      }\n    )?.info()\n    for (const file of filesUpdated) {\n      logger.log(`  - ${file}`)\n    }\n  }\n\n  if (filesSkipped.length) {\n    spinner(\n      `Skipped ${filesSkipped.length} ${\n        filesUpdated.length === 1 ? \"file\" : \"files\"\n      }: (use --overwrite to overwrite)`,\n      {\n        silent: options.silent,\n      }\n    )?.info()\n    for (const file of filesSkipped) {\n      logger.log(`  - ${file}`)\n    }\n  }\n\n  if (tree.docs) {\n    logger.info(tree.docs)\n  }\n}\n\nasync function shouldOverwriteCssVars(\n  components: z.infer<typeof registryItemSchema>[\"name\"][],\n  config: z.infer<typeof configSchema>\n) {\n  const result = await getRegistryItems(components, { config })\n  const payload = z.array(registryItemSchema).parse(result)\n\n  return payload.some(\n    (component) =>\n      component.type === \"registry:theme\" ||\n      component.type === \"registry:style\" ||\n      component.type === \"registry:font\" ||\n      component.type === \"registry:base\"\n  )\n}\n\nfunction validateFilesTarget(\n  files: z.infer<typeof registryItemFileSchema>[],\n  cwd: string\n) {\n  for (const file of files) {\n    if (!file?.target) {\n      continue\n    }\n\n    if (!isSafeTarget(file.target, cwd)) {\n      throw new Error(\n        `We found an unsafe file path \"${file.target} in the registry item. Installation aborted.`\n      )\n    }\n  }\n}\n","import os from \"os\"\nimport path from \"path\"\nimport { initOptionsSchema } from \"@/src/commands/init\"\nimport { fetchRegistry } from \"@/src/registry/fetcher\"\nimport { getPackageManager } from \"@/src/utils/get-package-manager\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { execa } from \"execa\"\nimport fs from \"fs-extra\"\nimport prompts from \"prompts\"\nimport { z } from \"zod\"\n\nconst GITHUB_TEMPLATE_URL =\n  \"https://codeload.github.com/shadcn-ui/ui/tar.gz/main\"\n\nexport const TEMPLATES = {\n  next: \"next\",\n  \"next-monorepo\": \"next-monorepo\",\n  vite: \"vite\",\n  start: \"start\",\n} as const\n\nexport async function createProject(\n  options: Pick<\n    z.infer<typeof initOptionsSchema>,\n    \"cwd\" | \"name\" | \"force\" | \"srcDir\" | \"components\" | \"template\"\n  >\n) {\n  options = {\n    srcDir: false,\n    ...options,\n  }\n\n  let template: keyof typeof TEMPLATES =\n    options.template && TEMPLATES[options.template as keyof typeof TEMPLATES]\n      ? (options.template as keyof typeof TEMPLATES)\n      : \"next\"\n  let projectName: string =\n    options.name ??\n    (template === TEMPLATES.next ||\n    template === TEMPLATES.vite ||\n    template === TEMPLATES.start\n      ? \"my-app\"\n      : \"my-monorepo\")\n  let nextVersion = \"latest\"\n\n  const isRemoteComponent =\n    options.components?.length === 1 &&\n    !!options.components[0].match(/\\/chat\\/b\\//)\n\n  if (options.components && isRemoteComponent) {\n    try {\n      const [result] = await fetchRegistry(options.components)\n      const { meta } = z\n        .object({\n          meta: z.object({\n            nextVersion: z.string(),\n          }),\n        })\n        .parse(result)\n      nextVersion = meta.nextVersion\n\n      // Force template to next for remote components.\n      template = TEMPLATES.next\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    }\n  }\n\n  if (!options.force) {\n    const { type, name } = await prompts([\n      {\n        type: options.template || isRemoteComponent ? null : \"select\",\n        name: \"type\",\n        message: `The path ${highlighter.info(\n          options.cwd\n        )} does not contain a package.json file.\\n  Would you like to start a new project?`,\n        choices: [\n          { title: \"Next.js\", value: \"next\" },\n          { title: \"Next.js (Monorepo)\", value: \"next-monorepo\" },\n          { title: \"Vite\", value: \"vite\" },\n          { title: \"TanStack Start\", value: \"start\" },\n        ],\n        initial: 0,\n      },\n      {\n        type: options.name ? null : \"text\",\n        name: \"name\",\n        message: \"What is your project named?\",\n        initial: projectName,\n        format: (value: string) => value.trim(),\n        validate: (value: string) =>\n          value.length > 128\n            ? `Name should be less than 128 characters.`\n            : true,\n      },\n    ])\n\n    template = type ?? template\n    projectName = name ?? projectName\n  }\n\n  const packageManager = await getPackageManager(options.cwd, {\n    withFallback: true,\n  })\n\n  const projectPath = `${options.cwd}/${projectName}`\n\n  // Check if path is writable.\n  try {\n    await fs.access(options.cwd, fs.constants.W_OK)\n  } catch (error) {\n    logger.break()\n    logger.error(`The path ${highlighter.info(options.cwd)} is not writable.`)\n    logger.error(\n      `It is likely you do not have write permissions for this folder or the path ${highlighter.info(\n        options.cwd\n      )} does not exist.`\n    )\n    logger.break()\n    process.exit(1)\n  }\n\n  if (fs.existsSync(path.resolve(options.cwd, projectName, \"package.json\"))) {\n    logger.break()\n    logger.error(\n      `A project with the name ${highlighter.info(projectName)} already exists.`\n    )\n    logger.error(`Please choose a different name and try again.`)\n    logger.break()\n    process.exit(1)\n  }\n\n  if (template === TEMPLATES.next) {\n    await createNextProject(projectPath, {\n      version: nextVersion,\n      cwd: options.cwd,\n      packageManager,\n      srcDir: !!options.srcDir,\n    })\n  }\n\n  if (template === TEMPLATES[\"next-monorepo\"]) {\n    await createMonorepoProject(projectPath, {\n      packageManager,\n    })\n  }\n\n  if (template === TEMPLATES.vite) {\n    await createViteProject(projectPath, {\n      packageManager,\n    })\n  }\n\n  if (template === TEMPLATES.start) {\n    await createStartProject(projectPath, {\n      packageManager,\n    })\n  }\n\n  return {\n    projectPath,\n    projectName,\n    template,\n  }\n}\n\nasync function createNextProject(\n  projectPath: string,\n  options: {\n    version: string\n    cwd: string\n    packageManager: string\n    srcDir: boolean\n  }\n) {\n  const createSpinner = spinner(\n    `Creating a new Next.js project. This may take a few minutes.`\n  ).start()\n\n  // Note: pnpm fails here. Fallback to npx with --use-PACKAGE-MANAGER.\n  const args = [\n    \"--tailwind\",\n    \"--eslint\",\n    \"--typescript\",\n    \"--app\",\n    options.srcDir ? \"--src-dir\" : \"--no-src-dir\",\n    \"--no-import-alias\",\n    `--use-${options.packageManager}`,\n  ]\n\n  if (\n    options.version.startsWith(\"15\") ||\n    options.version.startsWith(\"latest\") ||\n    options.version.startsWith(\"canary\")\n  ) {\n    args.push(\"--turbopack\")\n  }\n\n  if (\n    options.version.startsWith(\"latest\") ||\n    options.version.startsWith(\"canary\")\n  ) {\n    args.push(\"--no-react-compiler\")\n  }\n\n  try {\n    await execa(\n      \"npx\",\n      [`create-next-app@${options.version}`, projectPath, \"--silent\", ...args],\n      {\n        cwd: options.cwd,\n      }\n    )\n  } catch (error) {\n    logger.break()\n    logger.error(\n      `Something went wrong creating a new Next.js project. Please try again.`\n    )\n    process.exit(1)\n  }\n\n  createSpinner?.succeed(\"Creating a new Next.js project.\")\n}\n\nasync function createMonorepoProject(\n  projectPath: string,\n  options: {\n    packageManager: string\n  }\n) {\n  const createSpinner = spinner(\n    `Creating a new Next.js monorepo. This may take a few minutes.`\n  ).start()\n\n  try {\n    // Get the template.\n    const templatePath = path.join(os.tmpdir(), `shadcn-template-${Date.now()}`)\n    await fs.ensureDir(templatePath)\n    const response = await fetch(GITHUB_TEMPLATE_URL)\n    if (!response.ok) {\n      throw new Error(`Failed to download template: ${response.statusText}`)\n    }\n\n    // Write the tar file\n    const tarPath = path.resolve(templatePath, \"template.tar.gz\")\n    await fs.writeFile(tarPath, Buffer.from(await response.arrayBuffer()))\n    await execa(\"tar\", [\n      \"-xzf\",\n      tarPath,\n      \"-C\",\n      templatePath,\n      \"--strip-components=2\",\n      \"ui-main/templates/monorepo-next\",\n    ])\n    const extractedPath = path.resolve(templatePath, \"monorepo-next\")\n    await fs.move(extractedPath, projectPath)\n    await fs.remove(templatePath)\n\n    // Run install.\n    await execa(options.packageManager, [\"install\"], {\n      cwd: projectPath,\n    })\n    // await execa(\"cd\", [cwd])\n\n    // Write project name to the package.json\n    const packageJsonPath = path.join(projectPath, \"package.json\")\n    if (fs.existsSync(packageJsonPath)) {\n      const packageJsonContent = await fs.readFile(packageJsonPath, \"utf8\")\n      const packageJson = JSON.parse(packageJsonContent)\n      packageJson.name = projectPath.split(\"/\").pop()\n      await fs.writeFile(packageJsonPath, JSON.stringify(packageJson, null, 2))\n    }\n\n    // Try git init.\n    const cwd = process.cwd()\n    await execa(\"git\", [\"--version\"], { cwd: projectPath })\n    await execa(\"git\", [\"init\"], { cwd: projectPath })\n    await execa(\"git\", [\"add\", \"-A\"], { cwd: projectPath })\n    await execa(\"git\", [\"commit\", \"-m\", \"Initial commit\"], {\n      cwd: projectPath,\n    })\n\n    createSpinner?.succeed(\"Creating a new Next.js monorepo.\")\n  } catch (error) {\n    createSpinner?.fail(\"Something went wrong creating a new Next.js monorepo.\")\n    handleError(error)\n  }\n}\n\nasync function createViteProject(\n  projectPath: string,\n  options: {\n    packageManager: string\n  }\n) {\n  const createSpinner = spinner(\n    `Creating a new Vite project. This may take a few minutes.`\n  ).start()\n\n  try {\n    // Get the template.\n    const templatePath = path.join(os.tmpdir(), `shadcn-template-${Date.now()}`)\n    await fs.ensureDir(templatePath)\n    const response = await fetch(GITHUB_TEMPLATE_URL)\n    if (!response.ok) {\n      throw new Error(`Failed to download template: ${response.statusText}`)\n    }\n\n    // Write the tar file.\n    const tarPath = path.resolve(templatePath, \"template.tar.gz\")\n    await fs.writeFile(tarPath, Buffer.from(await response.arrayBuffer()))\n    await execa(\"tar\", [\n      \"-xzf\",\n      tarPath,\n      \"-C\",\n      templatePath,\n      \"--strip-components=2\",\n      \"ui-main/templates/vite-app\",\n    ])\n    const extractedPath = path.resolve(templatePath, \"vite-app\")\n    await fs.move(extractedPath, projectPath)\n    await fs.remove(templatePath)\n\n    // Remove pnpm-lock.yaml if using a different package manager.\n    if (options.packageManager !== \"pnpm\") {\n      const lockFilePath = path.join(projectPath, \"pnpm-lock.yaml\")\n      if (fs.existsSync(lockFilePath)) {\n        await fs.remove(lockFilePath)\n      }\n    }\n\n    // Run install.\n    await execa(options.packageManager, [\"install\"], {\n      cwd: projectPath,\n    })\n\n    // Write project name to the package.json.\n    const packageJsonPath = path.join(projectPath, \"package.json\")\n    if (fs.existsSync(packageJsonPath)) {\n      const packageJsonContent = await fs.readFile(packageJsonPath, \"utf8\")\n      const packageJson = JSON.parse(packageJsonContent)\n      packageJson.name = projectPath.split(\"/\").pop()\n      await fs.writeFile(packageJsonPath, JSON.stringify(packageJson, null, 2))\n    }\n\n    // Try git init.\n    await execa(\"git\", [\"--version\"], { cwd: projectPath })\n    await execa(\"git\", [\"init\"], { cwd: projectPath })\n    await execa(\"git\", [\"add\", \"-A\"], { cwd: projectPath })\n    await execa(\"git\", [\"commit\", \"-m\", \"Initial commit\"], {\n      cwd: projectPath,\n    })\n\n    createSpinner?.succeed(\"Creating a new Vite project.\")\n  } catch (error) {\n    createSpinner?.fail(\"Something went wrong creating a new Vite project.\")\n    handleError(error)\n  }\n}\n\nasync function createStartProject(\n  projectPath: string,\n  options: {\n    packageManager: string\n  }\n) {\n  const createSpinner = spinner(\n    `Creating a new TanStack Start project. This may take a few minutes.`\n  ).start()\n\n  try {\n    // Get the template.\n    const templatePath = path.join(os.tmpdir(), `shadcn-template-${Date.now()}`)\n    await fs.ensureDir(templatePath)\n    const response = await fetch(GITHUB_TEMPLATE_URL)\n    if (!response.ok) {\n      throw new Error(`Failed to download template: ${response.statusText}`)\n    }\n\n    // Write the tar file.\n    const tarPath = path.resolve(templatePath, \"template.tar.gz\")\n    await fs.writeFile(tarPath, Buffer.from(await response.arrayBuffer()))\n    await execa(\"tar\", [\n      \"-xzf\",\n      tarPath,\n      \"-C\",\n      templatePath,\n      \"--strip-components=2\",\n      \"ui-main/templates/start-app\",\n    ])\n    const extractedPath = path.resolve(templatePath, \"start-app\")\n    await fs.move(extractedPath, projectPath)\n    await fs.remove(templatePath)\n\n    // Remove pnpm-lock.yaml if using a different package manager.\n    if (options.packageManager !== \"pnpm\") {\n      const lockFilePath = path.join(projectPath, \"pnpm-lock.yaml\")\n      if (fs.existsSync(lockFilePath)) {\n        await fs.remove(lockFilePath)\n      }\n    }\n\n    // Run install.\n    await execa(options.packageManager, [\"install\"], {\n      cwd: projectPath,\n    })\n\n    // Write project name to the package.json.\n    const packageJsonPath = path.join(projectPath, \"package.json\")\n    if (fs.existsSync(packageJsonPath)) {\n      const packageJsonContent = await fs.readFile(packageJsonPath, \"utf8\")\n      const packageJson = JSON.parse(packageJsonContent)\n      packageJson.name = projectPath.split(\"/\").pop()\n      await fs.writeFile(packageJsonPath, JSON.stringify(packageJson, null, 2))\n    }\n\n    // Try git init.\n    await execa(\"git\", [\"--version\"], { cwd: projectPath })\n    await execa(\"git\", [\"init\"], { cwd: projectPath })\n    await execa(\"git\", [\"add\", \"-A\"], { cwd: projectPath })\n    await execa(\"git\", [\"commit\", \"-m\", \"Initial commit\"], {\n      cwd: projectPath,\n    })\n\n    createSpinner?.succeed(\"Creating a new TanStack Start project.\")\n  } catch (error) {\n    createSpinner?.fail(\n      \"Something went wrong creating a new TanStack Start project.\"\n    )\n    handleError(error)\n  }\n}\n","import { existsSync } from \"fs\"\nimport { join } from \"path\"\nimport { logger } from \"@/src/utils/logger\"\n\nexport async function loadEnvFiles(cwd: string = process.cwd()): Promise<void> {\n  try {\n    const { config } = await import(\"@dotenvx/dotenvx\")\n    const envFiles = [\n      \".env.local\",\n      \".env.development.local\",\n      \".env.development\",\n      \".env\",\n    ]\n\n    for (const envFile of envFiles) {\n      const envPath = join(cwd, envFile)\n      if (existsSync(envPath)) {\n        config({\n          path: envPath,\n          overload: false,\n          quiet: true,\n        })\n      }\n    }\n  } catch (error) {\n    logger.warn(\"Failed to load env files:\", error)\n  }\n}\n","import fsExtra from \"fs-extra\"\n\nexport const FILE_BACKUP_SUFFIX = \".bak\"\n\nexport function createFileBackup(filePath: string): string | null {\n  if (!fsExtra.existsSync(filePath)) {\n    return null\n  }\n\n  const backupPath = `${filePath}${FILE_BACKUP_SUFFIX}`\n  try {\n    fsExtra.renameSync(filePath, backupPath)\n    return backupPath\n  } catch (error) {\n    console.error(`Failed to create backup of ${filePath}: ${error}`)\n    return null\n  }\n}\n\nexport function restoreFileBackup(filePath: string): boolean {\n  const backupPath = `${filePath}${FILE_BACKUP_SUFFIX}`\n\n  if (!fsExtra.existsSync(backupPath)) {\n    return false\n  }\n\n  try {\n    fsExtra.renameSync(backupPath, filePath)\n    return true\n  } catch (error) {\n    console.error(\n      `Warning: Could not restore backup file ${backupPath}: ${error}`\n    )\n    return false\n  }\n}\n\nexport function deleteFileBackup(filePath: string): boolean {\n  const backupPath = `${filePath}${FILE_BACKUP_SUFFIX}`\n\n  if (!fsExtra.existsSync(backupPath)) {\n    return false\n  }\n\n  try {\n    fsExtra.unlinkSync(backupPath)\n    return true\n  } catch (error) {\n    // Best effort - don't log as this is just cleanup\n    return false\n  }\n}\n","import { BUILTIN_REGISTRIES } from \"@/src/registry/constants\"\nimport { RegistryNotConfiguredError } from \"@/src/registry/errors\"\nimport { parseRegistryAndItemFromString } from \"@/src/registry/parser\"\nimport { fetchRegistryItems } from \"@/src/registry/resolver\"\nimport { Config } from \"@/src/utils/get-config\"\n\n// Recursively discovers all registry namespaces including nested ones.\nexport async function resolveRegistryNamespaces(\n  components: string[],\n  config: Config\n) {\n  const discoveredNamespaces = new Set<string>()\n  const visitedItems = new Set<string>()\n  const itemsToProcess = [...components]\n\n  while (itemsToProcess.length > 0) {\n    const currentItem = itemsToProcess.shift()!\n\n    if (visitedItems.has(currentItem)) {\n      continue\n    }\n    visitedItems.add(currentItem)\n\n    const { registry } = parseRegistryAndItemFromString(currentItem)\n    if (registry && !BUILTIN_REGISTRIES[registry]) {\n      discoveredNamespaces.add(registry)\n    }\n\n    try {\n      const [item] = await fetchRegistryItems([currentItem], config, {\n        useCache: true,\n      })\n\n      if (item?.registryDependencies) {\n        for (const dep of item.registryDependencies) {\n          const { registry: depRegistry } = parseRegistryAndItemFromString(dep)\n          if (depRegistry && !BUILTIN_REGISTRIES[depRegistry]) {\n            discoveredNamespaces.add(depRegistry)\n          }\n\n          if (!visitedItems.has(dep)) {\n            itemsToProcess.push(dep)\n          }\n        }\n      }\n    } catch (error) {\n      // If a registry is not configured, we still track it.\n      if (error instanceof RegistryNotConfiguredError) {\n        const { registry } = parseRegistryAndItemFromString(currentItem)\n        if (registry && !BUILTIN_REGISTRIES[registry]) {\n          discoveredNamespaces.add(registry)\n        }\n        continue\n      }\n\n      // For other errors (network, parsing, etc.), we skip this item\n      // but continue processing others to discover as many namespaces as possible.\n      continue\n    }\n  }\n\n  return Array.from(discoveredNamespaces)\n}\n","import path from \"path\"\nimport { getRegistriesIndex } from \"@/src/registry/api\"\nimport { BUILTIN_REGISTRIES } from \"@/src/registry/constants\"\nimport { resolveRegistryNamespaces } from \"@/src/registry/namespaces\"\nimport { rawConfigSchema } from \"@/src/registry/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport fs from \"fs-extra\"\n\nexport async function ensureRegistriesInConfig(\n  components: string[],\n  config: Config,\n  options: {\n    silent?: boolean\n    writeFile?: boolean\n  } = {}\n) {\n  options = {\n    silent: false,\n    writeFile: true,\n    ...options,\n  }\n\n  // Use resolveRegistryNamespaces to discover all namespaces including dependencies.\n  const registryNames = await resolveRegistryNamespaces(components, config)\n\n  const missingRegistries = registryNames.filter(\n    (registry) =>\n      !config.registries?.[registry] &&\n      !Object.keys(BUILTIN_REGISTRIES).includes(registry)\n  )\n\n  if (missingRegistries.length === 0) {\n    return {\n      config,\n      newRegistries: [],\n    }\n  }\n\n  // We'll fail silently if we can't fetch the registry index.\n  // The error handling by caller will guide user to add the missing registries.\n  const registryIndex = await getRegistriesIndex({\n    useCache: process.env.NODE_ENV !== \"development\",\n  })\n\n  if (!registryIndex) {\n    return {\n      config,\n      newRegistries: [],\n    }\n  }\n\n  const foundRegistries: Record<string, string> = {}\n  for (const registry of missingRegistries) {\n    if (registryIndex[registry]) {\n      foundRegistries[registry] = registryIndex[registry]\n    }\n  }\n\n  if (Object.keys(foundRegistries).length === 0) {\n    return {\n      config,\n      newRegistries: [],\n    }\n  }\n\n  // Filter out built-in registries from existing config before merging\n  const existingRegistries = Object.fromEntries(\n    Object.entries(config.registries || {}).filter(\n      ([key]) => !Object.keys(BUILTIN_REGISTRIES).includes(key)\n    )\n  )\n\n  const newConfigWithRegistries = {\n    ...config,\n    registries: {\n      ...existingRegistries,\n      ...foundRegistries,\n    },\n  }\n\n  if (options.writeFile) {\n    const { resolvedPaths, ...configWithoutResolvedPaths } =\n      newConfigWithRegistries\n    const configSpinner = spinner(\"Updating components.json.\", {\n      silent: options.silent,\n    }).start()\n    const updatedConfig = rawConfigSchema.parse(configWithoutResolvedPaths)\n    await fs.writeFile(\n      path.resolve(config.resolvedPaths.cwd, \"components.json\"),\n      JSON.stringify(updatedConfig, null, 2) + \"\\n\",\n      \"utf-8\"\n    )\n    configSpinner.succeed()\n  }\n\n  return {\n    config: newConfigWithRegistries,\n    newRegistries: Object.keys(foundRegistries),\n  }\n}\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport {\n  _createSourceFile,\n  _getQuoteChar,\n} from \"@/src/utils/updaters/update-tailwind-config\"\nimport { ObjectLiteralExpression, SyntaxKind } from \"ts-morph\"\n\nexport async function updateTailwindContent(\n  content: string[],\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  if (!content) {\n    return\n  }\n\n  options = {\n    silent: false,\n    ...options,\n  }\n\n  const tailwindFileRelativePath = path.relative(\n    config.resolvedPaths.cwd,\n    config.resolvedPaths.tailwindConfig\n  )\n  const tailwindSpinner = spinner(\n    `Updating ${highlighter.info(tailwindFileRelativePath)}`,\n    {\n      silent: options.silent,\n    }\n  ).start()\n  const raw = await fs.readFile(config.resolvedPaths.tailwindConfig, \"utf8\")\n  const output = await transformTailwindContent(raw, content, config)\n  await fs.writeFile(config.resolvedPaths.tailwindConfig, output, \"utf8\")\n  tailwindSpinner?.succeed()\n}\n\nexport async function transformTailwindContent(\n  input: string,\n  content: string[],\n  config: Config\n) {\n  const sourceFile = await _createSourceFile(input, config)\n  // Find the object with content property.\n  // This is faster than traversing the default export.\n  // TODO: maybe we do need to traverse the default export?\n  const configObject = sourceFile\n    .getDescendantsOfKind(SyntaxKind.ObjectLiteralExpression)\n    .find((node) =>\n      node\n        .getProperties()\n        .some(\n          (property) =>\n            property.isKind(SyntaxKind.PropertyAssignment) &&\n            property.getName() === \"content\"\n        )\n    )\n\n  // We couldn't find the config object, so we return the input as is.\n  if (!configObject) {\n    return input\n  }\n\n  addTailwindConfigContent(configObject, content)\n\n  return sourceFile.getFullText()\n}\n\nasync function addTailwindConfigContent(\n  configObject: ObjectLiteralExpression,\n  content: string[]\n) {\n  const quoteChar = _getQuoteChar(configObject)\n\n  const existingProperty = configObject.getProperty(\"content\")\n\n  if (!existingProperty) {\n    const newProperty = {\n      name: \"content\",\n      initializer: `[${quoteChar}${content.join(\n        `${quoteChar}, ${quoteChar}`\n      )}${quoteChar}]`,\n    }\n    configObject.addPropertyAssignment(newProperty)\n\n    return configObject\n  }\n\n  if (existingProperty.isKind(SyntaxKind.PropertyAssignment)) {\n    const initializer = existingProperty.getInitializer()\n\n    // If property is an array, append.\n    if (initializer?.isKind(SyntaxKind.ArrayLiteralExpression)) {\n      for (const contentItem of content) {\n        const newValue = `${quoteChar}${contentItem}${quoteChar}`\n\n        // Check if the array already contains the value.\n        if (\n          initializer\n            .getElements()\n            .map((element) => element.getText())\n            .includes(newValue)\n        ) {\n          continue\n        }\n\n        initializer.addElement(newValue)\n      }\n    }\n\n    return configObject\n  }\n\n  return configObject\n}\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport { preFlightInit } from \"@/src/preflights/preflight-init\"\nimport {\n  getRegistryBaseColors,\n  getRegistryItems,\n  getRegistryStyles,\n} from \"@/src/registry/api\"\nimport { buildUrlAndHeadersForRegistryItem } from \"@/src/registry/builder\"\nimport { configWithDefaults } from \"@/src/registry/config\"\nimport { BASE_COLORS, BUILTIN_REGISTRIES } from \"@/src/registry/constants\"\nimport { clearRegistryContext } from \"@/src/registry/context\"\nimport { rawConfigSchema } from \"@/src/schema\"\nimport { addComponents } from \"@/src/utils/add-components\"\nimport { TEMPLATES, createProject } from \"@/src/utils/create-project\"\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport {\n  FILE_BACKUP_SUFFIX,\n  createFileBackup,\n  deleteFileBackup,\n  restoreFileBackup,\n} from \"@/src/utils/file-helper\"\nimport {\n  DEFAULT_COMPONENTS,\n  DEFAULT_TAILWIND_CONFIG,\n  DEFAULT_TAILWIND_CSS,\n  DEFAULT_UTILS,\n  createConfig,\n  getConfig,\n  resolveConfigPaths,\n  type Config,\n} from \"@/src/utils/get-config\"\nimport {\n  getProjectConfig,\n  getProjectInfo,\n  getProjectTailwindVersionFromConfig,\n} from \"@/src/utils/get-project-info\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { ensureRegistriesInConfig } from \"@/src/utils/registries\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { updateTailwindContent } from \"@/src/utils/updaters/update-tailwind-content\"\nimport { Command } from \"commander\"\nimport deepmerge from \"deepmerge\"\nimport fsExtra from \"fs-extra\"\nimport prompts from \"prompts\"\nimport { z } from \"zod\"\n\nprocess.on(\"exit\", (code) => {\n  const filePath = path.resolve(process.cwd(), \"components.json\")\n\n  // Delete backup if successful.\n  if (code === 0) {\n    return deleteFileBackup(filePath)\n  }\n\n  // Restore backup if error.\n  return restoreFileBackup(filePath)\n})\n\nexport const initOptionsSchema = z.object({\n  cwd: z.string(),\n  name: z.string().optional(),\n  components: z.array(z.string()).optional(),\n  yes: z.boolean(),\n  defaults: z.boolean(),\n  force: z.boolean(),\n  silent: z.boolean(),\n  isNewProject: z.boolean(),\n  srcDir: z.boolean().optional(),\n  cssVariables: z.boolean(),\n  rtl: z.boolean().optional(),\n  template: z\n    .string()\n    .optional()\n    .refine(\n      (val) => {\n        if (val) {\n          return TEMPLATES[val as keyof typeof TEMPLATES]\n        }\n        return true\n      },\n      {\n        message:\n          \"Invalid template. Please use 'next', 'vite', 'start' or 'next-monorepo'.\",\n      }\n    ),\n  baseColor: z\n    .string()\n    .optional()\n    .refine(\n      (val) => {\n        if (val) {\n          return BASE_COLORS.find((color) => color.name === val)\n        }\n\n        return true\n      },\n      {\n        message: `Invalid base color. Please use '${BASE_COLORS.map(\n          (color) => color.name\n        ).join(\"', '\")}'`,\n      }\n    ),\n  installStyleIndex: z.boolean(),\n  // Config from registry:base item to merge into components.json.\n  registryBaseConfig: rawConfigSchema.deepPartial().optional(),\n})\n\nexport const init = new Command()\n  .name(\"init\")\n  .description(\"initialize your project and install dependencies\")\n  .argument(\"[components...]\", \"names, url or local path to component\")\n  .option(\n    \"-t, --template <template>\",\n    \"the template to use. (next, start, vite, next-monorepo)\"\n  )\n  .option(\n    \"-b, --base-color <base-color>\",\n    \"the base color to use. (neutral, gray, zinc, stone, slate)\",\n    undefined\n  )\n  .option(\"-y, --yes\", \"skip confirmation prompt.\", true)\n  .option(\"-d, --defaults,\", \"use default configuration.\", false)\n  .option(\"-f, --force\", \"force overwrite of existing configuration.\", false)\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-s, --silent\", \"mute output.\", false)\n  .option(\n    \"--src-dir\",\n    \"use the src directory when creating a new project.\",\n    false\n  )\n  .option(\n    \"--no-src-dir\",\n    \"do not use the src directory when creating a new project.\"\n  )\n  .option(\"--css-variables\", \"use css variables for theming.\", true)\n  .option(\"--no-css-variables\", \"do not use css variables for theming.\")\n  .option(\"--no-base-style\", \"do not install the base shadcn style.\")\n  .option(\"--rtl\", \"enable RTL support.\", false)\n  .action(async (components, opts) => {\n    try {\n      // Apply defaults when --defaults flag is set.\n      if (opts.defaults) {\n        opts.template = opts.template || \"next\"\n        opts.baseColor = opts.baseColor || \"neutral\"\n      }\n\n      const options = initOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        isNewProject: false,\n        components,\n        ...opts,\n        installStyleIndex: opts.baseStyle,\n      })\n\n      await loadEnvFiles(options.cwd)\n\n      // We need to check if we're initializing with a new style.\n      // This will allow us to determine if we need to install the base style.\n      // And if we should prompt the user for a base color.\n      if (components.length > 0) {\n        // We don't know the full config at this point.\n        // So we'll use a shadow config to fetch the first item.\n        let shadowConfig = configWithDefaults(\n          createConfig({\n            resolvedPaths: {\n              cwd: options.cwd,\n            },\n          })\n        )\n\n        // Check if there's a components.json file.\n        // If so, we'll merge with our shadow config.\n        const componentsJsonPath = path.resolve(options.cwd, \"components.json\")\n        if (fsExtra.existsSync(componentsJsonPath)) {\n          const existingConfig = await fsExtra.readJson(componentsJsonPath)\n          const config = rawConfigSchema.partial().parse(existingConfig)\n          const baseConfig = createConfig({\n            resolvedPaths: {\n              cwd: options.cwd,\n            },\n          })\n          shadowConfig = configWithDefaults({\n            ...config,\n            resolvedPaths: {\n              ...baseConfig.resolvedPaths,\n              cwd: options.cwd,\n            },\n          })\n\n          // Since components.json might not be valid at this point.\n          // Temporarily rename components.json to allow preflight to run.\n          // We'll rename it back after preflight.\n          createFileBackup(componentsJsonPath)\n        }\n\n        // Ensure all registries used in components are configured.\n        const { config: updatedConfig } = await ensureRegistriesInConfig(\n          components,\n          shadowConfig,\n          {\n            silent: true,\n            writeFile: false,\n          }\n        )\n        shadowConfig = updatedConfig\n\n        // This forces a shadowConfig validation early in the process.\n        buildUrlAndHeadersForRegistryItem(components[0], shadowConfig)\n\n        const [item] = await getRegistryItems([components[0]], {\n          config: shadowConfig,\n        })\n\n        // Set options from registry:base.\n        if (item?.type === \"registry:base\") {\n          if (item.config) {\n            // Merge config values into shadowConfig.\n            shadowConfig = configWithDefaults(\n              deepmerge(shadowConfig, item.config)\n            )\n            // Store config to be merged into components.json later.\n            options.registryBaseConfig = item.config\n          }\n          options.installStyleIndex =\n            item.extends === \"none\" ? false : options.installStyleIndex\n        }\n\n        if (item?.type === \"registry:style\") {\n          // Set a default base color so we're not prompted.\n          // The style will extend or override it.\n          options.baseColor = \"neutral\"\n\n          // If the style extends none, we don't want to install the base style.\n          options.installStyleIndex =\n            item.extends === \"none\" ? false : options.installStyleIndex\n        }\n      }\n\n      // If --no-base-style, we don't want to prompt for a base color either.\n      if (!options.installStyleIndex) {\n        options.baseColor = \"neutral\"\n      }\n\n      await runInit(options)\n\n      logger.log(\n        `${highlighter.success(\n          \"Success!\"\n        )} Project initialization completed.\\nYou may now add components.`\n      )\n\n      // We need when running with custom cwd.\n      deleteFileBackup(path.resolve(options.cwd, \"components.json\"))\n      logger.break()\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    } finally {\n      clearRegistryContext()\n    }\n  })\n\nexport async function runInit(\n  options: z.infer<typeof initOptionsSchema> & {\n    skipPreflight?: boolean\n  }\n) {\n  let projectInfo\n  let newProjectTemplate\n  if (!options.skipPreflight) {\n    const preflight = await preFlightInit(options)\n    if (preflight.errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]) {\n      const { projectPath, template } = await createProject(options)\n      if (!projectPath) {\n        process.exit(1)\n      }\n      options.cwd = projectPath\n      options.isNewProject = true\n      newProjectTemplate = template\n      // Re-get project info for the newly created project.\n      projectInfo = await getProjectInfo(options.cwd)\n    } else {\n      projectInfo = preflight.projectInfo\n    }\n  } else {\n    projectInfo = await getProjectInfo(options.cwd)\n  }\n\n  if (newProjectTemplate === \"next-monorepo\") {\n    options.cwd = path.resolve(options.cwd, \"apps/web\")\n    return await getConfig(options.cwd)\n  }\n\n  const projectConfig = await getProjectConfig(options.cwd, projectInfo)\n\n  let config = projectConfig\n    ? await promptForMinimalConfig(projectConfig, options)\n    : await promptForConfig(await getConfig(options.cwd))\n\n  if (!options.yes) {\n    const { proceed } = await prompts({\n      type: \"confirm\",\n      name: \"proceed\",\n      message: `Write configuration to ${highlighter.info(\n        \"components.json\"\n      )}. Proceed?`,\n      initial: true,\n    })\n\n    if (!proceed) {\n      process.exit(0)\n    }\n  }\n\n  // Prepare the list of components to be added.\n  const components = [\n    // \"index\" is the default shadcn style.\n    // Why index? Because when style is true, we read style from components.json and fetch that.\n    // i.e new-york from components.json then fetch /styles/new-york/index.\n    // TODO: Fix this so that we can extend any style i.e --style=new-york.\n    ...(options.installStyleIndex ? [\"index\"] : []),\n    ...(options.components ?? []),\n  ]\n\n  // Ensure registries are configured for the components we're about to add.\n  const fullConfigForRegistry = await resolveConfigPaths(options.cwd, config)\n  const { config: configWithRegistries } = await ensureRegistriesInConfig(\n    components,\n    fullConfigForRegistry,\n    {\n      silent: true,\n    }\n  )\n\n  // Update config with any new registries found.\n  if (configWithRegistries.registries) {\n    config.registries = configWithRegistries.registries\n  }\n\n  const componentSpinner = spinner(`Writing components.json.`).start()\n  const targetPath = path.resolve(options.cwd, \"components.json\")\n  const backupPath = `${targetPath}${FILE_BACKUP_SUFFIX}`\n\n  // Merge and keep registries at the end.\n  const mergeConfig = (base: typeof config, override: object) => {\n    const { registries, ...merged } = deepmerge(base, override)\n    return { ...merged, registries } as typeof config\n  }\n\n  // Merge with backup config if it exists and not using --force.\n  if (!options.force && fsExtra.existsSync(backupPath)) {\n    const existingConfig = await fsExtra.readJson(backupPath)\n    config = mergeConfig(existingConfig, config)\n  }\n\n  // Merge config from registry:base item.\n  if (options.registryBaseConfig) {\n    config = mergeConfig(config, options.registryBaseConfig)\n  }\n\n  // Ensure rtl is set from CLI option (takes priority over registryBaseConfig).\n  if (options.rtl !== undefined) {\n    config.rtl = options.rtl\n  }\n\n  // Make sure to filter out built-in registries.\n  // TODO: fix this in ensureRegistriesInConfig.\n  config.registries = Object.fromEntries(\n    Object.entries(config.registries || {}).filter(\n      ([key]) => !Object.keys(BUILTIN_REGISTRIES).includes(key)\n    )\n  )\n\n  // Write components.json.\n  await fs.writeFile(targetPath, `${JSON.stringify(config, null, 2)}\\n`, \"utf8\")\n  componentSpinner.succeed()\n\n  // Add components.\n  const fullConfig = await resolveConfigPaths(options.cwd, config)\n  await addComponents(components, fullConfig, {\n    // Init will always overwrite files.\n    overwrite: true,\n    silent: options.silent,\n    isNewProject:\n      options.isNewProject || projectInfo?.framework.name === \"next-app\",\n  })\n\n  // If a new project is using src dir, let's update the tailwind content config.\n  // TODO: Handle this per framework.\n  if (options.isNewProject && options.srcDir) {\n    await updateTailwindContent(\n      [\"./src/**/*.{js,ts,jsx,tsx,mdx}\"],\n      fullConfig,\n      {\n        silent: options.silent,\n      }\n    )\n  }\n\n  return fullConfig\n}\n\nasync function promptForConfig(defaultConfig: Config | null = null) {\n  const [styles, baseColors] = await Promise.all([\n    getRegistryStyles(),\n    getRegistryBaseColors(),\n  ])\n\n  logger.info(\"\")\n  const options = await prompts([\n    {\n      type: \"toggle\",\n      name: \"typescript\",\n      message: `Would you like to use ${highlighter.info(\n        \"TypeScript\"\n      )} (recommended)?`,\n      initial: defaultConfig?.tsx ?? true,\n      active: \"yes\",\n      inactive: \"no\",\n    },\n    {\n      type: \"select\",\n      name: \"style\",\n      message: `Which ${highlighter.info(\"style\")} would you like to use?`,\n      choices: styles.map((style) => ({\n        title: style.label,\n        value: style.name,\n      })),\n    },\n    {\n      type: \"select\",\n      name: \"tailwindBaseColor\",\n      message: `Which color would you like to use as the ${highlighter.info(\n        \"base color\"\n      )}?`,\n      choices: baseColors.map((color) => ({\n        title: color.label,\n        value: color.name,\n      })),\n    },\n    {\n      type: \"text\",\n      name: \"tailwindCss\",\n      message: `Where is your ${highlighter.info(\"global CSS\")} file?`,\n      initial: defaultConfig?.tailwind.css ?? DEFAULT_TAILWIND_CSS,\n    },\n    {\n      type: \"toggle\",\n      name: \"tailwindCssVariables\",\n      message: `Would you like to use ${highlighter.info(\n        \"CSS variables\"\n      )} for theming?`,\n      initial: defaultConfig?.tailwind.cssVariables ?? true,\n      active: \"yes\",\n      inactive: \"no\",\n    },\n    {\n      type: \"text\",\n      name: \"tailwindPrefix\",\n      message: `Are you using a custom ${highlighter.info(\n        \"tailwind prefix eg. tw-\"\n      )}? (Leave blank if not)`,\n      initial: \"\",\n    },\n    {\n      type: \"text\",\n      name: \"tailwindConfig\",\n      message: `Where is your ${highlighter.info(\n        \"tailwind.config.js\"\n      )} located?`,\n      initial: defaultConfig?.tailwind.config ?? DEFAULT_TAILWIND_CONFIG,\n    },\n    {\n      type: \"text\",\n      name: \"components\",\n      message: `Configure the import alias for ${highlighter.info(\n        \"components\"\n      )}:`,\n      initial: defaultConfig?.aliases[\"components\"] ?? DEFAULT_COMPONENTS,\n    },\n    {\n      type: \"text\",\n      name: \"utils\",\n      message: `Configure the import alias for ${highlighter.info(\"utils\")}:`,\n      initial: defaultConfig?.aliases[\"utils\"] ?? DEFAULT_UTILS,\n    },\n    {\n      type: \"toggle\",\n      name: \"rsc\",\n      message: `Are you using ${highlighter.info(\"React Server Components\")}?`,\n      initial: defaultConfig?.rsc ?? true,\n      active: \"yes\",\n      inactive: \"no\",\n    },\n  ])\n\n  return rawConfigSchema.parse({\n    $schema: \"https://ui.shadcn.com/schema.json\",\n    style: options.style,\n    tailwind: {\n      config: options.tailwindConfig,\n      css: options.tailwindCss,\n      baseColor: options.tailwindBaseColor,\n      cssVariables: options.tailwindCssVariables,\n      prefix: options.tailwindPrefix,\n    },\n    rsc: options.rsc,\n    tsx: options.typescript,\n    aliases: {\n      utils: options.utils,\n      components: options.components,\n      // TODO: fix this.\n      lib: options.components.replace(/\\/components$/, \"lib\"),\n      hooks: options.components.replace(/\\/components$/, \"hooks\"),\n    },\n  })\n}\n\nasync function promptForMinimalConfig(\n  defaultConfig: Config,\n  opts: z.infer<typeof initOptionsSchema>\n) {\n  let style = defaultConfig.style\n  let baseColor = opts.baseColor\n  let cssVariables = defaultConfig.tailwind.cssVariables\n  let iconLibrary = defaultConfig.iconLibrary ?? \"lucide\"\n\n  if (!opts.defaults) {\n    const [styles, baseColors, tailwindVersion] = await Promise.all([\n      getRegistryStyles(),\n      getRegistryBaseColors(),\n      getProjectTailwindVersionFromConfig(defaultConfig),\n    ])\n\n    const options = await prompts([\n      {\n        // Skip style prompt if using Tailwind v4 or style is already set in config.\n        type: tailwindVersion === \"v4\" || style ? null : \"select\",\n        name: \"style\",\n        message: `Which ${highlighter.info(\"style\")} would you like to use?`,\n        choices: styles.map((style) => ({\n          title:\n            style.name === \"new-york\" ? \"New York (Recommended)\" : style.label,\n          value: style.name,\n        })),\n        initial: 0,\n      },\n      {\n        type: opts.baseColor ? null : \"select\",\n        name: \"tailwindBaseColor\",\n        message: `Which color would you like to use as the ${highlighter.info(\n          \"base color\"\n        )}?`,\n        choices: baseColors.map((color) => ({\n          title: color.label,\n          value: color.name,\n        })),\n      },\n    ])\n\n    style = options.style ?? style ?? \"new-york\"\n    baseColor = options.tailwindBaseColor ?? baseColor\n    cssVariables = opts.cssVariables\n  }\n\n  return rawConfigSchema.parse({\n    $schema: defaultConfig?.$schema,\n    style,\n    tailwind: {\n      ...defaultConfig?.tailwind,\n      baseColor,\n      cssVariables,\n    },\n    rsc: defaultConfig?.rsc,\n    tsx: defaultConfig?.tsx,\n    iconLibrary,\n    rtl: opts.rtl ?? defaultConfig?.rtl ?? false,\n    aliases: defaultConfig?.aliases,\n  })\n}\n","import path from \"path\"\nimport { addOptionsSchema } from \"@/src/commands/add\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { getConfig } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport fs from \"fs-extra\"\nimport { z } from \"zod\"\n\nexport async function preFlightAdd(options: z.infer<typeof addOptionsSchema>) {\n  const errors: Record<string, boolean> = {}\n\n  // Ensure target directory exists.\n  // Check for empty project. We assume if no package.json exists, the project is empty.\n  if (\n    !fs.existsSync(options.cwd) ||\n    !fs.existsSync(path.resolve(options.cwd, \"package.json\"))\n  ) {\n    errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] = true\n    return {\n      errors,\n      config: null,\n    }\n  }\n\n  // Check for existing components.json file.\n  if (!fs.existsSync(path.resolve(options.cwd, \"components.json\"))) {\n    errors[ERRORS.MISSING_CONFIG] = true\n    return {\n      errors,\n      config: null,\n    }\n  }\n\n  try {\n    const config = await getConfig(options.cwd)\n\n    return {\n      errors,\n      config: config!,\n    }\n  } catch (error) {\n    logger.break()\n    logger.error(\n      `An invalid ${highlighter.info(\n        \"components.json\"\n      )} file was found at ${highlighter.info(\n        options.cwd\n      )}.\\nBefore you can add components, you must create a valid ${highlighter.info(\n        \"components.json\"\n      )} file by running the ${highlighter.info(\"init\")} command.`\n    )\n    logger.error(\n      `Learn more at ${highlighter.info(\n        \"https://ui.shadcn.com/docs/components-json\"\n      )}.`\n    )\n    logger.break()\n    process.exit(1)\n  }\n}\n","import fs from \"fs/promises\"\nimport path from \"path\"\nimport { getRegistryItems } from \"@/src/registry/api\"\nimport { Config } from \"@/src/utils/get-config\"\n\nexport async function updateAppIndex(component: string, config: Config) {\n  const indexPath = path.join(config.resolvedPaths.cwd, \"app/page.tsx\")\n\n  if (!(await fs.stat(indexPath)).isFile()) {\n    return\n  }\n\n  const [registryItem] = await getRegistryItems([component], { config })\n  if (\n    !registryItem?.meta?.importSpecifier ||\n    !registryItem?.meta?.moduleSpecifier\n  ) {\n    return\n  }\n\n  // Overwrite the index file with the new import.\n  const content = `import { ${registryItem?.meta?.importSpecifier} } from \"${registryItem.meta.moduleSpecifier}\"\\n\\nexport default function Page() {\\n  return <${registryItem?.meta?.importSpecifier} />\\n}`\n  await fs.writeFile(indexPath, content, \"utf8\")\n}\n","import path from \"path\"\nimport { runInit } from \"@/src/commands/init\"\nimport { preFlightAdd } from \"@/src/preflights/preflight-add\"\nimport { getRegistryItems, getShadcnRegistryIndex } from \"@/src/registry/api\"\nimport { DEPRECATED_COMPONENTS } from \"@/src/registry/constants\"\nimport { clearRegistryContext } from \"@/src/registry/context\"\nimport { registryItemTypeSchema } from \"@/src/registry/schema\"\nimport { isUniversalRegistryItem } from \"@/src/registry/utils\"\nimport { addComponents } from \"@/src/utils/add-components\"\nimport { createProject } from \"@/src/utils/create-project\"\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { createConfig, getConfig } from \"@/src/utils/get-config\"\nimport { getProjectInfo } from \"@/src/utils/get-project-info\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { ensureRegistriesInConfig } from \"@/src/utils/registries\"\nimport { updateAppIndex } from \"@/src/utils/update-app-index\"\nimport { Command } from \"commander\"\nimport prompts from \"prompts\"\nimport { z } from \"zod\"\n\nexport const addOptionsSchema = z.object({\n  components: z.array(z.string()).optional(),\n  yes: z.boolean(),\n  overwrite: z.boolean(),\n  cwd: z.string(),\n  all: z.boolean(),\n  path: z.string().optional(),\n  silent: z.boolean(),\n  srcDir: z.boolean().optional(),\n  cssVariables: z.boolean(),\n})\n\nexport const add = new Command()\n  .name(\"add\")\n  .description(\"add a component to your project\")\n  .argument(\"[components...]\", \"names, url or local path to component\")\n  .option(\"-y, --yes\", \"skip confirmation prompt.\", false)\n  .option(\"-o, --overwrite\", \"overwrite existing files.\", false)\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-a, --all\", \"add all available components\", false)\n  .option(\"-p, --path <path>\", \"the path to add the component to.\")\n  .option(\"-s, --silent\", \"mute output.\", false)\n  .option(\n    \"--src-dir\",\n    \"use the src directory when creating a new project.\",\n    false\n  )\n  .option(\n    \"--no-src-dir\",\n    \"do not use the src directory when creating a new project.\"\n  )\n  .option(\"--css-variables\", \"use css variables for theming.\", true)\n  .option(\"--no-css-variables\", \"do not use css variables for theming.\")\n  .action(async (components, opts) => {\n    try {\n      const options = addOptionsSchema.parse({\n        components,\n        cwd: path.resolve(opts.cwd),\n        ...opts,\n      })\n\n      await loadEnvFiles(options.cwd)\n\n      let initialConfig = await getConfig(options.cwd)\n      if (!initialConfig) {\n        initialConfig = createConfig({\n          style: \"new-york\",\n          resolvedPaths: {\n            cwd: options.cwd,\n          },\n        })\n      }\n\n      let hasNewRegistries = false\n      if (components.length > 0) {\n        const { config: updatedConfig, newRegistries } =\n          await ensureRegistriesInConfig(components, initialConfig, {\n            silent: options.silent,\n            writeFile: false,\n          })\n        initialConfig = updatedConfig\n        hasNewRegistries = newRegistries.length > 0\n      }\n\n      let itemType: z.infer<typeof registryItemTypeSchema> | undefined\n      let shouldInstallStyleIndex = true\n      if (components.length > 0) {\n        const [registryItem] = await getRegistryItems([components[0]], {\n          config: initialConfig,\n        })\n        itemType = registryItem?.type\n        shouldInstallStyleIndex =\n          itemType !== \"registry:theme\" &&\n          itemType !== \"registry:style\" &&\n          itemType !== \"registry:base\"\n\n        if (isUniversalRegistryItem(registryItem)) {\n          await addComponents(components, initialConfig, options)\n          return\n        }\n\n        if (\n          !options.yes &&\n          (itemType === \"registry:style\" || itemType === \"registry:theme\")\n        ) {\n          logger.break()\n          const { confirm } = await prompts({\n            type: \"confirm\",\n            name: \"confirm\",\n            message: highlighter.warn(\n              `You are about to install a new ${itemType.replace(\n                \"registry:\",\n                \"\"\n              )}. \\nExisting CSS variables and components will be overwritten. Continue?`\n            ),\n          })\n          if (!confirm) {\n            logger.break()\n            logger.log(`Installation cancelled.`)\n            logger.break()\n            process.exit(1)\n          }\n        }\n      }\n\n      if (!options.components?.length) {\n        options.components = await promptForRegistryComponents(options)\n      }\n\n      const projectInfo = await getProjectInfo(options.cwd)\n      if (projectInfo?.tailwindVersion === \"v4\") {\n        const deprecatedComponents = DEPRECATED_COMPONENTS.filter((component) =>\n          options.components?.includes(component.name)\n        )\n\n        if (deprecatedComponents?.length) {\n          logger.break()\n          deprecatedComponents.forEach((component) => {\n            logger.warn(highlighter.warn(component.message))\n          })\n          logger.break()\n          process.exit(1)\n        }\n      }\n\n      let { errors, config } = await preFlightAdd(options)\n\n      // No components.json file. Prompt the user to run init.\n      let initHasRun = false\n      if (errors[ERRORS.MISSING_CONFIG]) {\n        const { proceed } = await prompts({\n          type: \"confirm\",\n          name: \"proceed\",\n          message: `You need to create a ${highlighter.info(\n            \"components.json\"\n          )} file to add components. Proceed?`,\n          initial: true,\n        })\n\n        if (!proceed) {\n          logger.break()\n          process.exit(1)\n        }\n\n        config = await runInit({\n          cwd: options.cwd,\n          yes: true,\n          force: true,\n          defaults: false,\n          skipPreflight: false,\n          silent: options.silent && !hasNewRegistries,\n          isNewProject: false,\n          srcDir: options.srcDir,\n          cssVariables: options.cssVariables,\n          installStyleIndex: shouldInstallStyleIndex,\n          baseColor: shouldInstallStyleIndex ? undefined : \"neutral\",\n          components: options.components,\n        })\n        initHasRun = true\n      }\n\n      let shouldUpdateAppIndex = false\n\n      if (errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]) {\n        const { projectPath, template } = await createProject({\n          cwd: options.cwd,\n          force: options.overwrite,\n          srcDir: options.srcDir,\n          components: options.components,\n        })\n        if (!projectPath) {\n          logger.break()\n          process.exit(1)\n        }\n        options.cwd = projectPath\n\n        if (template === \"next-monorepo\") {\n          options.cwd = path.resolve(options.cwd, \"apps/web\")\n          config = await getConfig(options.cwd)\n        } else {\n          config = await runInit({\n            cwd: options.cwd,\n            yes: true,\n            force: true,\n            defaults: false,\n            skipPreflight: true,\n            silent: !hasNewRegistries && options.silent,\n            isNewProject: true,\n            srcDir: options.srcDir,\n            cssVariables: options.cssVariables,\n            installStyleIndex: shouldInstallStyleIndex,\n            baseColor: shouldInstallStyleIndex ? undefined : \"neutral\",\n            components: options.components,\n          })\n          initHasRun = true\n\n          shouldUpdateAppIndex =\n            options.components?.length === 1 &&\n            !!options.components[0].match(/\\/chat\\/b\\//)\n        }\n      }\n\n      if (!config) {\n        throw new Error(\n          `Failed to read config at ${highlighter.info(options.cwd)}.`\n        )\n      }\n\n      const { config: updatedConfig } = await ensureRegistriesInConfig(\n        options.components,\n        config,\n        {\n          silent: options.silent || hasNewRegistries,\n        }\n      )\n      config = updatedConfig\n\n      if (!initHasRun) {\n        await addComponents(options.components, config, options)\n      }\n\n      // If we're adding a single component and it's from the v0 registry,\n      // let's update the app/page.tsx file to import the component.\n      if (shouldUpdateAppIndex) {\n        await updateAppIndex(options.components[0], config)\n      }\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    } finally {\n      clearRegistryContext()\n    }\n  })\n\nasync function promptForRegistryComponents(\n  options: z.infer<typeof addOptionsSchema>\n) {\n  const registryIndex = await getShadcnRegistryIndex()\n  if (!registryIndex) {\n    logger.break()\n    handleError(new Error(\"Failed to fetch registry index.\"))\n    return []\n  }\n\n  if (options.all) {\n    return registryIndex\n      .map((entry) => entry.name)\n      .filter(\n        (component) => !DEPRECATED_COMPONENTS.some((c) => c.name === component)\n      )\n  }\n\n  if (options.components?.length) {\n    return options.components\n  }\n\n  const { components } = await prompts({\n    type: \"multiselect\",\n    name: \"components\",\n    message: \"Which components would you like to add?\",\n    hint: \"Space to select. A to toggle all. Enter to submit.\",\n    instructions: false,\n    choices: registryIndex\n      .filter(\n        (entry) =>\n          entry.type === \"registry:ui\" &&\n          !DEPRECATED_COMPONENTS.some(\n            (component) => component.name === entry.name\n          )\n      )\n      .map((entry) => ({\n        title: entry.name,\n        value: entry.name,\n        selected: options.all ? true : options.components?.includes(entry.name),\n      })),\n  })\n\n  if (!components?.length) {\n    logger.warn(\"No components selected. Exiting.\")\n    logger.info(\"\")\n    process.exit(1)\n  }\n\n  const result = z.array(z.string()).safeParse(components)\n  if (!result.success) {\n    logger.error(\"\")\n    handleError(new Error(\"Something went wrong. Please try again.\"))\n    return []\n  }\n  return result.data\n}\n","import path from \"path\"\nimport { buildOptionsSchema } from \"@/src/commands/build\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport fs from \"fs-extra\"\nimport { z } from \"zod\"\n\nexport async function preFlightBuild(\n  options: z.infer<typeof buildOptionsSchema>\n) {\n  const errors: Record<string, boolean> = {}\n\n  const resolvePaths = {\n    cwd: options.cwd,\n    registryFile: path.resolve(options.cwd, options.registryFile),\n    outputDir: path.resolve(options.cwd, options.outputDir),\n  }\n\n  // Ensure registry file exists.\n  if (!fs.existsSync(resolvePaths.registryFile)) {\n    errors[ERRORS.BUILD_MISSING_REGISTRY_FILE] = true\n  }\n\n  // Create output directory if it doesn't exist.\n  await fs.mkdir(resolvePaths.outputDir, { recursive: true })\n\n  if (Object.keys(errors).length > 0) {\n    if (errors[ERRORS.BUILD_MISSING_REGISTRY_FILE]) {\n      logger.break()\n      logger.error(\n        `The path ${highlighter.info(\n          resolvePaths.registryFile\n        )} does not exist.`\n      )\n    }\n\n    logger.break()\n    process.exit(1)\n  }\n\n  return {\n    errors,\n    resolvePaths,\n  }\n}\n","import * as fs from \"fs/promises\"\nimport * as path from \"path\"\nimport { preFlightBuild } from \"@/src/preflights/preflight-build\"\nimport { registryItemSchema, registrySchema } from \"@/src/schema\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { Command } from \"commander\"\nimport { z } from \"zod\"\n\nexport const buildOptionsSchema = z.object({\n  cwd: z.string(),\n  registryFile: z.string(),\n  outputDir: z.string(),\n})\n\nexport const build = new Command()\n  .name(\"build\")\n  .description(\"build components for a shadcn registry\")\n  .argument(\"[registry]\", \"path to registry.json file\", \"./registry.json\")\n  .option(\n    \"-o, --output <path>\",\n    \"destination directory for json files\",\n    \"./public/r\"\n  )\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async (registry: string, opts) => {\n    try {\n      const options = buildOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        registryFile: registry,\n        outputDir: opts.output,\n      })\n\n      const { resolvePaths } = await preFlightBuild(options)\n      const content = await fs.readFile(resolvePaths.registryFile, \"utf-8\")\n\n      const result = registrySchema.safeParse(JSON.parse(content))\n\n      if (!result.success) {\n        logger.error(\n          `Invalid registry file found at ${highlighter.info(\n            resolvePaths.registryFile\n          )}.`\n        )\n        process.exit(1)\n      }\n\n      const buildSpinner = spinner(\"Building registry...\")\n      for (const registryItem of result.data.items) {\n        buildSpinner.start(`Building ${registryItem.name}...`)\n\n        // Add the schema to the registry item.\n        registryItem[\"$schema\"] =\n          \"https://ui.shadcn.com/schema/registry-item.json\"\n\n        // Loop through each file in the files array.\n        for (const file of registryItem.files ?? []) {\n          file[\"content\"] = await fs.readFile(\n            path.resolve(resolvePaths.cwd, file.path),\n            \"utf-8\"\n          )\n        }\n\n        // Validate the registry item.\n        const result = registryItemSchema.safeParse(registryItem)\n        if (!result.success) {\n          logger.error(\n            `Invalid registry item found for ${highlighter.info(\n              registryItem.name\n            )}.`\n          )\n          continue\n        }\n\n        // Write the registry item to the output directory.\n        await fs.writeFile(\n          path.resolve(resolvePaths.outputDir, `${result.data.name}.json`),\n          JSON.stringify(result.data, null, 2)\n        )\n      }\n\n      // Copy registry.json to the output directory.\n      await fs.copyFile(\n        resolvePaths.registryFile,\n        path.resolve(resolvePaths.outputDir, \"registry.json\")\n      )\n\n      buildSpinner.succeed(\"Building registry.\")\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    }\n  })\n","import path from \"path\"\nimport { getPreset, getPresets, getRegistryItems } from \"@/src/registry/api\"\nimport { configWithDefaults } from \"@/src/registry/config\"\nimport { REGISTRY_URL } from \"@/src/registry/constants\"\nimport { clearRegistryContext } from \"@/src/registry/context\"\nimport { isUrl } from \"@/src/registry/utils\"\nimport { Preset } from \"@/src/schema\"\nimport { addComponents } from \"@/src/utils/add-components\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { ensureRegistriesInConfig } from \"@/src/utils/registries\"\nimport { updateFiles } from \"@/src/utils/updaters/update-files\"\nimport { Command } from \"commander\"\nimport dedent from \"dedent\"\nimport open from \"open\"\nimport prompts from \"prompts\"\nimport validateProjectName from \"validate-npm-package-name\"\n\nimport { initOptionsSchema, runInit } from \"./init\"\n\nconst SHADCN_URL = REGISTRY_URL.replace(/\\/r\\/?$/, \"\")\n\nconst CREATE_TEMPLATES = {\n  next: \"Next.js\",\n  vite: \"Vite\",\n  start: \"TanStack Start\",\n} as const\n\ntype Template = keyof typeof CREATE_TEMPLATES\n\nexport const create = new Command()\n  .name(\"create\")\n  .description(\"create a new project with shadcn/ui\")\n  .argument(\"[name]\", \"the name of your project\")\n  .option(\n    \"-t, --template <template>\",\n    \"the template to use. e.g. next, start or vite\"\n  )\n  .option(\"-p, --preset [name]\", \"use a preset configuration\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\n    \"--src-dir\",\n    \"use the src directory when creating a new project.\",\n    false\n  )\n  .option(\n    \"--no-src-dir\",\n    \"do not use the src directory when creating a new project.\"\n  )\n  .option(\"-y, --yes\", \"skip confirmation prompt.\", true)\n  .option(\"--rtl\", \"enable RTL support.\", false)\n  .action(async (name, opts) => {\n    try {\n      // If no preset provided, open create URL with template and rtl params.\n      const hasNoPreset = !name && !opts.preset\n      if (hasNoPreset) {\n        const searchParams: Record<string, string> = {}\n        if (opts.template) {\n          searchParams.template = opts.template\n        }\n        if (opts.rtl) {\n          searchParams.rtl = \"true\"\n\n          // Recommend base-ui in RTL.\n          searchParams.base = \"base\"\n        }\n        const createUrl = getShadcnCreateUrl(\n          Object.keys(searchParams).length > 0 ? searchParams : undefined\n        )\n        logger.log(\"Build your own shadcn/ui.\")\n        logger.log(\n          `You will be taken to ${highlighter.info(\n            createUrl\n          )} to build your custom design system.`\n        )\n        logger.break()\n\n        const { proceed } = await prompts({\n          type: \"confirm\",\n          name: \"proceed\",\n          message: \"Open in browser?\",\n          initial: true,\n        })\n\n        if (proceed) {\n          await open(createUrl)\n        }\n\n        process.exit(0)\n      }\n\n      // Prompt for project name if not provided.\n      let projectName = name\n      if (!projectName) {\n        const { enteredName } = await prompts({\n          type: \"text\",\n          name: \"enteredName\",\n          message: \"What is your project named?\",\n          initial: opts.template ? `${opts.template}-app` : \"my-app\",\n          format: (value: string) => value.trim(),\n          validate: (name) => {\n            const validation = validateProjectName(\n              path.basename(path.resolve(name))\n            )\n            if (validation.validForNewPackages) {\n              return true\n            }\n            return \"Invalid project name. Name should be lowercase, URL-friendly, and not start with a period or underscore.\"\n          },\n        })\n\n        if (!enteredName) {\n          process.exit(0)\n        }\n\n        projectName = enteredName\n      }\n\n      // Prompt for template if not provided.\n      let template = opts.template\n      if (!template) {\n        const { selectedTemplate } = await prompts({\n          type: \"select\",\n          name: \"selectedTemplate\",\n          message: `Which ${highlighter.info(\n            \"template\"\n          )} would you like to use?`,\n          choices: Object.entries(CREATE_TEMPLATES).map(([key, value]) => ({\n            title: value,\n            value: key,\n          })),\n        })\n\n        if (!selectedTemplate) {\n          process.exit(0)\n        }\n\n        template = selectedTemplate\n      }\n\n      // Handle preset selection.\n      const presetResult = await handlePresetOption(\n        opts.preset ?? true,\n        opts.rtl\n      )\n\n      if (!presetResult) {\n        process.exit(0)\n      }\n\n      // Determine initUrl and baseColor based on preset type.\n      let initUrl: string\n      let baseColor: string\n\n      if (\"_isUrl\" in presetResult) {\n        // User provided a URL directly.\n        const url = new URL(presetResult.url)\n        if (opts.rtl) {\n          url.searchParams.set(\"rtl\", \"true\")\n        }\n        initUrl = url.toString()\n        baseColor = url.searchParams.get(\"baseColor\") ?? \"neutral\"\n      } else {\n        // User selected a preset by name.\n        initUrl = buildInitUrl(presetResult, opts.rtl)\n        baseColor = presetResult.baseColor\n      }\n\n      // Fetch the registry:base item to get its config.\n      let shadowConfig = configWithDefaults({})\n      const { config: updatedConfig } = await ensureRegistriesInConfig(\n        [initUrl],\n        shadowConfig,\n        { silent: true }\n      )\n      shadowConfig = updatedConfig\n\n      const [item] = await getRegistryItems([initUrl], {\n        config: shadowConfig,\n      })\n\n      // Extract config from registry:base item.\n      let registryBaseConfig = undefined\n      if (item?.type === \"registry:base\" && item.config) {\n        registryBaseConfig = item.config\n      }\n\n      const options = initOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        name: projectName,\n        components: [initUrl],\n        yes: opts.yes,\n        defaults: false,\n        force: false,\n        silent: false,\n        isNewProject: true,\n        srcDir: opts.srcDir,\n        cssVariables: true,\n        rtl: opts.rtl,\n        template,\n        baseColor,\n        installStyleIndex: false,\n        registryBaseConfig,\n        skipPreflight: false,\n      })\n\n      const config = await runInit(options)\n\n      // Add component example.\n      if (config) {\n        const components = [\"component-example\"]\n        if (opts.rtl) {\n          components.push(\"direction\")\n        }\n        await addComponents(components, config, {\n          silent: true,\n          overwrite: true,\n        })\n\n        const templateFiles = getTemplateFiles(template as Template)\n        if (templateFiles.length > 0) {\n          await updateFiles(templateFiles, config, {\n            overwrite: true,\n            silent: true,\n          })\n        }\n      }\n\n      logger.log(\n        `${highlighter.success(\n          \"Success!\"\n        )} Project initialization completed.\\nYou may now add components.`\n      )\n      logger.break()\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    } finally {\n      clearRegistryContext()\n    }\n  })\n\nfunction buildInitUrl(preset: Preset, rtl: boolean) {\n  const params = new URLSearchParams({\n    base: preset.base,\n    style: preset.style,\n    baseColor: preset.baseColor,\n    theme: preset.theme,\n    iconLibrary: preset.iconLibrary,\n    font: preset.font,\n    rtl: String(rtl || preset.rtl),\n    menuAccent: preset.menuAccent,\n    menuColor: preset.menuColor,\n    radius: preset.radius,\n  })\n\n  return `${getShadcnInitUrl()}?${params.toString()}`\n}\n\nasync function handlePresetOption(presetArg: string | boolean, rtl: boolean) {\n  // If --preset is used without a name, show interactive list.\n  if (presetArg === true) {\n    const presets = await getPresets()\n\n    const { selectedPreset } = await prompts({\n      type: \"select\",\n      name: \"selectedPreset\",\n      message: `Which ${highlighter.info(\"preset\")} would you like to use?`,\n      choices: [\n        ...presets.map((preset) => ({\n          title: preset.title,\n          description: preset.description,\n          value: preset.name,\n        })),\n        {\n          title: \"Custom\",\n          description: \"Build your own on https://ui.shadcn.com\",\n          value: \"custom\",\n        },\n      ],\n    })\n\n    if (!selectedPreset) {\n      return null\n    }\n\n    if (selectedPreset === \"custom\") {\n      const url = getShadcnCreateUrl(rtl ? { rtl: \"true\" } : undefined)\n      logger.info(`\\nOpening ${highlighter.info(url)} in your browser...\\n`)\n      await open(url)\n      return null\n    }\n\n    return presets.find((p) => p.name === selectedPreset) ?? null\n  }\n\n  // If --preset NAME or URL is provided.\n  if (typeof presetArg === \"string\") {\n    // Check if it's a URL.\n    if (isUrl(presetArg)) {\n      return { _isUrl: true, url: presetArg } as const\n    }\n\n    // Otherwise, fetch that preset by name.\n    const preset = await getPreset(presetArg)\n\n    if (!preset) {\n      const presets = await getPresets()\n      const presetNames = presets.map((p) => p.name).join(\", \")\n      logger.error(\n        `Preset \"${presetArg}\" not found. Available presets: ${presetNames}`\n      )\n      process.exit(1)\n    }\n\n    return preset\n  }\n\n  return null\n}\n\nfunction getTemplateFiles(template: Template) {\n  switch (template) {\n    case \"vite\":\n      return [\n        {\n          type: \"registry:file\" as const,\n          path: \"src/App.tsx\",\n          target: \"src/App.tsx\",\n          content: dedent`import { ComponentExample } from \"@/components/component-example\";\n\nexport function App() {\n  return <ComponentExample />;\n}\n\nexport default App;\n`,\n        },\n      ]\n    case \"next\":\n      return [\n        {\n          type: \"registry:page\" as const,\n          path: \"app/page.tsx\",\n          target: \"app/page.tsx\",\n          content: dedent`import { ComponentExample } from \"@/components/component-example\";\n\nexport default function Page() {\n  return <ComponentExample />;\n}\n`,\n        },\n      ]\n    case \"start\":\n      return [\n        {\n          type: \"registry:file\" as const,\n          path: \"src/routes/index.tsx\",\n          target: \"src/routes/index.tsx\",\n          content: dedent`import { createFileRoute } from \"@tanstack/react-router\";\nimport { ComponentExample } from \"@/components/component-example\";\n\nexport const Route = createFileRoute(\"/\")({ component: App });\n\nfunction App() {\n  return (\n    <ComponentExample />\n  );\n}\n`,\n        },\n      ]\n    default:\n      return []\n  }\n}\n\nfunction getShadcnCreateUrl(searchParams?: Record<string, string>) {\n  const url = new URL(`${SHADCN_URL}/create`)\n  if (searchParams) {\n    for (const [key, value] of Object.entries(searchParams)) {\n      url.searchParams.set(key, value)\n    }\n  }\n  return url.toString()\n}\n\nfunction getShadcnInitUrl() {\n  return `${SHADCN_URL}/init`\n}\n","import { existsSync, promises as fs } from \"fs\"\nimport path from \"path\"\nimport {\n  fetchTree,\n  getItemTargetPath,\n  getRegistryBaseColor,\n  getShadcnRegistryIndex,\n} from \"@/src/registry/api\"\nimport { registryIndexSchema } from \"@/src/schema\"\nimport { Config, getConfig } from \"@/src/utils/get-config\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { transform } from \"@/src/utils/transformers\"\nimport { Command } from \"commander\"\nimport { diffLines, type Change } from \"diff\"\nimport { z } from \"zod\"\n\nconst updateOptionsSchema = z.object({\n  component: z.string().optional(),\n  yes: z.boolean(),\n  cwd: z.string(),\n  path: z.string().optional(),\n})\n\nexport const diff = new Command()\n  .name(\"diff\")\n  .description(\"check for updates against the registry\")\n  .argument(\"[component]\", \"the component name\")\n  .option(\"-y, --yes\", \"skip confirmation prompt.\", false)\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async (name, opts) => {\n    try {\n      const options = updateOptionsSchema.parse({\n        component: name,\n        ...opts,\n      })\n\n      const cwd = path.resolve(options.cwd)\n\n      if (!existsSync(cwd)) {\n        logger.error(`The path ${cwd} does not exist. Please try again.`)\n        process.exit(1)\n      }\n\n      const config = await getConfig(cwd)\n      if (!config) {\n        logger.warn(\n          `Configuration is missing. Please run ${highlighter.success(\n            `init`\n          )} to create a components.json file.`\n        )\n        process.exit(1)\n      }\n\n      const registryIndex = await getShadcnRegistryIndex()\n\n      if (!registryIndex) {\n        handleError(new Error(\"Failed to fetch registry index.\"))\n        process.exit(1)\n      }\n\n      if (!options.component) {\n        const targetDir = config.resolvedPaths.components\n\n        // Find all components that exist in the project.\n        const projectComponents = registryIndex.filter((item) => {\n          for (const file of item.files ?? []) {\n            const filePath = path.resolve(\n              targetDir,\n              typeof file === \"string\" ? file : file.path\n            )\n            if (existsSync(filePath)) {\n              return true\n            }\n          }\n\n          return false\n        })\n\n        // Check for updates.\n        const componentsWithUpdates = []\n        for (const component of projectComponents) {\n          const changes = await diffComponent(component, config)\n          if (changes.length) {\n            componentsWithUpdates.push({\n              name: component.name,\n              changes,\n            })\n          }\n        }\n\n        if (!componentsWithUpdates.length) {\n          logger.info(\"No updates found.\")\n          process.exit(0)\n        }\n\n        logger.info(\"The following components have updates available:\")\n        for (const component of componentsWithUpdates) {\n          logger.info(`- ${component.name}`)\n          for (const change of component.changes) {\n            logger.info(`  - ${change.filePath}`)\n          }\n        }\n        logger.break()\n        logger.info(\n          `Run ${highlighter.success(`diff <component>`)} to see the changes.`\n        )\n        process.exit(0)\n      }\n\n      // Show diff for a single component.\n      const component = registryIndex.find(\n        (item) => item.name === options.component\n      )\n\n      if (!component) {\n        logger.error(\n          `The component ${highlighter.success(\n            options.component\n          )} does not exist.`\n        )\n        process.exit(1)\n      }\n\n      const changes = await diffComponent(component, config)\n\n      if (!changes.length) {\n        logger.info(`No updates found for ${options.component}.`)\n        process.exit(0)\n      }\n\n      for (const change of changes) {\n        logger.info(`- ${change.filePath}`)\n        await printDiff(change.patch)\n        logger.info(\"\")\n      }\n    } catch (error) {\n      handleError(error)\n    }\n  })\n\nasync function diffComponent(\n  component: z.infer<typeof registryIndexSchema>[number],\n  config: Config\n) {\n  const payload = await fetchTree(config.style, [component])\n  const baseColor = await getRegistryBaseColor(config.tailwind.baseColor)\n\n  if (!payload) {\n    return []\n  }\n\n  const changes = []\n\n  for (const item of payload) {\n    const targetDir = await getItemTargetPath(config, item)\n\n    if (!targetDir) {\n      continue\n    }\n\n    for (const file of item.files ?? []) {\n      const filePath = path.resolve(\n        targetDir,\n        typeof file === \"string\" ? file : file.path\n      )\n\n      if (!existsSync(filePath)) {\n        continue\n      }\n\n      const fileContent = await fs.readFile(filePath, \"utf8\")\n\n      if (typeof file === \"string\" || !file.content) {\n        continue\n      }\n\n      const registryContent = await transform({\n        filename: file.path,\n        raw: file.content,\n        config,\n        baseColor,\n      })\n\n      const patch = diffLines(registryContent as string, fileContent)\n      if (patch.length > 1) {\n        changes.push({\n          filePath,\n          patch,\n        })\n      }\n    }\n  }\n\n  return changes\n}\n\nasync function printDiff(diff: Change[]) {\n  diff.forEach((part) => {\n    if (part) {\n      if (part.added) {\n        return process.stdout.write(highlighter.success(part.value))\n      }\n      if (part.removed) {\n        return process.stdout.write(highlighter.error(part.value))\n      }\n\n      return process.stdout.write(part.value)\n    }\n  })\n}\n","import { getConfig } from \"@/src/utils/get-config\"\nimport { getProjectInfo } from \"@/src/utils/get-project-info\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { logger } from \"@/src/utils/logger\"\nimport { Command } from \"commander\"\n\nexport const info = new Command()\n  .name(\"info\")\n  .description(\"get information about your project\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async (opts) => {\n    try {\n      logger.info(\"> project info\")\n      console.log(await getProjectInfo(opts.cwd))\n      logger.break()\n      logger.info(\"> components.json\")\n      console.log(await getConfig(opts.cwd))\n    } catch (error) {\n      handleError(error)\n    }\n  })\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport { server } from \"@/src/mcp\"\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\nimport { getConfig } from \"@/src/utils/get-config\"\nimport { getPackageManager } from \"@/src/utils/get-package-manager\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { updateDependencies } from \"@/src/utils/updaters/update-dependencies\"\nimport { StdioServerTransport } from \"@modelcontextprotocol/sdk/server/stdio.js\"\nimport { Command } from \"commander\"\nimport deepmerge from \"deepmerge\"\nimport { execa } from \"execa\"\nimport fsExtra from \"fs-extra\"\nimport prompts from \"prompts\"\nimport z from \"zod\"\n\nconst SHADCN_MCP_VERSION = \"latest\"\n\nconst CLIENTS = [\n  {\n    name: \"claude\",\n    label: \"Claude Code\",\n    configPath: \".mcp.json\",\n    config: {\n      mcpServers: {\n        shadcn: {\n          command: \"npx\",\n          args: [`shadcn@${SHADCN_MCP_VERSION}`, \"mcp\"],\n        },\n      },\n    },\n  },\n  {\n    name: \"cursor\",\n    label: \"Cursor\",\n    configPath: \".cursor/mcp.json\",\n    config: {\n      mcpServers: {\n        shadcn: {\n          command: \"npx\",\n          args: [`shadcn@${SHADCN_MCP_VERSION}`, \"mcp\"],\n        },\n      },\n    },\n  },\n  {\n    name: \"vscode\",\n    label: \"VS Code\",\n    configPath: \".vscode/mcp.json\",\n    config: {\n      servers: {\n        shadcn: {\n          command: \"npx\",\n          args: [`shadcn@${SHADCN_MCP_VERSION}`, \"mcp\"],\n        },\n      },\n    },\n  },\n  {\n    name: \"codex\",\n    label: \"Codex\",\n    configPath: \".codex/config.toml\",\n    config: `[mcp_servers.shadcn]\ncommand = \"npx\"\nargs = [\"shadcn@${SHADCN_MCP_VERSION}\", \"mcp\"]\n`,\n  },\n  {\n    name: \"opencode\",\n    label: \"OpenCode\",\n    configPath: \"opencode.json\",\n    config: {\n      $schema: \"https://opencode.ai/config.json\",\n      mcp: {\n        shadcn: {\n          type: \"local\",\n          command: [\"npx\", `shadcn@${SHADCN_MCP_VERSION}`, \"mcp\"],\n          enabled: true,\n        },\n      },\n    },\n  },\n] as const\n\nconst DEPENDENCIES = [`shadcn@${SHADCN_MCP_VERSION}`]\n\nexport const mcp = new Command()\n  .name(\"mcp\")\n  .description(\"MCP server and configuration commands\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async (options) => {\n    try {\n      await loadEnvFiles(options.cwd)\n      const transport = new StdioServerTransport()\n      await server.connect(transport)\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    }\n  })\n\nconst mcpInitOptionsSchema = z.object({\n  client: z.enum([\"claude\", \"cursor\", \"vscode\", \"codex\", \"opencode\"]),\n  cwd: z.string(),\n})\n\nmcp\n  .command(\"init\")\n  .description(\"Initialize MCP configuration for your client\")\n  .option(\n    \"--client <client>\",\n    `MCP client (${CLIENTS.map((c) => c.name).join(\", \")})`\n  )\n  .action(async (opts, command) => {\n    try {\n      // Get the cwd from parent command.\n      const parentOpts = command.parent?.opts() || {}\n      const cwd = parentOpts.cwd || process.cwd()\n\n      let client = opts.client\n\n      if (!client) {\n        const response = await prompts({\n          type: \"select\",\n          name: \"client\",\n          message: \"Which MCP client are you using?\",\n          choices: CLIENTS.map((c) => ({\n            title: c.label,\n            value: c.name,\n          })),\n        })\n\n        if (!response.client) {\n          logger.break()\n          process.exit(1)\n        }\n\n        client = response.client\n      }\n\n      const options = mcpInitOptionsSchema.parse({\n        client,\n        cwd,\n      })\n\n      const config = await getConfig(options.cwd)\n\n      if (options.client === \"codex\") {\n        if (config) {\n          await updateDependencies([], DEPENDENCIES, config, {\n            silent: false,\n          })\n        } else {\n          const packageManager = await getPackageManager(options.cwd)\n          const installCommand = packageManager === \"npm\" ? \"install\" : \"add\"\n          const devFlag = packageManager === \"npm\" ? \"--save-dev\" : \"-D\"\n\n          const installSpinner = spinner(\"Installing dependencies...\").start()\n          await execa(\n            packageManager,\n            [installCommand, devFlag, ...DEPENDENCIES],\n            {\n              cwd: options.cwd,\n            }\n          )\n          installSpinner.succeed(\"Installing dependencies.\")\n        }\n\n        logger.break()\n        logger.log(\"To configure the shadcn MCP server in Codex:\")\n        logger.break()\n        logger.log(\n          `1. Open or create the file ${highlighter.info(\n            \"~/.codex/config.toml\"\n          )}`\n        )\n        logger.log(\"2. Add the following configuration:\")\n        logger.log()\n        logger.info(`[mcp_servers.shadcn]\ncommand = \"npx\"\nargs = [\"shadcn@${SHADCN_MCP_VERSION}\", \"mcp\"]`)\n        logger.break()\n        logger.info(\"3. Restart Codex to load the MCP server\")\n        logger.break()\n        process.exit(0)\n      }\n\n      const configSpinner = spinner(\"Configuring MCP server...\").start()\n      const configPath = await runMcpInit(options)\n      configSpinner.succeed(\"Configuring MCP server.\")\n\n      if (config) {\n        await updateDependencies([], DEPENDENCIES, config, {\n          silent: false,\n        })\n      } else {\n        const packageManager = await getPackageManager(options.cwd)\n        const installCommand = packageManager === \"npm\" ? \"install\" : \"add\"\n        const devFlag = packageManager === \"npm\" ? \"--save-dev\" : \"-D\"\n\n        const installSpinner = spinner(\"Installing dependencies...\").start()\n        await execa(\n          packageManager,\n          [installCommand, devFlag, ...DEPENDENCIES],\n          {\n            cwd: options.cwd,\n          }\n        )\n        installSpinner.succeed(\"Installing dependencies.\")\n      }\n\n      logger.break()\n      logger.success(`Configuration saved to ${configPath}.`)\n      logger.break()\n    } catch (error) {\n      handleError(error)\n    }\n  })\n\nconst overwriteMerge = (_: any[], sourceArray: any[]) => sourceArray\n\nasync function runMcpInit(options: z.infer<typeof mcpInitOptionsSchema>) {\n  const { client, cwd } = options\n\n  const clientInfo = CLIENTS.find((c) => c.name === client)\n  if (!clientInfo) {\n    throw new Error(\n      `Unknown client: ${client}. Available clients: ${CLIENTS.map(\n        (c) => c.name\n      ).join(\", \")}`\n    )\n  }\n\n  const configPath = path.join(cwd, clientInfo.configPath)\n  const dir = path.dirname(configPath)\n  await fsExtra.ensureDir(dir)\n\n  // Handle JSON format.\n  let existingConfig = {}\n  try {\n    const content = await fs.readFile(configPath, \"utf-8\")\n    existingConfig = JSON.parse(content)\n  } catch {}\n\n  const mergedConfig = deepmerge(\n    existingConfig,\n    clientInfo.config as Record<string, unknown>,\n    { arrayMerge: overwriteMerge }\n  )\n\n  await fs.writeFile(\n    configPath,\n    JSON.stringify(mergedConfig, null, 2) + \"\\n\",\n    \"utf-8\"\n  )\n\n  return clientInfo.configPath\n}\n","export const LEGACY_ICON_LIBRARIES = {\n  lucide: {\n    name: \"lucide-react\",\n    package: \"lucide-react\",\n    import: \"lucide-react\",\n  },\n  radix: {\n    name: \"@radix-ui/react-icons\",\n    package: \"@radix-ui/react-icons\",\n    import: \"@radix-ui/react-icons\",\n  },\n}\n","import { randomBytes } from \"crypto\"\nimport { promises as fs } from \"fs\"\nimport { tmpdir } from \"os\"\nimport path from \"path\"\nimport { getRegistryIcons } from \"@/src/registry/api\"\nimport { iconsSchema } from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { LEGACY_ICON_LIBRARIES } from \"@/src/utils/legacy-icon-libraries\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { updateDependencies } from \"@/src/utils/updaters/update-dependencies\"\nimport fg from \"fast-glob\"\nimport prompts from \"prompts\"\nimport { Project, ScriptKind, SyntaxKind } from \"ts-morph\"\nimport { z } from \"zod\"\n\nexport async function migrateIcons(config: Config) {\n  if (!config.resolvedPaths.ui) {\n    throw new Error(\n      \"We could not find a valid `ui` path in your `components.json` file. Please ensure you have a valid `ui` path in your `components.json` file.\"\n    )\n  }\n\n  const uiPath = config.resolvedPaths.ui\n  const [files, registryIcons] = await Promise.all([\n    fg(\"**/*.{js,ts,jsx,tsx}\", {\n      cwd: uiPath,\n    }),\n    getRegistryIcons(),\n  ])\n\n  if (Object.keys(registryIcons).length === 0) {\n    throw new Error(\"Something went wrong fetching the registry icons.\")\n  }\n\n  const libraryChoices = Object.entries(LEGACY_ICON_LIBRARIES).map(\n    ([name, iconLibrary]) => ({\n      title: iconLibrary.name,\n      value: name,\n    })\n  )\n\n  const migrateOptions = await prompts([\n    {\n      type: \"select\",\n      name: \"sourceLibrary\",\n      message: `Which icon library would you like to ${highlighter.info(\n        \"migrate from\"\n      )}?`,\n      choices: libraryChoices,\n    },\n    {\n      type: \"select\",\n      name: \"targetLibrary\",\n      message: `Which icon library would you like to ${highlighter.info(\n        \"migrate to\"\n      )}?`,\n      choices: libraryChoices,\n    },\n  ])\n\n  if (migrateOptions.sourceLibrary === migrateOptions.targetLibrary) {\n    throw new Error(\n      \"You cannot migrate to the same icon library. Please choose a different icon library.\"\n    )\n  }\n\n  if (\n    !(\n      migrateOptions.sourceLibrary in LEGACY_ICON_LIBRARIES &&\n      migrateOptions.targetLibrary in LEGACY_ICON_LIBRARIES\n    )\n  ) {\n    throw new Error(\"Invalid icon library. Please choose a valid icon library.\")\n  }\n\n  const sourceLibrary =\n    LEGACY_ICON_LIBRARIES[\n      migrateOptions.sourceLibrary as keyof typeof LEGACY_ICON_LIBRARIES\n    ]\n  const targetLibrary =\n    LEGACY_ICON_LIBRARIES[\n      migrateOptions.targetLibrary as keyof typeof LEGACY_ICON_LIBRARIES\n    ]\n  const { confirm } = await prompts({\n    type: \"confirm\",\n    name: \"confirm\",\n    initial: true,\n    message: `We will migrate ${highlighter.info(\n      files.length\n    )} files in ${highlighter.info(\n      `./${path.relative(config.resolvedPaths.cwd, uiPath)}`\n    )} from ${highlighter.info(sourceLibrary.name)} to ${highlighter.info(\n      targetLibrary.name\n    )}. Continue?`,\n  })\n\n  if (!confirm) {\n    logger.info(\"Migration cancelled.\")\n    process.exit(0)\n  }\n\n  if (targetLibrary.package) {\n    await updateDependencies([targetLibrary.package], [], config, {\n      silent: false,\n    })\n  }\n\n  const migrationSpinner = spinner(`Migrating icons...`)?.start()\n\n  await Promise.all(\n    files.map(async (file) => {\n      migrationSpinner.text = `Migrating ${file}...`\n\n      const filePath = path.join(uiPath, file)\n      const fileContent = await fs.readFile(filePath, \"utf-8\")\n\n      const content = await migrateIconsFile(\n        fileContent,\n        migrateOptions.sourceLibrary,\n        migrateOptions.targetLibrary,\n        registryIcons\n      )\n\n      await fs.writeFile(filePath, content)\n    })\n  )\n\n  migrationSpinner.succeed(\"Migration complete.\")\n}\n\nexport async function migrateIconsFile(\n  content: string,\n  sourceLibrary: keyof typeof LEGACY_ICON_LIBRARIES,\n  targetLibrary: keyof typeof LEGACY_ICON_LIBRARIES,\n  iconsMapping: z.infer<typeof iconsSchema>\n) {\n  const sourceLibraryImport = LEGACY_ICON_LIBRARIES[sourceLibrary]?.import\n  const targetLibraryImport = LEGACY_ICON_LIBRARIES[targetLibrary]?.import\n\n  const dir = await fs.mkdtemp(path.join(tmpdir(), \"shadcn-\"))\n  const project = new Project({\n    compilerOptions: {},\n  })\n\n  const tempFile = path.join(\n    dir,\n    `shadcn-icons-${randomBytes(4).toString(\"hex\")}.tsx`\n  )\n  const sourceFile = project.createSourceFile(tempFile, content, {\n    scriptKind: ScriptKind.TSX,\n  })\n\n  // Find all sourceLibrary imports.\n  let targetedIcons: string[] = []\n  for (const importDeclaration of sourceFile.getImportDeclarations() ?? []) {\n    if (\n      importDeclaration.getModuleSpecifier()?.getText() !==\n      `\"${sourceLibraryImport}\"`\n    ) {\n      continue\n    }\n\n    for (const specifier of importDeclaration.getNamedImports() ?? []) {\n      const iconName = specifier.getName()\n\n      // TODO: this is O(n^2) but okay for now.\n      const targetedIcon = Object.values(iconsMapping).find(\n        (icon) => icon[sourceLibrary] === iconName\n      )?.[targetLibrary]\n\n      if (!targetedIcon || targetedIcons.includes(targetedIcon)) {\n        continue\n      }\n\n      targetedIcons.push(targetedIcon)\n\n      // Remove the named import.\n      specifier.remove()\n\n      // Replace with the targeted icon.\n      sourceFile\n        .getDescendantsOfKind(SyntaxKind.JsxSelfClosingElement)\n        .filter((node) => node.getTagNameNode()?.getText() === iconName)\n        .forEach((node) => node.getTagNameNode()?.replaceWithText(targetedIcon))\n    }\n\n    // If the named import is empty, remove the import declaration.\n    if (importDeclaration.getNamedImports()?.length === 0) {\n      importDeclaration.remove()\n    }\n  }\n\n  if (targetedIcons.length > 0) {\n    sourceFile.addImportDeclaration({\n      moduleSpecifier: targetLibraryImport,\n      namedImports: targetedIcons.map((icon) => ({\n        name: icon,\n      })),\n    })\n  }\n\n  return await sourceFile.getText()\n}\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { getPackageInfo } from \"@/src/utils/get-package-info\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { updateDependencies } from \"@/src/utils/updaters/update-dependencies\"\nimport fg from \"fast-glob\"\nimport prompts from \"prompts\"\n\nfunction toPascalCase(str: string): string {\n  return str\n    .split(\"-\")\n    .map((part) => part.charAt(0).toUpperCase() + part.slice(1))\n    .join(\"\")\n}\n\nfunction processNamedImports(\n  namedImports: string,\n  isTypeOnly: boolean,\n  imports: Array<{ name: string; alias?: string; isType?: boolean }>,\n  packageName: string\n) {\n  // Clean up multi-line imports.\n  // Remove comments and whitespace.\n  const cleanedImports = namedImports\n    .replace(/\\/\\/.*$/gm, \"\")\n    .replace(/\\/\\*[\\s\\S]*?\\*\\//g, \"\")\n    .replace(/\\s+/g, \" \")\n    .trim()\n\n  const namedImportList = cleanedImports\n    .split(\",\")\n    .map((importItem) => importItem.trim())\n    .filter(Boolean)\n\n  for (const importItem of namedImportList) {\n    const inlineTypeMatch = importItem.match(/^type\\s+(\\w+)(?:\\s+as\\s+(\\w+))?$/)\n    const aliasMatch = importItem.match(/^(\\w+)\\s+as\\s+(\\w+)$/)\n\n    if (inlineTypeMatch) {\n      // Inline type: \"type DialogProps\" or \"type DialogProps as Props\"\n      const importName = inlineTypeMatch[1]\n      const importAlias = inlineTypeMatch[2]\n\n      if (packageName === \"slot\" && importName === \"Slot\" && !importAlias) {\n        imports.push({\n          name: \"Slot\",\n          alias: \"SlotPrimitive\",\n          isType: true,\n        })\n      } else {\n        imports.push({\n          name: importName,\n          alias: importAlias,\n          isType: true,\n        })\n      }\n    } else if (aliasMatch) {\n      // Regular import with alias: \"Root as DialogRoot\"\n      const importName = aliasMatch[1]\n      const importAlias = aliasMatch[2]\n\n      if (\n        packageName === \"slot\" &&\n        importName === \"Slot\" &&\n        importAlias === \"Slot\"\n      ) {\n        imports.push({\n          name: \"Slot\",\n          alias: \"SlotPrimitive\",\n          isType: isTypeOnly,\n        })\n      } else {\n        imports.push({\n          name: importName,\n          alias: importAlias,\n          isType: isTypeOnly,\n        })\n      }\n    } else {\n      // Simple import: \"Root\"\n      // Special handling for Slot: always alias it as SlotPrimitive\n      if (packageName === \"slot\" && importItem === \"Slot\") {\n        imports.push({\n          name: \"Slot\",\n          alias: \"SlotPrimitive\",\n          isType: isTypeOnly,\n        })\n      } else {\n        imports.push({\n          name: importItem,\n          isType: isTypeOnly,\n        })\n      }\n    }\n  }\n}\n\nexport async function migrateRadix(\n  config: Config,\n  options: { yes?: boolean; path?: string } = {}\n) {\n  // Determine files to migrate.\n  let files: string[]\n  let basePath: string\n\n  if (options.path) {\n    // User provided a path/glob.\n    basePath = config.resolvedPaths.cwd\n    const isGlob = options.path.includes(\"*\")\n\n    if (isGlob) {\n      files = await fg(options.path, {\n        cwd: basePath,\n        onlyFiles: true,\n        ignore: [\"**/node_modules/**\"],\n      })\n    } else {\n      const fullPath = path.resolve(basePath, options.path)\n      const stat = await fs.stat(fullPath).catch(() => null)\n\n      if (!stat) {\n        throw new Error(`File not found: ${options.path}`)\n      }\n\n      if (stat.isDirectory()) {\n        basePath = fullPath\n        files = await fg(\"**/*.{js,ts,jsx,tsx}\", {\n          cwd: basePath,\n          onlyFiles: true,\n          ignore: [\"**/node_modules/**\"],\n        })\n      } else if (stat.isFile()) {\n        files = [options.path]\n      } else {\n        throw new Error(`Unsupported path type: ${options.path}`)\n      }\n    }\n\n    if (files.length === 0) {\n      throw new Error(`No files found matching: ${options.path}`)\n    }\n  } else {\n    // Default: use ui path from components.json.\n    if (!config.resolvedPaths.ui) {\n      throw new Error(\n        \"We could not find a valid `ui` path in your `components.json` file. Please ensure you have a valid `ui` path in your `components.json` file.\"\n      )\n    }\n\n    basePath = config.resolvedPaths.ui\n    files = await fg(\"**/*.{js,ts,jsx,tsx}\", {\n      cwd: basePath,\n      onlyFiles: true,\n    })\n  }\n\n  // Confirm with user.\n  if (!options.yes) {\n    const relativePath = options.path\n      ? options.path\n      : `./${path.relative(config.resolvedPaths.cwd, basePath)}`\n\n    const { confirm } = await prompts({\n      type: \"confirm\",\n      name: \"confirm\",\n      initial: true,\n      message: `We will migrate ${highlighter.info(\n        files.length\n      )} file(s) in ${highlighter.info(relativePath)} to ${highlighter.info(\n        \"radix-ui\"\n      )}. Continue?`,\n    })\n\n    if (!confirm) {\n      logger.info(\"Migration cancelled.\")\n      process.exit(0)\n    }\n  }\n\n  const migrationSpinner = spinner(`Migrating imports...`)?.start()\n  const foundPackages = new Set<string>()\n\n  await Promise.all(\n    files.map(async (file) => {\n      migrationSpinner.text = `Migrating ${file}...`\n\n      const filePath = path.join(basePath, file)\n      const fileContent = await fs.readFile(filePath, \"utf-8\")\n\n      const { content, replacedPackages } = await migrateRadixFile(fileContent)\n\n      // Track which packages we found\n      replacedPackages.forEach((pkg) => foundPackages.add(pkg))\n\n      await fs.writeFile(filePath, content)\n    })\n  )\n\n  migrationSpinner.succeed(\"Migrating imports.\")\n\n  // Update package.json dependencies.\n  const packageSpinner = spinner(`Updating package.json...`)?.start()\n\n  try {\n    const packageJson = getPackageInfo(config.resolvedPaths.cwd, false)\n\n    if (!packageJson) {\n      packageSpinner.fail(\"Could not read package.json\")\n      logger.warn(\n        \"Could not update package.json. You may need to manually replace @radix-ui/react-* packages with radix-ui\"\n      )\n      return\n    }\n\n    const foundPackagesArray = Array.from(foundPackages)\n\n    // Add radix-ui if we found any Radix packages.\n    if (foundPackagesArray.length > 0) {\n      if (!packageJson.dependencies) {\n        packageJson.dependencies = {}\n      }\n\n      // Only add radix-ui if it's not already in dependencies.\n      const hasRadixUi =\n        packageJson.dependencies?.[\"radix-ui\"] ||\n        packageJson.devDependencies?.[\"radix-ui\"]\n\n      if (!hasRadixUi) {\n        packageJson.dependencies[\"radix-ui\"] = \"latest\"\n\n        const packageJsonPath = path.join(\n          config.resolvedPaths.cwd,\n          \"package.json\"\n        )\n        await fs.writeFile(\n          packageJsonPath,\n          JSON.stringify(packageJson, null, 2) + \"\\n\"\n        )\n\n        packageSpinner.succeed(`Updated package.json.`)\n\n        // Install radix-ui dependency.\n        await updateDependencies([\"radix-ui\"], [], config, { silent: false })\n      } else {\n        packageSpinner.succeed(`radix-ui already in package.json.`)\n      }\n\n      // Show a message about old packages that can be removed.\n      logger.info(\"\")\n      logger.info(\n        `Migration complete. The following packages may be removed if no longer in use:`\n      )\n      logger.info(highlighter.info(foundPackagesArray.join(\", \")))\n      logger.info(`Please review your codebase before removing.`)\n    } else {\n      packageSpinner.succeed(\"No packages found in source files.\")\n    }\n  } catch (error) {\n    packageSpinner.fail(\"Failed to update package.json\")\n    logger.warn(\n      \"You may need to manually replace @radix-ui/react-* packages with radix-ui\"\n    )\n  }\n}\n\nexport async function migrateRadixFile(\n  content: string\n): Promise<{ content: string; replacedPackages: string[] }> {\n  // Enhanced regex to handle type-only imports, but exclude react-icons\n  // Also capture optional semicolon at the end\n  const radixImportPattern =\n    /import\\s+(?:(type)\\s+)?(?:\\*\\s+as\\s+(\\w+)|{([^}]+)})\\s+from\\s+([\"'])@radix-ui\\/react-([^\"']+)\\4(;?)/g\n\n  const imports: Array<{ name: string; alias?: string; isType?: boolean }> = []\n  const linesToRemove: string[] = []\n  const replacedPackages: string[] = []\n  let quoteStyle = '\"' // Default to double quotes\n  let hasSemicolon = false // Track if any import had a semicolon\n\n  let result = content\n  let match\n\n  // Find all Radix imports\n  while ((match = radixImportPattern.exec(content)) !== null) {\n    const [\n      fullMatch,\n      typeKeyword,\n      namespaceAlias,\n      namedImports,\n      quote,\n      packageName,\n      semicolon,\n    ] = match\n\n    // Skip react-icons package and any sub-paths (like react-icons/dist/types)\n    if (packageName === \"icons\" || packageName.startsWith(\"icons/\")) {\n      continue\n    }\n\n    linesToRemove.push(fullMatch)\n\n    // Use the quote style and semicolon style from the first import\n    if (linesToRemove.length === 1) {\n      quoteStyle = quote\n      hasSemicolon = semicolon === \";\"\n    }\n\n    // Track which package we're replacing\n    replacedPackages.push(`@radix-ui/react-${packageName}`)\n\n    const isTypeOnly = Boolean(typeKeyword)\n\n    if (namespaceAlias) {\n      // Handle namespace imports: import * as DialogPrimitive from \"@radix-ui/react-dialog\"\n      const componentName = toPascalCase(packageName)\n      imports.push({\n        name: componentName,\n        alias: namespaceAlias,\n        isType: isTypeOnly,\n      })\n    } else if (namedImports) {\n      // Handle named imports: import { Root, Trigger } from \"@radix-ui/react-dialog\"\n      // or import type { DialogProps } from \"@radix-ui/react-dialog\"\n      // or import { type DialogProps, Root } from \"@radix-ui/react-dialog\"\n\n      processNamedImports(namedImports, isTypeOnly, imports, packageName)\n    }\n  }\n\n  if (imports.length === 0) {\n    return {\n      content,\n      replacedPackages: [],\n    }\n  }\n\n  // Remove duplicates.\n  // Considering name, alias, and type status.\n  const uniqueImports = imports.filter(\n    (importName, index, self) =>\n      index ===\n      self.findIndex(\n        (i) =>\n          i.name === importName.name &&\n          i.alias === importName.alias &&\n          i.isType === importName.isType\n      )\n  )\n\n  // Create the unified import with preserved quote style and type annotations\n  const importList = uniqueImports\n    .map((imp) => {\n      const typePrefix = imp.isType ? \"type \" : \"\"\n      return imp.alias\n        ? `${typePrefix}${imp.name} as ${imp.alias}`\n        : `${typePrefix}${imp.name}`\n    })\n    .join(\", \")\n\n  const unifiedImport = `import { ${importList} } from ${quoteStyle}radix-ui${quoteStyle}${\n    hasSemicolon ? \";\" : \"\"\n  }`\n\n  // Replace first import with unified import, remove the rest\n  result = linesToRemove.reduce((acc, line, index) => {\n    return acc.replace(line, index === 0 ? unifiedImport : \"\")\n  }, result)\n\n  // Clean up extra blank lines\n  result = result.replace(/\\n\\s*\\n\\s*\\n/g, \"\\n\\n\")\n\n  // Handle special case for Slot usage transformation\n  // Now that we import { Slot as SlotPrimitive }, we need to:\n  // 1. Transform: const Comp = asChild ? Slot : [ANYTHING] -> const Comp = asChild ? SlotPrimitive.Slot : [ANYTHING]\n  // 2. Transform: React.ComponentProps<typeof Slot> -> React.ComponentProps<typeof SlotPrimitive.Slot>\n  const hasSlotImport = uniqueImports.some(\n    (imp) => imp.name === \"Slot\" && imp.alias === \"SlotPrimitive\"\n  )\n\n  if (hasSlotImport) {\n    // Find all lines that are NOT import lines to avoid transforming the import statement itself\n    const lines = result.split(\"\\n\")\n    const transformedLines = lines.map((line) => {\n      // Skip import lines\n      if (line.trim().startsWith(\"import \")) {\n        return line\n      }\n\n      let transformedLine = line\n\n      // Handle all Slot references in one comprehensive pass\n      // Use placeholders to avoid double replacements\n\n      // First, mark specific patterns with placeholders\n      transformedLine = transformedLine.replace(\n        /\\b(asChild\\s*\\?\\s*)Slot(\\s*:)/g,\n        \"$1__SLOT_PLACEHOLDER__$2\"\n      )\n\n      transformedLine = transformedLine.replace(\n        /\\bReact\\.ComponentProps<typeof\\s+Slot>/g,\n        \"React.ComponentProps<typeof __SLOT_PLACEHOLDER__>\"\n      )\n\n      transformedLine = transformedLine.replace(\n        /\\bComponentProps<typeof\\s+Slot>/g,\n        \"ComponentProps<typeof __SLOT_PLACEHOLDER__>\"\n      )\n\n      transformedLine = transformedLine.replace(\n        /(<\\/?)Slot(\\s*\\/?>)/g,\n        \"$1__SLOT_PLACEHOLDER__$2\"\n      )\n\n      // Handle any other standalone Slot usage\n      transformedLine = transformedLine.replace(\n        /\\bSlot\\b/g,\n        (match, offset, string) => {\n          // Don't transform if it's inside quotes\n          const beforeMatch = string.substring(0, offset)\n          const openQuotes = (beforeMatch.match(/\"/g) || []).length\n          const openSingleQuotes = (beforeMatch.match(/'/g) || []).length\n\n          // If we're inside quotes, don't transform\n          if (openQuotes % 2 !== 0 || openSingleQuotes % 2 !== 0) {\n            return match\n          }\n\n          return \"__SLOT_PLACEHOLDER__\"\n        }\n      )\n\n      // Finally, replace all placeholders with SlotPrimitive.Slot\n      transformedLine = transformedLine.replace(\n        /__SLOT_PLACEHOLDER__/g,\n        \"SlotPrimitive.Slot\"\n      )\n\n      return transformedLine\n    })\n\n    result = transformedLines.join(\"\\n\")\n  }\n\n  // Remove duplicate packages\n  const uniqueReplacedPackages = Array.from(new Set(replacedPackages))\n\n  return {\n    content: result,\n    replacedPackages: uniqueReplacedPackages,\n  }\n}\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { transformDirection } from \"@/src/utils/transformers/transform-rtl\"\nimport fg from \"fast-glob\"\nimport prompts from \"prompts\"\n\n// Files that may need manual RTL adjustments.\nconst FILES_NEEDING_MANUAL_REVIEW = [\n  \"sidebar.tsx\",\n  \"pagination.tsx\",\n  \"calendar.tsx\",\n]\n\nconst RTL_DOCS_URL = \"https://ui.shadcn.com/docs/rtl#manual-migration-optional\"\n\nexport async function migrateRtl(\n  config: Config,\n  options: { yes?: boolean; path?: string } = {}\n) {\n  // Determine files to migrate.\n  let files: string[]\n  let basePath: string\n\n  if (options.path) {\n    // User provided a path/glob.\n    basePath = config.resolvedPaths.cwd\n    const isGlob = options.path.includes(\"*\")\n\n    if (isGlob) {\n      files = await fg(options.path, {\n        cwd: basePath,\n        onlyFiles: true,\n        ignore: [\"**/node_modules/**\"],\n      })\n    } else {\n      const fullPath = path.resolve(basePath, options.path)\n      const stat = await fs.stat(fullPath).catch(() => null)\n\n      if (!stat) {\n        throw new Error(`File not found: ${options.path}`)\n      }\n\n      if (stat.isDirectory()) {\n        basePath = fullPath\n        files = await fg(\"**/*.{js,ts,jsx,tsx}\", {\n          cwd: basePath,\n          onlyFiles: true,\n          ignore: [\"**/node_modules/**\"],\n        })\n      } else if (stat.isFile()) {\n        files = [options.path]\n      } else {\n        throw new Error(`Unsupported path type: ${options.path}`)\n      }\n    }\n\n    if (files.length === 0) {\n      throw new Error(`No files found matching: ${options.path}`)\n    }\n  } else {\n    // Default: use ui path from components.json.\n    if (!config.resolvedPaths.ui) {\n      throw new Error(\n        \"Could not find a valid `ui` path in your `components.json`. Please provide a path or glob pattern.\"\n      )\n    }\n\n    basePath = config.resolvedPaths.ui\n    files = await fg(\"**/*.{js,ts,jsx,tsx}\", {\n      cwd: basePath,\n      onlyFiles: true,\n    })\n  }\n\n  // Confirm with user.\n  if (!options.yes) {\n    const relativePath = options.path\n      ? options.path\n      : `./${path.relative(config.resolvedPaths.cwd, basePath)}`\n\n    const { confirm } = await prompts({\n      type: \"confirm\",\n      name: \"confirm\",\n      initial: true,\n      message: `We will migrate ${highlighter.info(\n        files.length\n      )} file(s) in ${highlighter.info(relativePath)} to RTL. Continue?`,\n    })\n\n    if (!confirm) {\n      logger.info(\"Migration cancelled.\")\n      process.exit(0)\n    }\n  }\n\n  // Update components.json to set rtl: true.\n  const configSpinner = spinner(\"Updating components.json...\").start()\n  try {\n    const configPath = path.resolve(config.resolvedPaths.cwd, \"components.json\")\n    const existingConfig = JSON.parse(await fs.readFile(configPath, \"utf-8\"))\n    existingConfig.rtl = true\n    await fs.writeFile(\n      configPath,\n      JSON.stringify(existingConfig, null, 2) + \"\\n\"\n    )\n    configSpinner.succeed(\"Updated components.json.\")\n  } catch {\n    configSpinner.fail(\"Failed to update components.json.\")\n    throw new Error(\n      \"Could not update components.json. Please manually set `rtl: true`.\"\n    )\n  }\n\n  // Transform files.\n  const migrationSpinner = spinner(\"Migrating files to RTL...\").start()\n  let transformedCount = 0\n  const filesNeedingReview: string[] = []\n\n  await Promise.all(\n    files.map(async (file) => {\n      migrationSpinner.text = `Migrating ${file}...`\n\n      const filePath = path.join(basePath, file)\n      const content = await fs.readFile(filePath, \"utf-8\")\n      const transformed = await transformDirection(content, true)\n\n      // Only write if content changed.\n      if (transformed !== content) {\n        await fs.writeFile(filePath, transformed)\n        transformedCount++\n      }\n\n      // Check if this file needs manual review.\n      const fileName = path.basename(file)\n      if (FILES_NEEDING_MANUAL_REVIEW.includes(fileName)) {\n        filesNeedingReview.push(file)\n      }\n    })\n  )\n\n  migrationSpinner.succeed(\n    `Migration complete. ${transformedCount} file(s) transformed.`\n  )\n\n  // Show message for files that need manual review.\n  if (filesNeedingReview.length > 0) {\n    logger.break()\n    logger.warn(\"The following components may need manual RTL adjustments:\")\n    for (const file of filesNeedingReview) {\n      logger.info(`  - ${file}`)\n    }\n    logger.break()\n    logger.info(`See ${highlighter.info(RTL_DOCS_URL)} for more information.`)\n  }\n}\n","import path from \"path\"\nimport { addOptionsSchema } from \"@/src/commands/add\"\nimport { migrateOptionsSchema } from \"@/src/commands/migrate\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { getConfig } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport fs from \"fs-extra\"\nimport { z } from \"zod\"\n\nexport async function preFlightMigrate(\n  options: z.infer<typeof migrateOptionsSchema>\n) {\n  const errors: Record<string, boolean> = {}\n\n  // Ensure target directory exists.\n  // Check for empty project. We assume if no package.json exists, the project is empty.\n  if (\n    !fs.existsSync(options.cwd) ||\n    !fs.existsSync(path.resolve(options.cwd, \"package.json\"))\n  ) {\n    errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] = true\n    return {\n      errors,\n      config: null,\n    }\n  }\n\n  // Check for existing components.json file.\n  if (!fs.existsSync(path.resolve(options.cwd, \"components.json\"))) {\n    errors[ERRORS.MISSING_CONFIG] = true\n    return {\n      errors,\n      config: null,\n    }\n  }\n\n  try {\n    const config = await getConfig(options.cwd)\n\n    return {\n      errors,\n      config: config!,\n    }\n  } catch (error) {\n    logger.break()\n    logger.error(\n      `An invalid ${highlighter.info(\n        \"components.json\"\n      )} file was found at ${highlighter.info(\n        options.cwd\n      )}.\\nBefore you can run a migration, you must create a valid ${highlighter.info(\n        \"components.json\"\n      )} file by running the ${highlighter.info(\"init\")} command.`\n    )\n    logger.error(\n      `Learn more at ${highlighter.info(\n        \"https://ui.shadcn.com/docs/components-json\"\n      )}.`\n    )\n    logger.break()\n    process.exit(1)\n  }\n}\n","import path from \"path\"\nimport { migrateIcons } from \"@/src/migrations/migrate-icons\"\nimport { migrateRadix } from \"@/src/migrations/migrate-radix\"\nimport { migrateRtl } from \"@/src/migrations/migrate-rtl\"\nimport { preFlightMigrate } from \"@/src/preflights/preflight-migrate\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { logger } from \"@/src/utils/logger\"\nimport { Command } from \"commander\"\nimport { z } from \"zod\"\n\nexport const migrations = [\n  {\n    name: \"icons\",\n    description: \"migrate your ui components to a different icon library.\",\n  },\n  {\n    name: \"radix\",\n    description: \"migrate to radix-ui.\",\n  },\n  {\n    name: \"rtl\",\n    description: \"migrate your components to support RTL (right-to-left).\",\n  },\n] as const\n\nexport const migrateOptionsSchema = z.object({\n  cwd: z.string(),\n  list: z.boolean(),\n  yes: z.boolean(),\n  migration: z\n    .string()\n    .refine(\n      (value) =>\n        value && migrations.some((migration) => migration.name === value),\n      {\n        message:\n          \"You must specify a valid migration. Run `shadcn migrate --list` to see available migrations.\",\n      }\n    )\n    .optional(),\n  path: z.string().optional(),\n})\n\nexport const migrate = new Command()\n  .name(\"migrate\")\n  .description(\"run a migration.\")\n  .argument(\"[migration]\", \"the migration to run.\")\n  .argument(\"[path]\", \"optional path or glob pattern to migrate.\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-l, --list\", \"list all migrations.\", false)\n  .option(\"-y, --yes\", \"skip confirmation prompt.\", false)\n  .action(async (migration, migratePath, opts) => {\n    try {\n      const options = migrateOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        migration,\n        path: migratePath,\n        list: opts.list,\n        yes: opts.yes,\n      })\n\n      if (options.list || !options.migration) {\n        logger.info(\"Available migrations:\")\n        for (const migration of migrations) {\n          logger.info(`- ${migration.name}: ${migration.description}`)\n        }\n        return\n      }\n\n      if (!options.migration) {\n        throw new Error(\n          \"You must specify a migration. Run `shadcn migrate --list` to see available migrations.\"\n        )\n      }\n\n      let { errors, config } = await preFlightMigrate(options)\n\n      if (\n        errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] ||\n        errors[ERRORS.MISSING_CONFIG]\n      ) {\n        throw new Error(\n          \"No `components.json` file found. Ensure you are at the root of your project.\"\n        )\n      }\n\n      if (!config) {\n        throw new Error(\n          \"Something went wrong reading your `components.json` file. Please ensure you have a valid `components.json` file.\"\n        )\n      }\n\n      if (options.migration === \"icons\") {\n        await migrateIcons(config)\n      }\n\n      if (options.migration === \"radix\") {\n        await migrateRadix(config, { yes: options.yes, path: options.path })\n      }\n\n      if (options.migration === \"rtl\") {\n        await migrateRtl(config, { yes: options.yes, path: options.path })\n      }\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    }\n  })\n","import path from \"path\"\nimport { getRegistries } from \"@/src/registry/api\"\nimport { BUILTIN_REGISTRIES } from \"@/src/registry/constants\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { Command } from \"commander\"\nimport fs from \"fs-extra\"\nimport prompts from \"prompts\"\nimport { z } from \"zod\"\n\nconst addOptionsSchema = z.object({\n  cwd: z.string(),\n  silent: z.boolean(),\n})\n\nexport const add = new Command()\n  .name(\"add\")\n  .description(\"add registries to your project\")\n  .argument(\n    \"[registries...]\",\n    \"registries (@namespace) or registry URLs (@namespace=url)\"\n  )\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-s, --silent\", \"mute output.\", false)\n  .action(async (registries: string[], opts) => {\n    try {\n      const options = addOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        silent: opts.silent,\n      })\n\n      const registryArgs =\n        registries.length > 0\n          ? registries\n          : await promptForRegistries({ silent: options.silent })\n\n      await addRegistriesToConfig(registryArgs, options.cwd, {\n        silent: options.silent,\n      })\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    }\n  })\n\nexport function parseRegistryArg(arg: string): {\n  namespace: string\n  url?: string\n} {\n  const [namespace, ...rest] = arg.split(\"=\")\n  const url = rest.length > 0 ? rest.join(\"=\") : undefined\n\n  if (!namespace.startsWith(\"@\")) {\n    throw new Error(\n      `Invalid registry namespace: ${highlighter.info(namespace)}. ` +\n        `Registry names must start with @ (e.g., @acme).`\n    )\n  }\n\n  return { namespace, url }\n}\n\nfunction pluralize(count: number, singular: string, plural: string) {\n  return `${count} ${count === 1 ? singular : plural}`\n}\n\nasync function addRegistriesToConfig(\n  registryArgs: string[],\n  cwd: string,\n  options: { silent?: boolean }\n) {\n  const configPath = path.resolve(cwd, \"components.json\")\n  if (!fs.existsSync(configPath)) {\n    throw new Error(\n      `No ${highlighter.info(\"components.json\")} found. Run ${highlighter.info(\n        \"shadcn init\"\n      )} first.`\n    )\n  }\n\n  const parsed = registryArgs.map(parseRegistryArg)\n  const needsLookup = parsed.filter((p) => !p.url)\n  let registriesIndex: { name: string; url: string }[] = []\n  if (needsLookup.length > 0) {\n    const fetchSpinner = spinner(\"Fetching registries.\", {\n      silent: options.silent,\n    }).start()\n    const registries = await getRegistries()\n    if (!registries) {\n      fetchSpinner.fail()\n      throw new Error(\"Failed to fetch registries.\")\n    }\n    fetchSpinner.succeed()\n    registriesIndex = registries\n  }\n\n  const registriesToAdd: Record<string, string> = {}\n  for (const { namespace, url } of parsed) {\n    if (namespace in BUILTIN_REGISTRIES) {\n      logger.warn(\n        `${highlighter.info(\n          namespace\n        )} is a built-in registry and cannot be added.`\n      )\n      continue\n    }\n\n    if (url) {\n      if (!url.includes(\"{name}\")) {\n        throw new Error(\n          `Invalid registry URL for ${highlighter.info(\n            namespace\n          )}. URL must include {name} placeholder. Example: ${highlighter.info(\n            `${namespace}=https://example.com/r/{name}.json`\n          )}`\n        )\n      }\n      registriesToAdd[namespace] = url\n    } else {\n      const registry = registriesIndex.find((r) => r.name === namespace)\n      if (!registry) {\n        throw new Error(\n          `Registry ${highlighter.info(namespace)} not found. ` +\n            `Provide a URL: ${highlighter.info(\n              `${namespace}=https://.../{name}.json`\n            )}`\n        )\n      }\n      registriesToAdd[namespace] = registry.url\n    }\n  }\n\n  if (Object.keys(registriesToAdd).length === 0) {\n    return { addedRegistries: [] }\n  }\n\n  const existingConfig = await fs.readJson(configPath)\n  const existingRegistries = existingConfig.registries || {}\n  const newRegistries: Record<string, string> = {}\n  const skipped: string[] = []\n  for (const [ns, url] of Object.entries(registriesToAdd)) {\n    if (existingRegistries[ns]) {\n      skipped.push(ns)\n    } else {\n      newRegistries[ns] = url\n    }\n  }\n\n  if (Object.keys(newRegistries).length === 0) {\n    if (skipped.length > 0 && !options.silent) {\n      spinner(\n        `Skipped ${pluralize(\n          skipped.length,\n          \"registry\",\n          \"registries\"\n        )}: (already configured)`,\n        { silent: options.silent }\n      )?.info()\n      for (const name of skipped) {\n        logger.log(`  - ${name}`)\n      }\n    } else if (!options.silent) {\n      logger.info(\"No new registries to add.\")\n    }\n    return\n  }\n\n  const updatedConfig = {\n    ...existingConfig,\n    registries: {\n      ...existingRegistries,\n      ...newRegistries,\n    },\n  }\n\n  const writeSpinner = spinner(\"Updating components.json.\", {\n    silent: options.silent,\n  }).start()\n  await fs.writeJson(configPath, updatedConfig, { spaces: 2 })\n  writeSpinner.succeed()\n\n  if (!options.silent) {\n    const newRegistryNames = Object.keys(newRegistries)\n    spinner(\n      `Added ${pluralize(newRegistryNames.length, \"registry\", \"registries\")}:`,\n      { silent: options.silent }\n    )?.succeed()\n    for (const name of newRegistryNames) {\n      logger.log(`  - ${name}`)\n    }\n\n    if (skipped.length > 0) {\n      spinner(\n        `Skipped ${pluralize(\n          skipped.length,\n          \"registry\",\n          \"registries\"\n        )}: (already configured)`,\n        { silent: options.silent }\n      )?.info()\n      for (const name of skipped) {\n        logger.log(`  - ${name}`)\n      }\n    }\n  }\n}\n\nasync function promptForRegistries(options: { silent?: boolean }) {\n  const fetchSpinner = spinner(\"Fetching registries.\", {\n    silent: options.silent,\n  }).start()\n  const registries = await getRegistries()\n  if (!registries) {\n    fetchSpinner.fail()\n    throw new Error(\"Failed to fetch registries.\")\n  }\n  fetchSpinner.succeed()\n\n  const sorted = [...registries].sort((a, b) => a.name.localeCompare(b.name))\n\n  const { selected } = await prompts({\n    type: \"autocompleteMultiselect\",\n    name: \"selected\",\n    message: \"Which registries would you like to add?\",\n    hint: \"Space to select. A to toggle all. Enter to submit.\",\n    instructions: false,\n    choices: sorted.map((r) => ({\n      title: r.name,\n      description: r.description,\n      value: r.name,\n    })),\n  })\n\n  if (!selected?.length) {\n    logger.warn(\"No registries selected. Exiting.\")\n    logger.info(\"\")\n    process.exit(1)\n  }\n\n  return selected as string[]\n}\n","import { add } from \"@/src/commands/registry/add\"\nimport { Command } from \"commander\"\n\nexport const registry = new Command()\n  .name(\"registry\")\n  .description(\"manage registries\")\n  .addCommand(add)\n","import path from \"path\"\nimport { buildOptionsSchema } from \"@/src/commands/build\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { getConfig } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport fs from \"fs-extra\"\nimport { z } from \"zod\"\n\nexport async function preFlightRegistryBuild(\n  options: z.infer<typeof buildOptionsSchema>\n) {\n  const errors: Record<string, boolean> = {}\n\n  const resolvePaths = {\n    cwd: options.cwd,\n    registryFile: path.resolve(options.cwd, options.registryFile),\n    outputDir: path.resolve(options.cwd, options.outputDir),\n  }\n\n  // Ensure registry file exists.\n  if (!fs.existsSync(resolvePaths.registryFile)) {\n    errors[ERRORS.BUILD_MISSING_REGISTRY_FILE] = true\n    return {\n      errors,\n      resolvePaths: null,\n      config: null,\n    }\n  }\n\n  // Check for existing components.json file.\n  if (!fs.existsSync(path.resolve(options.cwd, \"components.json\"))) {\n    errors[ERRORS.MISSING_CONFIG] = true\n    return {\n      errors,\n      resolvePaths: null,\n      config: null,\n    }\n  }\n\n  // Create output directory if it doesn't exist.\n  await fs.mkdir(resolvePaths.outputDir, { recursive: true })\n\n  try {\n    const config = await getConfig(options.cwd)\n\n    return {\n      errors,\n      config: config!,\n      resolvePaths,\n    }\n  } catch (error) {\n    logger.break()\n    logger.error(\n      `An invalid ${highlighter.info(\n        \"components.json\"\n      )} file was found at ${highlighter.info(\n        options.cwd\n      )}.\\nBefore you can build the registry, you must create a valid ${highlighter.info(\n        \"components.json\"\n      )} file by running the ${highlighter.info(\"init\")} command.`\n    )\n    logger.break()\n    process.exit(1)\n  }\n}\n","import * as fs from \"fs/promises\"\nimport * as path from \"path\"\nimport { preFlightRegistryBuild } from \"@/src/preflights/preflight-registry\"\nimport { recursivelyResolveFileImports } from \"@/src/registry/utils\"\nimport { configSchema, registryItemSchema, registrySchema } from \"@/src/schema\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { ProjectInfo, getProjectInfo } from \"@/src/utils/get-project-info\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { Command } from \"commander\"\nimport { z } from \"zod\"\n\nexport const buildOptionsSchema = z.object({\n  cwd: z.string(),\n  registryFile: z.string(),\n  outputDir: z.string(),\n  verbose: z.boolean().optional().default(false),\n})\n\nexport const build = new Command()\n  .name(\"registry:build\")\n  .description(\"builds the registry [EXPERIMENTAL]\")\n  .argument(\"[registry]\", \"path to registry.json file\", \"./registry.json\")\n  .option(\n    \"-o, --output <path>\",\n    \"destination directory for json files\",\n    \"./public/r\"\n  )\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-v, --verbose\", \"verbose output\")\n  .action(async (registry: string, opts) => {\n    await buildRegistry({\n      cwd: path.resolve(opts.cwd),\n      registryFile: registry,\n      outputDir: opts.output,\n      verbose: opts.verbose,\n    })\n  })\n\nasync function buildRegistry(opts: z.infer<typeof buildOptionsSchema>) {\n  try {\n    const options = buildOptionsSchema.parse(opts)\n\n    const [{ errors, resolvePaths, config }, projectInfo] = await Promise.all([\n      preFlightRegistryBuild(options),\n      getProjectInfo(options.cwd),\n    ])\n\n    if (errors[ERRORS.MISSING_CONFIG] || !config || !projectInfo) {\n      logger.error(\n        `A ${highlighter.info(\n          \"components.json\"\n        )} file is required to build the registry. Run ${highlighter.info(\n          \"shadcn init\"\n        )} to create one.`\n      )\n      logger.break()\n      process.exit(1)\n    }\n\n    if (errors[ERRORS.BUILD_MISSING_REGISTRY_FILE] || !resolvePaths) {\n      logger.error(\n        `We could not find a registry file at ${highlighter.info(\n          path.resolve(options.cwd, options.registryFile)\n        )}.`\n      )\n      logger.break()\n      process.exit(1)\n    }\n\n    const content = await fs.readFile(resolvePaths.registryFile, \"utf-8\")\n    const result = registrySchema.safeParse(JSON.parse(content))\n\n    if (!result.success) {\n      logger.error(\n        `Invalid registry file found at ${highlighter.info(\n          resolvePaths.registryFile\n        )}.`\n      )\n      logger.break()\n      process.exit(1)\n    }\n\n    const buildSpinner = spinner(\"Building registry...\")\n\n    // Recursively resolve the registry items.\n    const resolvedRegistry = await resolveRegistryItems(\n      result.data,\n      config,\n      projectInfo\n    )\n\n    // Loop through the registry items and remove duplicates files i.e same path.\n    for (const registryItem of resolvedRegistry.items) {\n      // Deduplicate files\n      registryItem.files = registryItem.files?.filter(\n        (file, index, self) =>\n          index === self.findIndex((t) => t.path === file.path)\n      )\n\n      // Deduplicate dependencies\n      if (registryItem.dependencies) {\n        registryItem.dependencies = registryItem.dependencies.filter(\n          (dep, index, self) => index === self.findIndex((d) => d === dep)\n        )\n      }\n    }\n\n    for (const registryItem of resolvedRegistry.items) {\n      if (!registryItem.files) {\n        continue\n      }\n\n      buildSpinner.start(`Building ${registryItem.name}...`)\n\n      // Add the schema to the registry item.\n      registryItem[\"$schema\"] =\n        \"https://ui.shadcn.com/schema/registry-item.json\"\n\n      for (const file of registryItem.files) {\n        const absPath = path.resolve(resolvePaths.cwd, file.path)\n        try {\n          const stat = await fs.stat(absPath)\n          if (!stat.isFile()) {\n            continue\n          }\n          file[\"content\"] = await fs.readFile(absPath, \"utf-8\")\n        } catch (err) {\n          console.error(\"Error reading file in registry build:\", absPath, err)\n          continue\n        }\n      }\n\n      const result = registryItemSchema.safeParse(registryItem)\n      if (!result.success) {\n        logger.error(\n          `Invalid registry item found for ${highlighter.info(\n            registryItem.name\n          )}.`\n        )\n        continue\n      }\n\n      // Write the registry item to the output directory.\n      await fs.writeFile(\n        path.resolve(resolvePaths.outputDir, `${result.data.name}.json`),\n        JSON.stringify(result.data, null, 2)\n      )\n    }\n\n    // Copy registry.json to the output directory.\n    await fs.copyFile(\n      resolvePaths.registryFile,\n      path.resolve(resolvePaths.outputDir, \"registry.json\")\n    )\n\n    buildSpinner.succeed(\"Building registry.\")\n\n    if (options.verbose) {\n      spinner(\n        `The registry has ${highlighter.info(\n          resolvedRegistry.items.length.toString()\n        )} items:`\n      ).succeed()\n      for (const item of resolvedRegistry.items) {\n        logger.log(`  - ${item.name} (${highlighter.info(item.type)})`)\n        for (const file of item.files ?? []) {\n          logger.log(`    - ${file.path}`)\n        }\n      }\n    }\n  } catch (error) {\n    logger.break()\n    handleError(error)\n  }\n}\n\n// This reads the registry and recursively resolves the file imports.\nasync function resolveRegistryItems(\n  registry: z.infer<typeof registrySchema>,\n  config: z.infer<typeof configSchema>,\n  projectInfo: ProjectInfo\n): Promise<z.infer<typeof registrySchema>> {\n  for (const item of registry.items) {\n    if (!item.files?.length) {\n      continue\n    }\n\n    // Process all files in the array instead of just the first one\n    for (const file of item.files) {\n      const results = await recursivelyResolveFileImports(\n        file.path,\n        config,\n        projectInfo\n      )\n\n      // Remove file from results.files\n      results.files = results.files?.filter((f) => f.path !== file.path)\n\n      if (results.files) {\n        item.files.push(...results.files)\n      }\n\n      if (results.dependencies) {\n        item.dependencies = item.dependencies\n          ? item.dependencies.concat(results.dependencies)\n          : results.dependencies\n      }\n    }\n  }\n\n  return registry\n}\n","import { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { Command } from \"commander\"\n\nexport const mcp = new Command()\n  .name(\"registry:mcp\")\n  .description(\"starts the registry MCP server [DEPRECATED]\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async () => {\n    logger.warn(\n      `The ${highlighter.info(\n        \"shadcn registry:mcp\"\n      )} command is deprecated. Use the ${highlighter.info(\n        \"shadcn mcp\"\n      )} command instead.`\n    )\n    logger.break()\n  })\n","import path from \"path\"\nimport { configWithDefaults } from \"@/src/registry/config\"\nimport { clearRegistryContext } from \"@/src/registry/context\"\nimport { searchRegistries } from \"@/src/registry/search\"\nimport { validateRegistryConfigForItems } from \"@/src/registry/validator\"\nimport { rawConfigSchema } from \"@/src/schema\"\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\nimport { createConfig, getConfig } from \"@/src/utils/get-config\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { ensureRegistriesInConfig } from \"@/src/utils/registries\"\nimport { Command } from \"commander\"\nimport fsExtra from \"fs-extra\"\nimport { z } from \"zod\"\n\nconst searchOptionsSchema = z.object({\n  cwd: z.string(),\n  query: z.string().optional(),\n  limit: z.number().optional(),\n  offset: z.number().optional(),\n})\n\n// TODO: We're duplicating logic for shadowConfig here.\n// Revisit and properly abstract this.\n\nexport const search = new Command()\n  .name(\"search\")\n  .alias(\"list\")\n  .description(\"search items from registries\")\n  .argument(\n    \"<registries...>\",\n    \"the registry names or urls to search items from. Names must be prefixed with @.\"\n  )\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-q, --query <query>\", \"query string\")\n  .option(\n    \"-l, --limit <number>\",\n    \"maximum number of items to display per registry\",\n    \"100\"\n  )\n  .option(\"-o, --offset <number>\", \"number of items to skip\", \"0\")\n  .action(async (registries: string[], opts) => {\n    try {\n      const options = searchOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        query: opts.query,\n        limit: opts.limit ? parseInt(opts.limit, 10) : undefined,\n        offset: opts.offset ? parseInt(opts.offset, 10) : undefined,\n      })\n\n      await loadEnvFiles(options.cwd)\n\n      // Start with a shadow config to support partial components.json.\n      // Use createConfig to get proper default paths\n      const defaultConfig = createConfig({\n        style: \"new-york\",\n        resolvedPaths: {\n          cwd: options.cwd,\n        },\n      })\n      let shadowConfig = configWithDefaults(defaultConfig)\n\n      // Check if there's a components.json file (partial or complete).\n      const componentsJsonPath = path.resolve(options.cwd, \"components.json\")\n      if (fsExtra.existsSync(componentsJsonPath)) {\n        const existingConfig = await fsExtra.readJson(componentsJsonPath)\n        const partialConfig = rawConfigSchema.partial().parse(existingConfig)\n        shadowConfig = configWithDefaults({\n          ...defaultConfig,\n          ...partialConfig,\n        })\n      }\n\n      // Try to get the full config, but fall back to shadow config if it fails.\n      let config = shadowConfig\n      try {\n        const fullConfig = await getConfig(options.cwd)\n        if (fullConfig) {\n          config = configWithDefaults(fullConfig)\n        }\n      } catch {\n        // Use shadow config if getConfig fails (partial components.json).\n      }\n\n      const { config: updatedConfig, newRegistries } =\n        await ensureRegistriesInConfig(\n          registries.map((registry) => `${registry}/registry`),\n          config,\n          {\n            silent: true,\n            writeFile: false,\n          }\n        )\n      if (newRegistries.length > 0) {\n        config.registries = updatedConfig.registries\n      }\n\n      // Validate registries early for better error messages.\n      validateRegistryConfigForItems(registries, config)\n\n      // Use searchRegistries for both search and non-search cases\n      const results = await searchRegistries(registries as `@${string}`[], {\n        query: options.query,\n        limit: options.limit,\n        offset: options.offset,\n        config,\n      })\n\n      console.log(JSON.stringify(results, null, 2))\n      process.exit(0)\n    } catch (error) {\n      handleError(error)\n    } finally {\n      clearRegistryContext()\n    }\n  })\n","import path from \"path\"\nimport { getRegistryItems } from \"@/src/registry/api\"\nimport { configWithDefaults } from \"@/src/registry/config\"\nimport { clearRegistryContext } from \"@/src/registry/context\"\nimport { validateRegistryConfigForItems } from \"@/src/registry/validator\"\nimport { rawConfigSchema } from \"@/src/schema\"\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\nimport { getConfig } from \"@/src/utils/get-config\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { ensureRegistriesInConfig } from \"@/src/utils/registries\"\nimport { Command } from \"commander\"\nimport fsExtra from \"fs-extra\"\nimport { z } from \"zod\"\n\nconst viewOptionsSchema = z.object({\n  cwd: z.string(),\n})\n\nexport const view = new Command()\n  .name(\"view\")\n  .description(\"view items from the registry\")\n  .argument(\"<items...>\", \"the item names or URLs to view\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async (items: string[], opts) => {\n    try {\n      const options = viewOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n      })\n\n      await loadEnvFiles(options.cwd)\n\n      // Start with a shadow config to support partial components.json.\n      let shadowConfig = configWithDefaults({})\n\n      // Check if there's a components.json file (partial or complete).\n      const componentsJsonPath = path.resolve(options.cwd, \"components.json\")\n      if (fsExtra.existsSync(componentsJsonPath)) {\n        const existingConfig = await fsExtra.readJson(componentsJsonPath)\n        const partialConfig = rawConfigSchema.partial().parse(existingConfig)\n        shadowConfig = configWithDefaults(partialConfig)\n      }\n\n      // Try to get the full config, but fall back to shadow config if it fails.\n      let config = shadowConfig\n      try {\n        const fullConfig = await getConfig(options.cwd)\n        if (fullConfig) {\n          config = configWithDefaults(fullConfig)\n        }\n      } catch {\n        // Use shadow config if getConfig fails (partial components.json).\n      }\n\n      const { config: updatedConfig, newRegistries } =\n        await ensureRegistriesInConfig(items, config, {\n          silent: true,\n          writeFile: false,\n        })\n      if (newRegistries.length > 0) {\n        config.registries = updatedConfig.registries\n      }\n\n      // Validate registries early for better error messages.\n      validateRegistryConfigForItems(items, config)\n\n      const payload = await getRegistryItems(items, { config })\n      console.log(JSON.stringify(payload, null, 2))\n      process.exit(0)\n    } catch (error) {\n      handleError(error)\n    } finally {\n      clearRegistryContext()\n    }\n  })\n","{\n  \"name\": \"shadcn\",\n  \"version\": \"3.8.5\",\n  \"description\": \"Add components to your apps.\",\n  \"publishConfig\": {\n    \"access\": \"public\"\n  },\n  \"license\": \"MIT\",\n  \"author\": {\n    \"name\": \"shadcn\",\n    \"url\": \"https://twitter.com/shadcn\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/shadcn-ui/ui.git\",\n    \"directory\": \"packages/shadcn\"\n  },\n  \"files\": [\n    \"dist\"\n  ],\n  \"keywords\": [\n    \"components\",\n    \"ui\",\n    \"tailwind\",\n    \"radix-ui\",\n    \"shadcn\"\n  ],\n  \"type\": \"module\",\n  \"exports\": {\n    \".\": {\n      \"types\": \"./dist/index.d.ts\",\n      \"default\": \"./dist/index.js\"\n    },\n    \"./registry\": {\n      \"types\": \"./dist/registry/index.d.ts\",\n      \"default\": \"./dist/registry/index.js\"\n    },\n    \"./schema\": {\n      \"types\": \"./dist/schema/index.d.ts\",\n      \"default\": \"./dist/schema/index.js\"\n    },\n    \"./mcp\": {\n      \"types\": \"./dist/mcp/index.d.ts\",\n      \"default\": \"./dist/mcp/index.js\"\n    },\n    \"./utils\": {\n      \"types\": \"./dist/utils/index.d.ts\",\n      \"default\": \"./dist/utils/index.js\"\n    },\n    \"./icons\": {\n      \"types\": \"./dist/icons/index.d.ts\",\n      \"default\": \"./dist/icons/index.js\"\n    },\n    \"./tailwind.css\": {\n      \"style\": \"./dist/tailwind.css\"\n    }\n  },\n  \"bin\": \"./dist/index.js\",\n  \"scripts\": {\n    \"dev\": \"tsup --watch\",\n    \"build\": \"tsup\",\n    \"typecheck\": \"tsc --noEmit\",\n    \"clean\": \"rimraf dist && rimraf components\",\n    \"start:dev\": \"cross-env REGISTRY_URL=http://localhost:4000/r node dist/index.js\",\n    \"start:prod\": \"cross-env REGISTRY_URL=https://ui.shadcn.com/r node dist/index.js\",\n    \"start\": \"node dist/index.js\",\n    \"format:write\": \"prettier --write \\\"**/*.{ts,tsx,mdx}\\\" --cache\",\n    \"format:check\": \"prettier --check \\\"**/*.{ts,tsx,mdx}\\\" --cache\",\n    \"release\": \"changeset version\",\n    \"pub:beta\": \"pnpm build && pnpm publish --no-git-checks --access public --tag beta\",\n    \"pub:next\": \"pnpm build && pnpm publish --no-git-checks --access public --tag next\",\n    \"pub:release\": \"pnpm build && pnpm publish --access public\",\n    \"test\": \"vitest run\",\n    \"test:dev\": \"REGISTRY_URL=http://localhost:4000/r vitest run\",\n    \"mcp:inspect\": \"pnpm dlx @modelcontextprotocol/inspector node dist/index.js mcp\"\n  },\n  \"dependencies\": {\n    \"@antfu/ni\": \"^25.0.0\",\n    \"@babel/core\": \"^7.28.0\",\n    \"@babel/parser\": \"^7.28.0\",\n    \"@babel/plugin-transform-typescript\": \"^7.28.0\",\n    \"@babel/preset-typescript\": \"^7.27.1\",\n    \"@dotenvx/dotenvx\": \"^1.48.4\",\n    \"@modelcontextprotocol/sdk\": \"^1.26.0\",\n    \"@types/validate-npm-package-name\": \"^4.0.2\",\n    \"browserslist\": \"^4.26.2\",\n    \"commander\": \"^14.0.0\",\n    \"cosmiconfig\": \"^9.0.0\",\n    \"dedent\": \"^1.6.0\",\n    \"deepmerge\": \"^4.3.1\",\n    \"diff\": \"^8.0.2\",\n    \"execa\": \"^9.6.0\",\n    \"fast-glob\": \"^3.3.3\",\n    \"fs-extra\": \"^11.3.1\",\n    \"fuzzysort\": \"^3.1.0\",\n    \"https-proxy-agent\": \"^7.0.6\",\n    \"kleur\": \"^4.1.5\",\n    \"msw\": \"^2.10.4\",\n    \"node-fetch\": \"^3.3.2\",\n    \"open\": \"^11.0.0\",\n    \"ora\": \"^8.2.0\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-selector-parser\": \"^7.1.0\",\n    \"prompts\": \"^2.4.2\",\n    \"recast\": \"^0.23.11\",\n    \"stringify-object\": \"^5.0.0\",\n    \"tailwind-merge\": \"^3.0.1\",\n    \"ts-morph\": \"^26.0.0\",\n    \"tsconfig-paths\": \"^4.2.0\",\n    \"validate-npm-package-name\": \"^7.0.1\",\n    \"zod\": \"^3.24.1\",\n    \"zod-to-json-schema\": \"^3.24.6\"\n  },\n  \"devDependencies\": {\n    \"@types/babel__core\": \"^7.20.5\",\n    \"@types/fs-extra\": \"^11.0.4\",\n    \"@types/prompts\": \"^2.4.9\",\n    \"@types/stringify-object\": \"^4.0.5\",\n    \"rimraf\": \"^6.0.1\",\n    \"tsup\": \"^8.5.0\",\n    \"type-fest\": \"^4.41.0\",\n    \"typescript\": \"^5.9.2\"\n  }\n}\n","#!/usr/bin/env node\nimport { add } from \"@/src/commands/add\"\nimport { build } from \"@/src/commands/build\"\nimport { create } from \"@/src/commands/create\"\nimport { diff } from \"@/src/commands/diff\"\nimport { info } from \"@/src/commands/info\"\nimport { init } from \"@/src/commands/init\"\nimport { mcp } from \"@/src/commands/mcp\"\nimport { migrate } from \"@/src/commands/migrate\"\nimport { registry } from \"@/src/commands/registry\"\nimport { build as registryBuild } from \"@/src/commands/registry/build\"\nimport { mcp as registryMcp } from \"@/src/commands/registry/mcp\"\nimport { search } from \"@/src/commands/search\"\nimport { view } from \"@/src/commands/view\"\nimport { Command } from \"commander\"\n\nimport packageJson from \"../package.json\"\n\nprocess.on(\"SIGINT\", () => process.exit(0))\nprocess.on(\"SIGTERM\", () => process.exit(0))\n\nasync function main() {\n  const program = new Command()\n    .name(\"shadcn\")\n    .description(\"add items from registries to your project\")\n    .version(\n      packageJson.version || \"1.0.0\",\n      \"-v, --version\",\n      \"display the version number\"\n    )\n\n  program\n    .addCommand(init)\n    .addCommand(create)\n    .addCommand(add)\n    .addCommand(diff)\n    .addCommand(view)\n    .addCommand(search)\n    .addCommand(migrate)\n    .addCommand(info)\n    .addCommand(build)\n    .addCommand(mcp)\n    .addCommand(registry)\n  // Legacy registry commands.\n  program.addCommand(registryBuild).addCommand(registryMcp)\n\n  program.parse()\n}\n\nmain()\n\nexport * from \"./registry/api\"\n"]}