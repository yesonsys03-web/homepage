import {a}from'./chunk-RKTXGSVI.js';import {SyntaxKind,Project,ScriptKind}from'ts-morph';var H=async({sourceFile:i,config:e})=>{let s=e.iconLibrary;if(!s||!(s in a))return i;let r=s,t=a[r],a$1=[];for(let l of i.getDescendantsOfKind(SyntaxKind.JsxSelfClosingElement)){if(l.getTagNameNode()?.getText()!=="IconPlaceholder")continue;let f=l.getAttributes().find(g=>g.getKind()!==SyntaxKind.JsxAttribute?false:g.asKindOrThrow(SyntaxKind.JsxAttribute).getNameNode().getText()===r);if(!f)continue;let n=f.asKindOrThrow(SyntaxKind.JsxAttribute),c=n.getInitializer()?.getText().replace(/^["']|["']$/g,"");if(!c)continue;a$1.includes(c)||a$1.push(c);let u=t.usage.match(/<(\w+)([^>]*)\s*\/>/);n.remove();for(let g of l.getAttributes()){if(g.getKind()!==SyntaxKind.JsxAttribute)continue;let x=g.asKindOrThrow(SyntaxKind.JsxAttribute);x.getNameNode().getText()in a&&x.remove();}if(!u){l.getTagNameNode()?.replaceWithText(c);continue}let[,N,A]=u;if(N==="ICON"){let g=l.getAttributes().filter(x=>x.getKind()!==SyntaxKind.JsxAttribute?true:!(x.asKindOrThrow(SyntaxKind.JsxAttribute).getNameNode().getText()in a)).map(x=>x.getText()).join(" ");g.trim()?l.replaceWithText(`<${c} ${g} />`):l.getTagNameNode()?.replaceWithText(c);}else {let g=new Set(l.getAttributes().filter(m=>m.getKind()===SyntaxKind.JsxAttribute).map(m=>m.asKindOrThrow(SyntaxKind.JsxAttribute).getNameNode().getText())),S=A.replace(/\{ICON\}/g,`{${c}}`).trim().split(/\s+(?=\w+=)/).filter(m=>m).map(m=>{let K=m.split("=")[0];return K&&!g.has(K)?m:null}).filter(Boolean),E=l.getAttributes().filter(m=>m.getKind()!==SyntaxKind.JsxAttribute?true:!(m.asKindOrThrow(SyntaxKind.JsxAttribute).getNameNode().getText()in a)).map(m=>m.getText()).join(" "),$=[...S,E].filter(Boolean).join(" ");l.replaceWithText(`<${N} ${$} />`);}}for(let l of i.getImportDeclarations()??[])if(l.getModuleSpecifier()?.getText()?.includes("icon-placeholder")){let c=(l.getNamedImports()??[]).find(d=>d.getName()==="IconPlaceholder");c&&c.remove(),l.getNamedImports()?.length===0&&l.remove();}if(a$1.length>0){let l=t.import.split(`
`),f=[];for(let n of l){let c=n.match(/import\s+{([^}]+)}\s+from\s+['"]([^'"]+)['"]/);if(!c)continue;let[,d,u]=c,N=d.split(",").map(g=>g.trim()).map(g=>g==="ICON"?a$1.map(x=>({name:x})):{name:g}).flat(),A=i.addImportDeclaration({moduleSpecifier:u,namedImports:N});f.push(A);}if(!L(i))for(let n of f)n.replaceWithText(n.getText().replace(";",""));}return i};function L(i){return i.getImportDeclarations()?.[0]?.getText().endsWith(";")??false}var F=async({sourceFile:i,config:e,baseColor:s})=>(e.tailwind?.cssVariables||!s?.inlineColors||i.getDescendantsOfKind(SyntaxKind.StringLiteral).forEach(r=>{let t=r.getLiteralText(),a=z(t,s.inlineColors).trim();a!==t&&r.setLiteralValue(a);}),i);function I(i){if(!i.includes("/")&&!i.includes(":"))return [null,i,null];let e=-1,s=0;for(let n=i.length-1;n>=0;n--){let c=i[n];if(c==="]")s++;else if(c==="[")s--;else if(c===":"&&s===0){e=n;break}}let r=null,t;e===-1?t=i:(r=i.slice(0,e),t=i.slice(e+1));let a=t.lastIndexOf("/");if(a===-1)return [r,t,null];let l=t.slice(0,a),f=t.slice(a+1);return [r,l,f]}var D=["bg-","text-","border-","ring-offset-","ring-"];function z(i,e){i.includes(" border ")&&(i=i.replace(" border "," border border-border "));let s=i.split(" "),r=new Set,t=new Set;for(let a of s){let[l,f,n]=I(a),c=D.find(u=>f?.startsWith(u));if(!c){r.has(a)||r.add(a);continue}let d=f?.replace(c,"");if(d&&d in e.light){r.add([l,`${c}${e.light[d]}`].filter(Boolean).join(":")+(n?`/${n}`:"")),t.add(["dark",l,`${c}${e.dark[d]}`].filter(Boolean).join(":")+(n?`/${n}`:""));continue}r.has(a)||r.add(a);}return [...Array.from(r),...Array.from(t)].join(" ").trim()}var v=[["-ml-","-ms-"],["-mr-","-me-"],["ml-","ms-"],["mr-","me-"],["pl-","ps-"],["pr-","pe-"],["-left-","-start-"],["-right-","-end-"],["left-","start-"],["right-","end-"],["inset-l-","inset-inline-start-"],["inset-r-","inset-inline-end-"],["rounded-tl-","rounded-ss-"],["rounded-tr-","rounded-se-"],["rounded-bl-","rounded-es-"],["rounded-br-","rounded-ee-"],["rounded-l-","rounded-s-"],["rounded-r-","rounded-e-"],["border-l-","border-s-"],["border-r-","border-e-"],["border-l","border-s"],["border-r","border-e"],["text-left","text-start"],["text-right","text-end"],["scroll-ml-","scroll-ms-"],["scroll-mr-","scroll-me-"],["scroll-pl-","scroll-ps-"],["scroll-pr-","scroll-pe-"],["float-left","float-start"],["float-right","float-end"],["clear-left","clear-start"],["clear-right","clear-end"],["origin-top-left","origin-top-start"],["origin-top-right","origin-top-end"],["origin-bottom-left","origin-bottom-start"],["origin-bottom-right","origin-bottom-end"],["origin-left","origin-start"],["origin-right","origin-end"]],w=[["-translate-x-","translate-x-"],["translate-x-","-translate-x-"]],M=[["space-x-","space-x-reverse"],["divide-x-","divide-x-reverse"]],R=[["cursor-w-resize","cursor-e-resize"],["cursor-e-resize","cursor-w-resize"]],j=[["data-[side=inline-start]","slide-in-from-right","slide-in-from-end"],["data-[side=inline-start]","slide-out-to-right","slide-out-to-end"],["data-[side=inline-end]","slide-in-from-left","slide-in-from-start"],["data-[side=inline-end]","slide-out-to-left","slide-out-to-start"]],J="cn-rtl-flip",P=["ContextMenuContent","ContextMenuSubContent","DropdownMenuSubContent"],y={right:"inline-end",left:"inline-start"},V=["-left-","-right-","left-","right-"],nt=async({sourceFile:i,config:e})=>(e.rtl&&C(i),i);async function st(i,e){if(!e)return i;let r=new Project({useInMemoryFileSystem:true}).createSourceFile("component.tsx",i,{scriptKind:ScriptKind.TSX,overwrite:true});return C(r),r.getText()}function b(i){return i.replace(/^["']|["']$/g,"")}function h(i){let e=b(i.getText()??"");i.replaceWithText(`"${B(e)}"`);}function B(i){return i.split(" ").flatMap(e=>{if(e.startsWith("rtl:")||e.startsWith("ltr:"))return [e];if(e===J)return ["rtl:rotate-180"];let[s,r,t]=I(e);if(!r)return [e];for(let[n,c]of w)if(r.startsWith(n)){let d=r.replace(n,c),u=s?`rtl:${s}:${d}${t?`/${t}`:""}`:`rtl:${d}${t?`/${t}`:""}`;return [e,u]}for(let[n,c]of M)if(r.startsWith(n)){let d=s?`rtl:${s}:${c}`:`rtl:${c}`;return [e,d]}for(let[n,c]of R)if(r===n){let d=s?`rtl:${s}:${c}`:`rtl:${c}`;return [e,d]}for(let[n,c,d]of j)if(s?.includes(n)&&r.startsWith(c)){let u=r.replace(c,d);return [t?`${s}:${u}/${t}`:`${s}:${u}`]}let a=s?.includes("data-[side=left]")||s?.includes("data-[side=right]"),l=r;for(let[n,c]of v)if(!(a&&V.some(d=>n.startsWith(d)))&&r.startsWith(n)){if(!n.endsWith("-")&&r!==n)continue;l=r.replace(n,c);break}let f;return s?f=t?`${s}:${l}/${t}`:`${s}:${l}`:f=t?`${l}/${t}`:l,[f]}).join(" ")}function C(i){i.getDescendantsOfKind(SyntaxKind.CallExpression).filter(e=>e.getExpression().getText()==="cva").forEach(e=>{let s=e.getArguments()[0];s?.isKind(SyntaxKind.StringLiteral)&&h(s),e.getArguments()[1]?.isKind(SyntaxKind.ObjectLiteralExpression)&&e.getArguments()[1]?.getDescendantsOfKind(SyntaxKind.PropertyAssignment).find(r=>r.getName()==="variants")?.getDescendantsOfKind(SyntaxKind.PropertyAssignment).forEach(r=>{r.getDescendantsOfKind(SyntaxKind.PropertyAssignment).forEach(t=>{let a=t.getInitializerIfKind(SyntaxKind.StringLiteral);a&&h(a);});});}),i.getDescendantsOfKind(SyntaxKind.JsxAttribute).forEach(e=>{if(e.getNameNode().getText()==="className"){let s=e.getInitializer();if(s?.isKind(SyntaxKind.StringLiteral)&&h(s),e.getInitializer()?.isKind(SyntaxKind.JsxExpression)){let r=e.getInitializer()?.getDescendantsOfKind(SyntaxKind.CallExpression).find(t=>t.getExpression().getText()==="cn");r&&r.getArguments().forEach(t=>{(t.isKind(SyntaxKind.ConditionalExpression)||t.isKind(SyntaxKind.BinaryExpression))&&t.getChildrenOfKind(SyntaxKind.StringLiteral).forEach(h),t.isKind(SyntaxKind.StringLiteral)&&h(t);});}}e.getNameNode().getText()==="classNames"&&e.getInitializer()?.isKind(SyntaxKind.JsxExpression)&&e.getDescendantsOfKind(SyntaxKind.PropertyAssignment).forEach(s=>{if(s.getInitializer()?.isKind(SyntaxKind.CallExpression)){let t=s.getInitializerIfKind(SyntaxKind.CallExpression);t&&t.getArguments().forEach(a=>{a.isKind(SyntaxKind.ConditionalExpression)&&a.getChildrenOfKind(SyntaxKind.StringLiteral).forEach(h),a.isKind(SyntaxKind.StringLiteral)&&h(a);});}let r=s.getInitializer();r?.isKind(SyntaxKind.StringLiteral)&&s.getNameNode().getText()!=="variant"&&h(r);});}),i.getDescendantsOfKind(SyntaxKind.CallExpression).filter(e=>e.getExpression().getText()==="mergeProps").forEach(e=>{let s=e.getArguments()[0];if(s?.isKind(SyntaxKind.ObjectLiteralExpression)){let r=s.getProperties().find(t=>t.isKind(SyntaxKind.PropertyAssignment)&&t.getName()==="className");if(r?.isKind(SyntaxKind.PropertyAssignment)){let t=r.getInitializer();t?.isKind(SyntaxKind.CallExpression)&&t.getExpression().getText()==="cn"&&t.getArguments().forEach(a=>{a.isKind(SyntaxKind.StringLiteral)&&h(a),(a.isKind(SyntaxKind.ConditionalExpression)||a.isKind(SyntaxKind.BinaryExpression))&&a.getChildrenOfKind(SyntaxKind.StringLiteral).forEach(h);}),t?.isKind(SyntaxKind.StringLiteral)&&h(t);}}}),[...i.getDescendantsOfKind(SyntaxKind.JsxSelfClosingElement),...i.getDescendantsOfKind(SyntaxKind.JsxOpeningElement)].forEach(e=>{let s=e.getTagNameNode().getText();if(!P.includes(s))return;let r=e.getAttributes().find(f=>f.isKind(SyntaxKind.JsxAttribute)&&f.getNameNode().getText()==="side");if(!r?.isKind(SyntaxKind.JsxAttribute))return;let t=r.getInitializer();if(!t?.isKind(SyntaxKind.StringLiteral))return;let a=b(t.getText()??""),l=y[a];l&&t.replaceWithText(`"${l}"`);}),i.getDescendantsOfKind(SyntaxKind.BindingElement).forEach(e=>{if(e.getNameNode().getText()!=="side")return;let t=e.getFirstAncestorByKind(SyntaxKind.FunctionDeclaration)?.getName();if(!t||!P.includes(t))return;let a=e.getInitializer();if(!a?.isKind(SyntaxKind.StringLiteral))return;let l=b(a.getText()??""),f=y[l];f&&a.replaceWithText(`"${f}"`);});}var lt=async({sourceFile:i,config:e})=>{let r=e.menuColor==="inverted"?"dark":"";for(let t of i.getDescendantsOfKind(SyntaxKind.JsxAttribute)){if(t.getNameNode().getText()!=="className")continue;let l=t.getInitializer();if(!l)continue;let f=l.getText();if(!f.includes("cn-menu-target"))continue;let n=f.replace(/cn-menu-target/g,r);r||(n=n.replace(/\s{2,}/g," "),n=n.replace(/"\s+/g,'"'),n=n.replace(/\s+"/g,'"'),n=n.replace(/,\s*""\s*,/g,","),n=n.replace(/\(\s*""\s*,/g,"("),n=n.replace(/,\s*""\s*\)/g,")")),t.setInitializer(n);}return i};export{F as a,I as b,H as c,nt as d,st as e,lt as f};//# sourceMappingURL=chunk-VSDIRB3U.js.map
//# sourceMappingURL=chunk-VSDIRB3U.js.map